<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="ÁΩëÁªúÁºñÁ®ãÂü∫Á°ÄÁü•ËØÜ">
<title>„ÄêLinux„ÄëÁΩëÁªúÁºñÁ®ãÂÖ•Èó®</title>

<link rel='canonical' href='https://serennan.github.io/post/linux-network/'>

<link rel="stylesheet" href="/scss/style.min.28200eb37c90ec62988b33201e1ec6c51a9cd45dbb0bcf65f9811343f55fdead.css"><meta property='og:title' content="„ÄêLinux„ÄëÁΩëÁªúÁºñÁ®ãÂÖ•Èó®">
<meta property='og:description' content="ÁΩëÁªúÁºñÁ®ãÂü∫Á°ÄÁü•ËØÜ">
<meta property='og:url' content='https://serennan.github.io/post/linux-network/'>
<meta property='og:site_name' content='serenNan'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-04-23T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-04-26T21:56:06&#43;08:00'/><meta property='og:image' content='https://serennan.github.io/post/linux-network/cover.png' />
<meta name="twitter:title" content="„ÄêLinux„ÄëÁΩëÁªúÁºñÁ®ãÂÖ•Èó®">
<meta name="twitter:description" content="ÁΩëÁªúÁºñÁ®ãÂü∫Á°ÄÁü•ËØÜ"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://serennan.github.io/post/linux-network/cover.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="ÂàáÊç¢ËèúÂçï">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_47dcc2efc37d0778.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üêà‚Äç‚¨õ</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">serenNan</a></h1>
            <h2 class="site-description">‰∏™‰∫∫ÂçöÂÆ¢</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/450940909'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.0.0-beta2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M488.6 104.1C505.3 122.2 513 143.8 511.9 169.8V372.2C511.5 398.6 502.7 420.3 485.4 437.3C468.2 454.3 446.3 463.2 419.9 464H92.02C65.57 463.2 43.81 454.2 26.74 436.8C9.682 419.4 .7667 396.5 0 368.2V169.8C.7667 143.8 9.682 122.2 26.74 104.1C43.81 87.75 65.57 78.77 92.02 78H121.4L96.05 52.19C90.3 46.46 87.42 39.19 87.42 30.4C87.42 21.6 90.3 14.34 96.05 8.603C101.8 2.868 109.1 0 117.9 0C126.7 0 134 2.868 139.8 8.603L213.1 78H301.1L375.6 8.603C381.7 2.868 389.2 0 398 0C406.8 0 414.1 2.868 419.9 8.603C425.6 14.34 428.5 21.6 428.5 30.4C428.5 39.19 425.6 46.46 419.9 52.19L394.6 78L423.9 78C450.3 78.77 471.9 87.75 488.6 104.1H488.6zM449.8 173.8C449.4 164.2 446.1 156.4 439.1 150.3C433.9 144.2 425.1 140.9 416.4 140.5H96.05C86.46 140.9 78.6 144.2 72.47 150.3C66.33 156.4 63.07 164.2 62.69 173.8V368.2C62.69 377.4 65.95 385.2 72.47 391.7C78.99 398.2 86.85 401.5 96.05 401.5H416.4C425.6 401.5 433.4 398.2 439.7 391.7C446 385.2 449.4 377.4 449.8 368.2L449.8 173.8zM185.5 216.5C191.8 222.8 195.2 230.6 195.6 239.7V273C195.2 282.2 191.9 289.9 185.8 296.2C179.6 302.5 171.8 305.7 162.2 305.7C152.6 305.7 144.7 302.5 138.6 296.2C132.5 289.9 129.2 282.2 128.8 273V239.7C129.2 230.6 132.6 222.8 138.9 216.5C145.2 210.2 152.1 206.9 162.2 206.5C171.4 206.9 179.2 210.2 185.5 216.5H185.5zM377 216.5C383.3 222.8 386.7 230.6 387.1 239.7V273C386.7 282.2 383.4 289.9 377.3 296.2C371.2 302.5 363.3 305.7 353.7 305.7C344.1 305.7 336.3 302.5 330.1 296.2C323.1 289.9 320.7 282.2 320.4 273V239.7C320.7 230.6 324.1 222.8 330.4 216.5C336.7 210.2 344.5 206.9 353.7 206.5C362.9 206.9 370.7 210.2 377 216.5H377z"/></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/serenNan'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="438.549px" height="438.549px" viewBox="0 0 438.549 438.549" style="enable-background:new 0 0 438.549 438.549;"
	 xml:space="preserve">
<g>
	<path d="M409.132,114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736,15.166,259.057,5.365,219.271,5.365
		c-39.781,0-76.472,9.804-110.063,29.408c-33.596,19.605-60.192,46.204-79.8,79.8C9.803,148.168,0,184.854,0,224.63
		c0,47.78,13.94,90.745,41.827,128.906c27.884,38.164,63.906,64.572,108.063,79.227c5.14,0.954,8.945,0.283,11.419-1.996
		c2.475-2.282,3.711-5.14,3.711-8.562c0-0.571-0.049-5.708-0.144-15.417c-0.098-9.709-0.144-18.179-0.144-25.406l-6.567,1.136
		c-4.187,0.767-9.469,1.092-15.846,1c-6.374-0.089-12.991-0.757-19.842-1.999c-6.854-1.231-13.229-4.086-19.13-8.559
		c-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559
		c-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-0.951-2.568-2.098-3.711-3.429c-1.142-1.331-1.997-2.663-2.568-3.997
		c-0.572-1.335-0.098-2.43,1.427-3.289c1.525-0.859,4.281-1.276,8.28-1.276l5.708,0.853c3.807,0.763,8.516,3.042,14.133,6.851
		c5.614,3.806,10.229,8.754,13.846,14.842c4.38,7.806,9.657,13.754,15.846,17.847c6.184,4.093,12.419,6.136,18.699,6.136
		c6.28,0,11.704-0.476,16.274-1.423c4.565-0.952,8.848-2.383,12.847-4.285c1.713-12.758,6.377-22.559,13.988-29.41
		c-10.848-1.14-20.601-2.857-29.264-5.14c-8.658-2.286-17.605-5.996-26.835-11.14c-9.235-5.137-16.896-11.516-22.985-19.126
		c-6.09-7.614-11.088-17.61-14.987-29.979c-3.901-12.374-5.852-26.648-5.852-42.826c0-23.035,7.52-42.637,22.557-58.817
		c-7.044-17.318-6.379-36.732,1.997-58.24c5.52-1.715,13.706-0.428,24.554,3.853c10.85,4.283,18.794,7.952,23.84,10.994
		c5.046,3.041,9.089,5.618,12.135,7.708c17.705-4.947,35.976-7.421,54.818-7.421s37.117,2.474,54.823,7.421l10.849-6.849
		c7.419-4.57,16.18-8.758,26.262-12.565c10.088-3.805,17.802-4.853,23.134-3.138c8.562,21.509,9.325,40.922,2.279,58.24
		c15.036,16.18,22.559,35.787,22.559,58.817c0,16.178-1.958,30.497-5.853,42.966c-3.9,12.471-8.941,22.457-15.125,29.979
		c-6.191,7.521-13.901,13.85-23.131,18.986c-9.232,5.14-18.182,8.85-26.84,11.136c-8.662,2.286-18.415,4.004-29.263,5.146
		c9.894,8.562,14.842,22.077,14.842,40.539v60.237c0,3.422,1.19,6.279,3.572,8.562c2.379,2.279,6.136,2.95,11.276,1.995
		c44.163-14.653,80.185-41.062,108.068-79.226c27.88-38.161,41.825-81.126,41.825-128.906
		C438.536,184.851,428.728,148.168,409.132,114.573z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>‰∏ªÈ°µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/category/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="2"> <path d="M9 4h3l2 2h5a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"></path> <path d="M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h2"></path> </svg> 
                
                <span>ÂàÜÁ±ª</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>ÈìæÊé•</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        
        <li >
            <a href='/linear-algebra/' target="_blank">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828" />
</svg>



                
                <span>Â∑•ÂÖ∑</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>ÊöóËâ≤Ê®°Âºè</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>


    <aside class="sidebar right-sidebar sticky">
        
            
                
<section class="widget archives">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



    </div>
    <h2 class="widget-title section-title">ÁõÆÂΩï</h2>
    <div class="widget--toc">
        <nav id="TableOfContents">
  <ol>
    <li><a href="#ÁΩëÁªúÈÄö‰ø°Âü∫Á°Ä">ÁΩëÁªúÈÄö‰ø°Âü∫Á°Ä</a></li>
    <li><a href="#osi-Ê®°ÂûãÂíå-tcpip-Ê®°Âûã">OSI Ê®°ÂûãÂíå TCP/IP Ê®°Âûã</a></li>
    <li><a href="#Âü∫Êú¨Ê¶ÇÂøµ">Âü∫Êú¨Ê¶ÇÂøµ</a>
      <ol>
        <li><a href="#Âú∞ÂùÄÁ∞øipÂú∞ÂùÄÂíåmacÂú∞ÂùÄ">Âú∞ÂùÄÁ∞øÔºöIPÂú∞ÂùÄÂíåMACÂú∞ÂùÄ</a></li>
        <li><a href="#ÂØºËà™Ë∑ØÁ∫øÂ≠êÁΩëÊé©Á†ÅÂíåÁΩëÂÖ≥">ÂØºËà™Ë∑ØÁ∫øÔºöÂ≠êÁΩëÊé©Á†ÅÂíåÁΩëÂÖ≥</a></li>
        <li><a href="#Á´ØÂè£-Á°Æ‰øùÊï∞ÊçÆÂà∞ËææÊ≠£Á°ÆÁöÑÂ∫îÁî®Á®ãÂ∫èÈó®ÁâåÂè∑">Á´ØÂè£ ÔºöÁ°Æ‰øùÊï∞ÊçÆÂà∞ËææÊ≠£Á°ÆÁöÑ&quot;Â∫îÁî®Á®ãÂ∫èÈó®ÁâåÂè∑&quot;</a></li>
      </ol>
    </li>
    <li><a href="#linux-Â•óÊé•Â≠óÁºñÁ®ã">Linux Â•óÊé•Â≠óÁºñÁ®ã</a>
      <ol>
        <li><a href="#Â•óÊé•Â≠óÊòØ‰ªÄ‰πà">Â•óÊé•Â≠óÊòØ‰ªÄ‰πà</a></li>
        <li><a href="#Â•óÊé•Â≠óÁ±ªÂûã">Â•óÊé•Â≠óÁ±ªÂûã</a></li>
        <li><a href="#Â•óÊé•Â≠óÂ∏∏Áî®-api">Â•óÊé•Â≠óÂ∏∏Áî® API</a></li>
        <li><a href="#Â•óÊé•Â≠óÂú∞ÂùÄÁªìÊûÑ‰ª•ÂèäÂú∞ÂùÄËΩ¨Êç¢-api">Â•óÊé•Â≠óÂú∞ÂùÄÁªìÊûÑ‰ª•ÂèäÂú∞ÂùÄËΩ¨Êç¢ API</a></li>
        <li><a href="#Â≠óËäÇÂ∫èËΩ¨Êç¢-api">Â≠óËäÇÂ∫èËΩ¨Êç¢ API</a></li>
      </ol>
    </li>
    <li><a href="#linux-Â∏∏ËßÅÁöÑ-io-Ê®°Âûã">Linux Â∏∏ËßÅÁöÑ IO Ê®°Âûã</a>
      <ol>
        <li><a href="#ÈòªÂ°ûioblocking-io">ÈòªÂ°ûIOÔºàBlocking I/OÔºâ</a></li>
        <li><a href="#ÈùûÈòªÂ°ûionon-blocking-io">ÈùûÈòªÂ°ûI/OÔºàNon-blocking I/OÔºâ</a></li>
        <li><a href="#ioÂ§öË∑ØÂ§çÁî®io-multiplexing">I/OÂ§öË∑ØÂ§çÁî®ÔºàI/O MultiplexingÔºâ</a></li>
        <li><a href="#‰ø°Âè∑È©±Âä®iosignal-driven-io">‰ø°Âè∑È©±Âä®I/OÔºàSignal-driven I/OÔºâ</a></li>
        <li><a href="#ÂºÇÊ≠•ioasynchronous-io">ÂºÇÊ≠•I/OÔºàAsynchronous I/OÔºâ</a></li>
        <li><a href="#linux-ÁΩëÁªú-io-ÊÄßËÉΩ‰ºòÂåñ">Linux ÁΩëÁªú I/O ÊÄßËÉΩ‰ºòÂåñ</a></li>
      </ol>
    </li>
    <li><a href="#linux-Â∏∏ËßÅÁöÑÊúçÂä°Âô®Ê®°Âûã">Linux Â∏∏ËßÅÁöÑÊúçÂä°Âô®Ê®°Âûã</a>
      <ol>
        <li><a href="#ÂçïËøõÁ®ãÊúçÂä°Âô®‰∏ÄÂØπ‰∏ÄÊúçÂä°">ÂçïËøõÁ®ãÊúçÂä°Âô®Ôºö‰∏ÄÂØπ‰∏ÄÊúçÂä°</a></li>
        <li><a href="#Â§öËøõÁ®ãÊúçÂä°Âô®">Â§öËøõÁ®ãÊúçÂä°Âô®</a></li>
        <li><a href="#Â§öÁ∫øÁ®ãÊúçÂä°Âô®">Â§öÁ∫øÁ®ãÊúçÂä°Âô®</a></li>
        <li><a href="#Á∫øÁ®ãÊ±†Ê®°Âûã">Á∫øÁ®ãÊ±†Ê®°Âûã</a></li>
        <li><a href="#ioÂ§öË∑ØÂ§çÁî®ÊúçÂä°Âô®">I/OÂ§öË∑ØÂ§çÁî®ÊúçÂä°Âô®</a>
          <ol>
            <li><a href="#io-Â§çÁî®‰πã-select">IO Â§çÁî®‰πã Select</a></li>
            <li><a href="#io-Â§çÁî®‰πã-poll">IO Â§çÁî®‰πã Poll</a></li>
            <li><a href="#io-Â§çÁî®‰πã-epoll">IO Â§çÁî®‰πã Epoll</a></li>
          </ol>
        </li>
        <li><a href="#ÂºÇÊ≠•ioÊúçÂä°Âô®Ê®°Âûã">ÂºÇÊ≠•I/OÊúçÂä°Âô®Ê®°Âûã</a></li>
      </ol>
    </li>
    <li><a href="#ÊúçÂä°Âô®Êû∂ÊûÑÊ®°Âºè">ÊúçÂä°Âô®Êû∂ÊûÑÊ®°Âºè</a>
      <ol>
        <li><a href="#reactor-Ê®°ÂºèËØ¶Ëß£">Reactor Ê®°ÂºèËØ¶Ëß£</a></li>
        <li><a href="#reactor-Ê®°ÂºèÁöÑ‰ºòÂäøÂíåÂ∫îÁî®Âú∫ÊôØ">Reactor Ê®°ÂºèÁöÑ‰ºòÂäøÂíåÂ∫îÁî®Âú∫ÊôØ</a></li>
        <li><a href="#Â∫îÁî®Âú∫ÊôØ">Â∫îÁî®Âú∫ÊôØ</a></li>
        <li><a href="#proactor-Ê®°ÂºèËØ¶Ëß£">Proactor Ê®°ÂºèËØ¶Ëß£</a></li>
        <li><a href="#proactor-Ê®°ÂºèÁöÑ‰ºòÂäø">Proactor Ê®°ÂºèÁöÑ‰ºòÂäø</a></li>
        <li><a href="#proactor-Ê®°ÂºèÁöÑÂ∫îÁî®Âú∫ÊôØ">Proactor Ê®°ÂºèÁöÑÂ∫îÁî®Âú∫ÊôØ</a></li>
        <li><a href="#ÊÄªÁªì">ÊÄªÁªì</a></li>
      </ol>
    </li>
  </ol>
</nav>
    </div>
</section>


            
        
            
                <section class="widget tagCloud">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



    </div>
    <h2 class="widget-title section-title">ÂàÜÁ±ª</h2>

    <div class="tagCloud-tags">
        
            <a href="/categories/c&#43;&#43;/" class="font_size_17">
                C&#43;&#43;
            </a>
        
            <a href="/categories/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="font_size_10">
                Â§öÁ∫øÁ®ã
            </a>
        
            <a href="/categories/qt/" class="font_size_8">
                Qt
            </a>
        
            <a href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91/" class="font_size_7">
                Èü≥ËßÜÈ¢ë
            </a>
        
            <a href="/categories/hugo/" class="font_size_6">
                Hugo
            </a>
        
            <a href="/categories/leetcode/" class="font_size_5">
                Leetcode
            </a>
        
            <a href="/categories/linux/" class="font_size_3">
                Linux
            </a>
        
            <a href="/categories/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="font_size_3">
                ÁΩëÁªúÁºñÁ®ã
            </a>
        
            <a href="/categories/%E5%85%B6%E4%BB%96/" class="font_size_1">
                ÂÖ∂‰ªñ
            </a>
        
    </div>
</section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article ">
    
        <header class="article-header">
        <div class="article-image">
            <a href="/post/linux-network/">
                <img src="/post/linux-network/cover.png"
                        
                        width="1024" 
                        height="576" 
                        loading="lazy"
                        alt="Featured image of post „ÄêLinux„ÄëÁΩëÁªúÁºñÁ®ãÂÖ•Èó®" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/linux/" style="background-color: #F9A825; color: #fff;">
                Linux
            </a>
        
            <a href="/categories/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" style="background-color: #3E93DA; color: #fff;">
                ÁΩëÁªúÁºñÁ®ã
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/linux-network/">„ÄêLinux„ÄëÁΩëÁªúÁºñÁ®ãÂÖ•Èó®</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            ÁΩëÁªúÁºñÁ®ãÂü∫Á°ÄÁü•ËØÜ
        </h3>
        
    </div>

    
    
    
    

    
    <footer class="article-time">
        
        
        
        
            
            
        

        
        
            
            
        

        
        
            
            
        

        
        
            
            
                <div class="time-element">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                    <time>2025-04-23</time>
                </div>
            
        
            <span class="divider">|</span>
            
                <div class="time-element">
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-word"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2" /><path d="M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5" /></svg>
                    <span>21985 Â≠ó</span>
                </div>
            
        
            <span class="divider">|</span>
            
                <div class="time-element">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="2"> <path d="M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697"></path> <path d="M18 14v4h4"></path> <path d="M18 11v-4a2 2 0 0 0 -2 -2h-2"></path> <path d="M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path> <path d="M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path> <path d="M8 11h4"></path> <path d="M8 15h3"></path> </svg> 
                    <time>2025-04-26 21:56</time>
                </div>
            
        
        
        <div id="viewCount">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
            <time class="article-time--reading">
                
                <span id="vercount_value_page_pv"> </span>Ê¨°
            </time>
        </div>
    </footer>
    

    
</div>
</header>
    
    <section class="article-content">
    
    
    <h1 id="linux-ÁΩëÁªúÁºñÁ®ãÂÖ•Èó®">Linux ÁΩëÁªúÁºñÁ®ãÂÖ•Èó®
</h1><p>‰∏™‰∫∫Â≠¶‰π†Á¨îËÆ∞ÔºåÂèÇËÄÉÔºö<a class="link" href="https://www.cnblogs.com/xiaokang-coding/p/18024684"  target="_blank" rel="noopener"
    >Ê±üÂ∞èÂ∫∑</a></p>
<hr>
<h2 id="ÁΩëÁªúÈÄö‰ø°Âü∫Á°Ä">ÁΩëÁªúÈÄö‰ø°Âü∫Á°Ä
</h2><p>ÊÄùËÄÉ‰∏Ä‰∏ãÔºåÂ¶ÇÊûúËÆ°ÁÆóÊú∫ÊÉ≥Ë¶Å&quot;‰∫§ÊúãÂèã&quot;ÔºåÂÆÉ‰ª¨ÈúÄË¶ÅÊÄéÊ†∑‰∫íÁõ∏Ê≤üÈÄöÔºüÊ≠£Â¶Ç‰∫∫‰ª¨‰∫§ÊµÅÈúÄË¶Å‰ΩøÁî®ËØ≠Ë®Ä‰∏ÄÊ†∑ÔºåËÆ°ÁÆóÊú∫ÈÄö‰ø°‰πüÂøÖÈ°ªÈÅµÂÆà‰∏ÄÂ•óËßÑÂàô ‚Äî ËøôÂ∞±ÊòØ<strong>ÁΩëÁªúÂçèËÆÆ</strong>„ÄÇ</p>
<p>ÂçèËÆÆÁ°Æ‰øù‰ø°ÊÅØÂèØ‰ª•Âú®‰∏çÂêåÁöÑËÆæÂ§áÂíåÂπ≥Âè∞‰πãÈó¥Ê∏ÖÊô∞„ÄÅÂáÜÁ°ÆÂú∞‰º†ÈÄí„ÄÇË¶ÅÊ∑±ÂÖ•ÁêÜËß£ÂçèËÆÆÔºåÊàë‰ª¨È¶ñÂÖàË¶ÅÁÜüÊÇâ‰∏§‰∏™Âü∫Á°ÄÁöÑÈÄö‰ø°Ê®°ÂûãÔºöOSI Âíå TCP/IP Ê®°Âûã„ÄÇ</p>
<h2 id="osi-Ê®°ÂûãÂíå-tcpip-Ê®°Âûã">OSI Ê®°ÂûãÂíå TCP/IP Ê®°Âûã
</h2><p>Âú®ÁΩëÁªúÈÄö‰ø°ÁöÑ‰∏ñÁïåÈáåÔºåOSIÔºàÂºÄÊîæÂºèÁ≥ªÁªü‰∫íËÅîÈÄö‰ø°ÂèÇËÄÉÊ®°ÂûãÔºâÂíå TCP/IPÔºà‰º†ËæìÊéßÂà∂ÂçèËÆÆ/ÁΩëÈôÖÂçèËÆÆÔºâÊ®°ÂûãÊâÆÊºîÁùÄÂü∫Á°ÄÊ°ÜÊû∂ÁöÑËßíËâ≤„ÄÇÂÆÉ‰ª¨ÂêÑËá™ÊèèËø∞‰∫ÜÁΩëÁªúÈÄö‰ø°ÁöÑÂ§ö‰∏™Â±ÇÊ¨°ÂíåÈò∂ÊÆµÔºå‰ΩÜ‰ª•‰∏çÂêåÁöÑÊñπÂºèÊù•ÂàÜÁ±ªÂíåÂ§ÑÁêÜÊï∞ÊçÆ‰º†ËæìÁöÑÁªÜËäÇ„ÄÇ</p>
<ul>
<li>
<p><strong>OSIÊ®°Âûã</strong></p>
<p>OSIÔºàOpen Systems InterconnectionÔºâÊ®°ÂûãÊòØ‰∏Ä‰∏™Ê¶ÇÂøµÊÄßÊ°ÜÊû∂ÔºåÁî®‰∫éÊèèËø∞ÁΩëÁªú‰∏≠‰∏çÂêåÊìç‰ΩúÂ±ÇÊ¨°ÁöÑÂäüËÉΩ„ÄÇÁî±‰∏ÉÂ±ÇÁªÑÊàêÔºå‰ªéÁâ©ÁêÜÁ°¨‰ª∂ÁöÑÁîµÊ∞î‰ø°Âè∑ÔºàÁâ©ÁêÜÂ±ÇÔºâÔºåÂà∞Â∫îÁî®Â±ÇÔºàÂ¶ÇÁΩëÈ°µÊµèËßàÂô®ÔºâÔºåÊØè‰∏ÄÂ±ÇÈÉΩÊúâÂÖ∂Áã¨ÁâπÁöÑÂäüËÉΩÂíåÂçèËÆÆ„ÄÇ</p>
</li>
<li>
<p><strong>TCP/IPÊ®°Âûã</strong></p>
<p>TCP/IP Ê®°ÂûãÔºåÂàôÊõ¥Âä†Ë¥¥ËøëÂÆûÈôÖÁΩëÁªú‰∏≠ÁöÑËøê‰Ωú„ÄÇLinux ÁöÑÁΩëÁªúÂçèËÆÆÊ†àÂ∞±ÊòØÂü∫‰∫éËØ•Ê®°ÂûãÂÆûÁé∞ÁöÑ„ÄÇÂÆÉÊòØÂü∫‰∫éÂõõÂ±ÇÊû∂ÊûÑÔºåÂ∞ÜÁΩëÁªúÈÄö‰ø°ËøáÁ®ãÁÆÄÂåñÂπ∂ÈõÜ‰∏≠Âú®ÂçèËÆÆÊóè‰∏äÔºåÂ¶Ç‰º†ËæìÊéßÂà∂ÂçèËÆÆÔºàTCPÔºâÂíå‰∫íËÅîÁΩëÂçèËÆÆÔºàIPÔºâÔºåËøô‰∏§ÁßçÂçèËÆÆÊòØÁé∞‰ª£ÁΩëÁªúÈÄö‰ø°‰∏≠ÊúÄ‰∏∫Ê†∏ÂøÉÁöÑÈÉ®ÂàÜ„ÄÇ</p>
</li>
</ul>
<p>ÁÆÄÂçïÂõæÁ§∫Ôºö</p>
<p><img src="/post/linux-network/1.png"
	width="1440"
	height="700"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="205"
		data-flex-basis="493px"
	
></p>
<hr>
<h2 id="Âü∫Êú¨Ê¶ÇÂøµ">Âü∫Êú¨Ê¶ÇÂøµ
</h2><h3 id="Âú∞ÂùÄÁ∞øipÂú∞ÂùÄÂíåmacÂú∞ÂùÄ">Âú∞ÂùÄÁ∞øÔºöIPÂú∞ÂùÄÂíåMACÂú∞ÂùÄ
</h3><p>ÊÉ≥Ë±°‰∏Ä‰∏ãÔºå‰∫íËÅîÁΩëÊòØ‰∏Ä‰∏™Â∑®Â§ßÁöÑÊï∞Â≠óÂüéÂ∏ÇÔºåËÄåÊØèÂè∞ËÆ°ÁÆóÊú∫ÊàñÁΩëÁªúËÆæÂ§áÂ∞±ÂÉèÊòØ‰ΩèÂú®Ëøô‰∏™ÂüéÂ∏ÇÈáåÁöÑÂ±ÖÊ∞ë„ÄÇ</p>
<p><strong>IPÂú∞ÂùÄÔºöÊï∞Â≠ó‰∏ñÁïåÁöÑ&quot;ÂÆ∂Â∫≠‰ΩèÂùÄ&quot;</strong></p>
<p>ÊØèÂè∞ËÆæÂ§áÁöÑ IP Âú∞ÂùÄÂ∞±ÂÉèÊòØÂÆÉÂú®Ëøô‰∏™Êï∞Â≠óÂüéÂ∏ÇÈáåÁöÑÂÆ∂Â∫≠‰ΩèÂùÄ„ÄÇÂΩìËÆ°ÁÆóÊú∫ÈúÄË¶ÅÂèëÈÄÅ‰ø°ÊÅØÊàñËÆøÈóÆÁΩëÁªúËµÑÊ∫êÊó∂ÔºåÂÆÉ‰ºö‰ΩøÁî®ÁõÆÁöÑÂú∞ËÆæÂ§áÁöÑ IP Âú∞ÂùÄÊù•Á°Æ‰øù‰ø°ÊÅØÊ≠£Á°ÆÂú∞ÈÄÅËææ„ÄÇËøô‰∏™Âú∞ÂùÄÊúâÁÇπÂÉèÊòØÊàë‰ª¨Áé∞ÂÆû‰∏ñÁïå‰∏≠ÁöÑÈÇÆÂØÑÂú∞ÂùÄÔºåÂèØ‰ª•Ê†πÊçÆÁΩëÁªúÁéØÂ¢ÉÁöÑÂèòÂåñËÄåÂèòÂåñÔºà‰æãÂ¶ÇÔºåÂΩìËÆæÂ§á‰ªéÂÆ∂Â∫≠ÁΩëÁªúÁßªÂä®Âà∞ÂäûÂÖ¨ÂÆ§ÁΩëÁªúÊó∂Ôºâ„ÄÇ</p>
<p><strong>MACÂú∞ÂùÄÔºöÁΩëÁªú‰∏≠ÁöÑ&quot;Ë∫´‰ªΩËØÅ&quot;</strong></p>
<p>ÁÑ∂ÂêéÔºåÊàë‰ª¨Êúâ MAC Âú∞ÂùÄÔºåËøôÊòØÁΩëÁªúËÆæÂ§áÁöÑÂè¶‰∏Ä‰∏™ÂÖ≥ÈîÆÊ†áËØÜ„ÄÇÊØèÂè∞ËÆæÂ§áÁöÑ MAC Âú∞ÂùÄÈÉΩÊòØÁã¨‰∏ÄÊó†‰∫åÁöÑÔºåÁ±ª‰ºº‰∫éÊØè‰∏™‰∫∫ÁöÑË∫´‰ªΩËØÅÂè∑Á†Å„ÄÇÂÆÉÊòØÂú®ËÆæÂ§áÂà∂ÈÄ†Êó∂Â∞±Ë¢´ÂàÜÈÖçÁöÑÔºåÂπ∂‰∏îÂú®Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåËøô‰∏™Âú∞ÂùÄÊòØÂõ∫ÂÆö‰∏çÂèòÁöÑ„ÄÇMAC Âú∞ÂùÄÂú®Êú¨Âú∞ÁΩëÁªúÔºàÂ¶ÇÂÆ∂Â∫≠ÊàñÂäûÂÖ¨ÂÆ§ÁΩëÁªúÔºâÂÜÖËµ∑ÁùÄÈáçË¶Å‰ΩúÁî®ÔºåÂÆÉÂ∏ÆÂä©Á°Æ‰øù‰ø°ÊÅØË¢´ÂáÜÁ°ÆÂú∞ÈÄÅËææÂà∞ÁâπÂÆöËÆæÂ§áÔºåÂ∞±ÂÉèÈÇÆÈÄíÂëòÈúÄË¶ÅÁü•ÈÅìÊî∂‰ª∂‰∫∫ÁöÑËØ¶ÁªÜË∫´‰ªΩ‰ø°ÊÅØÊâçËÉΩÂ∞ÜÂåÖË£πÂáÜÁ°ÆÈÄí‰∫§„ÄÇ</p>
<p><strong>ÊÄªÁªì‰∏Ä‰∏ã</strong>Ôºöip Âú∞ÂùÄÂèØ‰ª•ËÆ©Êï∞ÊçÆÂåÖÊâæÂà∞ÁõÆÁöÑ‰∏ªÊú∫ÊâÄÂú®ÁöÑÁΩëÁªúÔºåËÄå MAC Âú∞ÂùÄÁ°Æ‰øùÊï∞ÊçÆÂåÖËÉΩÂáÜÁ°ÆÈÄÅÂà∞ÁõÆÁöÑ‰∏ªÊú∫‰∏ä„ÄÇ</p>
<h3 id="ÂØºËà™Ë∑ØÁ∫øÂ≠êÁΩëÊé©Á†ÅÂíåÁΩëÂÖ≥">ÂØºËà™Ë∑ØÁ∫øÔºöÂ≠êÁΩëÊé©Á†ÅÂíåÁΩëÂÖ≥
</h3><p><strong>Â≠êÁΩëÊé©Á†ÅÔºöÂÆö‰ΩçÁΩëÁªúÁöÑ&quot;Âå∫ÂüüÂú∞Âõæ&quot;</strong></p>
<p>Â≠êÁΩëÊé©Á†ÅÂèØ‰ª•Ë¢´ËßÜ‰∏∫ÂÆö‰ΩçÁΩëÁªúÂÜÖÈÉ®ÂíåÂ§ñÈÉ®Âú∞ÂùÄÁöÑ&quot;Âå∫ÂüüÂú∞Âõæ&quot;„ÄÇÂ∞±ÂÉèÂú®‰∏Ä‰∏™Â§ßÂüéÂ∏Ç‰∏≠Ôºå‰Ω†ÈúÄË¶ÅÁü•ÈÅìÂì™‰∫õË°óÈÅìÂ±û‰∫é‰Ω†ÁöÑÁ§æÂå∫ÔºåÂì™‰∫õÈÄöÂæÄÂüéÂ∏ÇÁöÑÂÖ∂‰ªñÈÉ®ÂàÜ„ÄÇÂ≠êÁΩëÊé©Á†ÅÂ∏ÆÂä©ËÆ°ÁÆóÊú∫Á°ÆÂÆö‰∏Ä‰∏™ IP Âú∞ÂùÄÊòØÂ±û‰∫éÊú¨Âú∞ÁΩëÁªúÔºàÂç≥Âêå‰∏Ä‰∏™Â≠êÁΩëÔºâËøòÊòØ‰Ωç‰∫éÂ§ñÈÉ®ÁΩëÁªú„ÄÇ</p>
<ul>
<li><strong>ÂÜÖÈÉ®ÂØºËà™</strong>ÔºöÂ¶ÇÊûúÁõÆÁöÑÂú∞IPÂú∞ÂùÄ‰∏éËÆ°ÁÆóÊú∫ÊâÄÂú®ÁöÑÂ≠êÁΩëÁõ∏ÂåπÈÖçÔºàÊ†πÊçÆÂ≠êÁΩëÊé©Á†ÅÂà§Êñ≠ÔºâÔºåÂàôÊï∞ÊçÆÂåÖÂú®Êú¨Âú∞ÁΩëÁªúÂÜÖ‰º†ÈÄÅ„ÄÇ</li>
<li><strong>Â§ñÈÉ®ÂØºËà™</strong>ÔºöÂ¶ÇÊûúÁõÆÁöÑÂú∞‰∏çÂú®Êú¨Âú∞Â≠êÁΩëÂÜÖÔºåËÆ°ÁÆóÊú∫Áü•ÈÅìÂÆÉÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆÂèëÈÄÅÂà∞Êõ¥ËøúÁöÑÁõÆÁöÑÂú∞„ÄÇ</li>
</ul>
<p><strong>ÁΩëÂÖ≥ÔºöÁΩëÁªúÈó¥ÁöÑ&quot;‰∏≠ËΩ¨Á´ô&quot;</strong></p>
<p>ÁΩëÂÖ≥Âú®ÁΩëÁªúÈÄö‰ø°‰∏≠ÊâÆÊºî‰∏≠ËΩ¨Á´ôÁöÑËßíËâ≤„ÄÇÂΩì‰Ω†ÁöÑÊï∞ÊçÆÂåÖÈúÄË¶Å‰ªé‰∏Ä‰∏™ÁΩëÁªúÔºàÊØîÂ¶Ç‰Ω†ÁöÑÂÆ∂Â∫≠ÁΩëÁªúÔºâÂèëÈÄÅÂà∞Âè¶‰∏Ä‰∏™ÁΩëÁªúÔºàÊØîÂ¶Ç‰Ω†ÁöÑÂ∑•‰ΩúÂú∞ÁÇπÁöÑÁΩëÁªúÔºâÊó∂ÔºåÁΩëÂÖ≥ÊòØËøô‰∏™ÊóÖÁ®ãÁöÑÁ¨¨‰∏ÄÁ´ô„ÄÇ</p>
<ul>
<li><strong>Ë∑ØÁî±ÂÜ≥Á≠ñ</strong>ÔºöÁΩëÂÖ≥Ê£ÄÊü•Êï∞ÊçÆÂåÖÁöÑÁõÆÁöÑ IP Âú∞ÂùÄÔºåÁÑ∂Âêé‰ΩøÁî®ÂÆÉÁöÑË∑ØÁî±Ë°®Êù•ÂÜ≥ÂÆöÊúÄ‰Ω≥ÁöÑË∑ØÂæÑÂ∞ÜÊï∞ÊçÆÂåÖÂèëÈÄÅÂà∞ÁõÆÊ†áÁΩëÁªú„ÄÇ</li>
</ul>
<p><strong>ÊÄªÁªìÔºö</strong> Â≠êÁΩëÊé©Á†ÅÂíåÁΩëÂÖ≥ÂÖ±ÂêåÂçè‰ΩúÔºåÂ∏ÆÂä©Êï∞ÊçÆÂåÖÂú®Â§çÊùÇÁöÑÁΩëÁªúÁªìÊûÑ‰∏≠ÊâæÂà∞ÊúÄÊúâÊïàÁöÑË∑ØÂæÑ„ÄÇÂ≠êÁΩëÊé©Á†ÅÁ°ÆÂÆöÊï∞ÊçÆÂåÖÊòØÂê¶Âú®Êú¨Âú∞ÁΩëÁªúÂÜÖÔºåËÄåÁΩëÂÖ≥ÊåáÂØºË∑®ÁΩëÁªúÁöÑÊï∞ÊçÆ‰º†Ëæì„ÄÇ</p>
<h3 id="Á´ØÂè£-Á°Æ‰øùÊï∞ÊçÆÂà∞ËææÊ≠£Á°ÆÁöÑÂ∫îÁî®Á®ãÂ∫èÈó®ÁâåÂè∑">Á´ØÂè£ ÔºöÁ°Æ‰øùÊï∞ÊçÆÂà∞ËææÊ≠£Á°ÆÁöÑ&quot;Â∫îÁî®Á®ãÂ∫èÈó®ÁâåÂè∑&quot;
</h3><p>Â•Ω‰∫ÜÔºåÁé∞Âú®Êàë‰ª¨ÁöÑÊï∞ÊçÆÂåÖÂ∑≤ÁªèÁü•ÈÅì‰∫ÜÂéªÂì™ÈáåÔºå‰ΩÜÂÆÉÂ¶Ç‰ΩïÁ°Æ‰øùË¢´Ê≠£Á°ÆÁöÑÁ®ãÂ∫èÊé•Êî∂Âë¢ÔºüËøôÂ∞±ÊòØÁ´ØÂè£ÁôªÂú∫ÁöÑÊó∂ÂÄô‰∫Ü„ÄÇÁ´ØÂè£Âè∑Â∞±ÂÉèÊòØÊî∂‰ª∂‰∫∫ÁöÑÈó®ÁâåÂè∑ÔºåÁ°Æ‰øùÊï∞ÊçÆ‰∏çÂè™ÊòØÈÄÅÂà∞‰∫ÜÊ≠£Á°ÆÁöÑÂú∞ÂùÄÔºåËÄå‰∏îË¢´Ê≠£Á°ÆÁöÑÂ∫îÁî®Á®ãÂ∫èÊé•Êî∂„ÄÇ</p>
<hr>
<h2 id="linux-Â•óÊé•Â≠óÁºñÁ®ã">Linux Â•óÊé•Â≠óÁºñÁ®ã
</h2><h3 id="Â•óÊé•Â≠óÊòØ‰ªÄ‰πà">Â•óÊé•Â≠óÊòØ‰ªÄ‰πà
</h3><p>Âú®ÁΩëÁªúÁºñÁ®ã‰∏≠Ôºå<strong>Â•óÊé•Â≠ó</strong>Â∞±ÂÉèÊòØÁΩëÁªú‰∏ñÁïåÁöÑ<strong>ÈÄö‰ø°Á´ØÂè£</strong>„ÄÇÊØè‰∏Ä‰∏™ËÅîÁΩëÁöÑÂ∫îÁî®Á®ãÂ∫èÔºå‰∏∫‰∫ÜËÉΩÂ§ü‰∫íÂèëÊ∂àÊÅØÔºåÈÉΩ‰ºö‰ΩøÁî®Âà∞ËøôÊ†∑‰∏Ä‰∏™Á´ØÂè£„ÄÇËøô‰∏™Á´ØÂè£ÂÖÅËÆ∏Êï∞ÊçÆ‰ªé‰∏Ä‰∏™Á®ãÂ∫èÊµÅÂêëÂè¶‰∏Ä‰∏™Á®ãÂ∫è„ÄÇÁÆÄËÄåË®Ä‰πãÔºåÂ•óÊé•Â≠óÊòØÂ∫îÁî®Á®ãÂ∫èÁî®Êù•Âú®ÁΩëÁªú‰∏ä‰∫§ÊµÅÁöÑÊ°•Ê¢Å„ÄÇ</p>
<p>ÊÉ≥Ë±°‰∏Ä‰∏ãÔºå‰Ω†Ë¶ÅÁî®ÊâãÊú∫ÁªôÊúãÂèãÂèë‰∏ÄÊù°‰ø°ÊÅØ„ÄÇ‰Ω†Âè™ÈúÄË¶ÅÁü•ÈÅì‰ªñ‰ª¨ÁöÑÊâãÊú∫Âè∑Á†ÅÔºåËøôÊ†∑‰ø°ÊÅØÂ∞±ÂèØ‰ª•Áõ¥Êé•ÂèëÈÄÅÂà∞‰ªñ‰ª¨ÁöÑÊâãÊú∫‰∏ä„ÄÇÂú®ÁΩëÁªúÁºñÁ®ã‰∏≠ÔºåÂ•óÊé•Â≠óÁöÑ‰ΩúÁî®Á±ª‰ºº„ÄÇÂÆÉ‰ΩøÁî®IPÂú∞ÂùÄ ÔºàÁ±ª‰ºº‰∫éÊâãÊú∫Âè∑Á†ÅÔºâ Êù•Á°ÆÂÆöÊï∞ÊçÆÂèëÈÄÅÁöÑÁõÆÊ†á‰ΩçÁΩÆÔºåËÄåÁ´ØÂè£Âè∑ÂàôÂÉèÊòØÁ°ÆÂÆö‰ø°ÊÅØÂ∫îËØ•ÈÄÅËææÂà∞ÂØπÊñπÊâãÊú∫‰∏≠ÁöÑÂì™‰∏™Â∫îÁî®Á®ãÂ∫è„ÄÇËøôÊ†∑ÔºåÂ•óÊé•Â≠óÔºà‰ΩøÁî® ip Âú∞ÂùÄÂíåÁ´ØÂè£ÔºâÁ°Æ‰øù‰∫ÜÊï∞ÊçÆËÉΩÂ§üÂáÜÁ°ÆÂú∞ÂèëÈÄÅÁªôÊ≠£Âú®ÁõëÂê¨ÈÇ£‰∏™ÁâπÂÆöÁ´ØÂè£ÁöÑÁ®ãÂ∫è„ÄÇ</p>
<p><strong>Â•óÊé•Â≠óÁöÑÂ∑•‰ΩúÂéüÁêÜ</strong>Ôºö</p>
<p>Â•óÊé•Â≠óÁöÑÂ∑•‰ΩúÂéüÁêÜÂ∞±ÂÉèÊòØÁîµËØùÈÄöËØùÁöÑËøáÁ®ã„ÄÇÈ¶ñÂÖàÔºå‰Ω†ÈúÄË¶ÅÊã®Êâì‰∏Ä‰∏™Âè∑Á†ÅÔºàÂç≥IPÂú∞ÂùÄ+Á´ØÂè£Âè∑ÔºâÊù•Âª∫Á´ãËøûÊé•„ÄÇ‰∏ÄÊó¶ËøûÊé•Âª∫Á´ãÔºåÁîµËØùÁ∫øÔºàÁΩëÁªúËøûÊé•ÔºâÂ∞±ÊøÄÊ¥ª‰∫ÜÔºå‰Ω†ÁöÑÂ£∞Èü≥ÔºàÊï∞ÊçÆÔºâÂ∞±ÂèØ‰ª•ÈÄöËøáÂÆÉ‰º†ÈÄÅ„ÄÇ</p>
<p>Âú®Ëøô‰∏™ËøáÁ®ã‰∏≠Ôºö</p>
<p><strong>Êã®Âè∑</strong>ÂØπÂ∫î‰∫éÁΩëÁªúÁºñÁ®ã‰∏≠ÁöÑ<strong>ËøûÊé•Âª∫Á´ã</strong>ÔºåËøôÊòØÈÄöËøáË∞ÉÁî®Â•óÊé•Â≠óAPIÊù•ÂÆåÊàêÁöÑÔºåÊØîÂ¶Ç connect( )ÂáΩÊï∞„ÄÇ</p>
<p><strong>ÈÄöËØù</strong>ÂØπÂ∫î‰∫é<strong>Êï∞ÊçÆ‰º†Ëæì</strong>Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøáÂ•óÊé•Â≠óÂèëÈÄÅ send( ) ÂíåÊé•Êî∂ recv( )Êï∞ÊçÆ„ÄÇ</p>
<p><strong>ÊåÇÊñ≠</strong>ÂØπÂ∫î‰∫é<strong>ÁªìÊùüËøûÊé•</strong>ÔºåÂÆåÊàêÈÄö‰ø°ÂêéÔºå‰Ω†ÈúÄË¶ÅÂÖ≥Èó≠Â•óÊé•Â≠ó close( )ÂáΩÊï∞Ôºå‰ª•ÁªìÊùü‰ºöËØùÂπ∂Ê∏ÖÁêÜËµÑÊ∫ê„ÄÇ</p>
<p>Âú®Êï¥‰∏™ÈÄö‰ø°ËøáÁ®ã‰∏≠ÔºåÂ•óÊé•Â≠ó‰øùËØÅ‰∫ÜÊï∞ÊçÆ‰ªé‰∏Ä‰∏™Á®ãÂ∫èÂáÜÁ°ÆÂú∞‰º†ÈÄÅÂà∞Âè¶‰∏Ä‰∏™Á®ãÂ∫èÔºåÊó†ËÆ∫Ëøô‰∏§‰∏™Á®ãÂ∫èÊòØÂú®Âêå‰∏ÄÂè∞ËÆ°ÁÆóÊú∫‰∏äËøòÊòØË∑®Ë∂ä‰∫ÜÂπøÈòîÁöÑ‰∫íËÅîÁΩë„ÄÇ</p>
<p>Âú® Linux ‰∏≠ÔºåÂ•óÊé•Â≠óÂÖ∂ÂÆûÂ∞±ÊòØ‰∏ÄÁ≥ªÂàóÁöÑÁºñÁ®ãÊé•Âè£ÔºåLinux Êèê‰æõ‰∫ÜÂæàÂ§öÁâπÂÆöÁöÑ API Êù•ÂàõÂª∫Âíå‰ΩøÁî®Â•óÊé•Â≠óÔºåÊé•‰∏ãÊù•ÔºåËÆ©Êàë‰ª¨Â≠¶‰π†Â¶Ç‰Ωï‰ΩøÁî® Linux Â•óÊé•Â≠ó api Êù•ÁºñÂÜôÂêÑÁßçÁΩëÁªúÊúçÂä°Á®ãÂ∫è„ÄÇ</p>
<h3 id="Â•óÊé•Â≠óÁ±ªÂûã">Â•óÊé•Â≠óÁ±ªÂûã
</h3><p>Âú® Linux ‰∏≠ÔºåÊúâ‰∏âÁßçÂ•óÊé•Â≠óÁ±ªÂûãÔºå<strong>Ââç‰∏§ÁßçÊòØÈáçÁÇπÊéåÊè°ÁöÑ</strong>ÔºåÁ¨¨‰∏âÁßç‰∫ÜËß£Âç≥ÂèØ„ÄÇ</p>
<p><strong>TCPÂ•óÊé•Â≠ó (SOCK_STREAM):</strong></p>
<ul>
<li>ËøôÊòØ‰∏ÄÁßçÂèØÈù†ÁöÑÂ•óÊé•Â≠óËøûÊé•Ôºå‰øùËØÅÊï∞ÊçÆ‰º†ËæìÁöÑÂÆåÊï¥ÊÄßÂíåÈ°∫Â∫è„ÄÇ</li>
<li>ÂøÖÈ°ªÂÖàÂª∫Á´ãËøûÊé•ÔºåÊâçËÉΩ‰º†ËæìÊï∞ÊçÆ„ÄÇ</li>
<li>Â∏∏Áî®‰∫éÈúÄË¶ÅÂáÜÁ°ÆÊï∞ÊçÆ‰º†ËæìÁöÑÂ∫îÁî®ÔºåÂ¶ÇÁΩëÈ°µÊµèËßàÂíåÊñá‰ª∂‰º†Ëæì„ÄÇ</li>
</ul>
<p><strong>UDPÂ•óÊé•Â≠ó (SOCK_DGRAM):</strong></p>
<ul>
<li>‰∏çÈúÄË¶ÅÂª∫Á´ãËøûÊé•Ôºå‰ΩÜÊòØÊï∞ÊçÆ‰º†ËæìÂèØËÉΩ‰ºö‰∏¢Â§±ÔºåÊ≤°ÊúâÂÖàÂêéÈ°∫Â∫è„ÄÇ</li>
<li>ÈÄÇÁî®‰∫éËßÜÈ¢ëÊµÅÂíåÂú®Á∫øÊ∏∏ÊàèÔºåËøô‰∫õÂ∫îÁî®ÂèØ‰ª•ÂÆπÂøç‰∏ÄÂÆöÁöÑÊï∞ÊçÆ‰∏¢Â§±„ÄÇ</li>
</ul>
<p><strong>ÂéüÂßãÂ•óÊé•Â≠ó (SOCK_RAW):</strong></p>
<ul>
<li>ÂÖÅËÆ∏Áõ¥Êé•ÂØπËæÉ‰ΩéÂ±ÇÊ¨°ÁöÑÂçèËÆÆÂ¶Ç IP Êàñ ICMP ËøõË°åËÆøÈóÆÂíåÊìç‰ΩúÔºåÂÆÉÁªïËøá‰∫Ü TCP Âíå UDP ÁöÑÂ§ÑÁêÜ„ÄÇ</li>
<li>ÂºÄÂèëËÄÖÂèØ‰ª•‰ΩøÁî®ÂéüÂßãÂ•óÊé•Â≠óÊù•ÊûÑÂª∫Ëá™ÂÆö‰πâÁöÑÂçèËÆÆÊàñÁõ¥Êé•Â§ÑÁêÜÊù•Ëá™ÁΩëÁªúÁöÑÊï∞ÊçÆÂåÖ„ÄÇ</li>
<li>ÈÄöÂ∏∏Áî®‰∫éÈúÄË¶ÅËøõË°åÁΩëÁªúËØäÊñ≠ÊàñÁΩëÁªúÂÆâÂÖ®Â∫îÁî®ÔºåÂ¶ÇËá™ÂÆö‰πâÁöÑpingÂÆûÁé∞ÔºåÊàñËÄÖÁΩëÁªúÂóÖÊé¢Âô®„ÄÇ</li>
</ul>
<p>ÈÄâÊã©Âì™ÁßçÁ±ªÂûãÂèñÂÜ≥‰∫é‰Ω†ÁöÑÂ∫îÁî®ÈúÄÊ±Ç‚ÄîÊòØÂê¶ÈúÄË¶ÅÂèØÈù†‰º†ËæìÔºàTCPÔºâÔºåËøòÊòØÈÄüÂ∫¶Êõ¥Âø´‰ΩÜÂèØËÉΩ‰∏¢Â§±Êï∞ÊçÆ‰πüÊ≤°ÂÖ≥Á≥ªÔºàUDPÔºâ„ÄÇ</p>
<p>ÈÄâÊã©‰ΩøÁî®ÂéüÂßãÂ•óÊé•Â≠óÈÄöÂ∏∏ÊÑèÂë≥ÁùÄ‰Ω†ÈúÄË¶ÅÂØπÁΩëÁªúÂçèËÆÆÊúâÊ∑±ÂÖ•ÁöÑÁêÜËß£ÔºåÂõ†‰∏∫‰Ω†Â∞ÜÁõ¥Êé•‰∏éÁΩëÁªúÂ±ÇÈù¢ÁöÑÊï∞ÊçÆ‰∫§‰∫í„ÄÇËøôÊØîÂ§ÑÁêÜ TCP Âíå UDP Â•óÊé•Â≠óÊõ¥Â§çÊùÇÔºåÈÄöÂ∏∏Âè™Âú®ÁâπÊÆäÊÉÖÂÜµ‰∏ã‰ΩøÁî®Ôºå‰æãÂ¶ÇÁΩëÁªúÂ∑•ÂÖ∑ÁöÑÂºÄÂèëÊàñÂÆöÂà∂ÂçèËÆÆÁöÑÂÆûÁé∞„ÄÇ</p>
<h3 id="Â•óÊé•Â≠óÂ∏∏Áî®-api">Â•óÊé•Â≠óÂ∏∏Áî® API
</h3><p>Êé•‰∏ãÊù•ÔºåÁúã‰∏ãÂ∏∏Áî®ÁöÑÂ•óÊé•Â≠ó APIÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">socket</span><span class="p">()</span>                    <span class="o">:</span> <span class="err">ÂàõÂª∫Â•óÊé•Â≠ó</span>
</span></span><span class="line"><span class="cl"><span class="n">bind</span><span class="p">()</span>                      <span class="o">:</span> <span class="err">ÁªëÂÆöÂ•óÊé•Â≠óÂà∞Êú¨Âú∞Âú∞ÂùÄ</span>
</span></span><span class="line"><span class="cl"><span class="n">listen</span><span class="p">()</span>                    <span class="o">:</span> <span class="err">ÁõëÂê¨ÁΩëÁªúËøûÊé•</span>
</span></span><span class="line"><span class="cl"><span class="n">accept</span><span class="p">()</span>                    <span class="o">:</span> <span class="err">Êé•ÂèóÁΩëÁªúËøûÊé•</span>
</span></span><span class="line"><span class="cl"><span class="n">connect</span><span class="p">()</span>                   <span class="o">:</span> <span class="err">ËøûÊé•Âà∞ËøúÁ®ã‰∏ªÊú∫</span>
</span></span><span class="line"><span class="cl"><span class="n">send</span><span class="p">(),</span> <span class="n">recv</span><span class="p">()</span>              <span class="o">:</span> <span class="err">ÂèëÈÄÅÂíåÊé•Êî∂Êï∞ÊçÆÔºàÈù¢ÂêëËøûÊé•ÁöÑÂ•óÊé•Â≠óÔºâ</span>
</span></span><span class="line"><span class="cl"><span class="n">sendto</span><span class="p">(),</span> <span class="n">recvfrom</span><span class="p">()</span>        <span class="o">:</span> <span class="err">ÂèëÈÄÅÂíåÊé•Êî∂Êï∞ÊçÆÔºàÊó†ËøûÊé•ÁöÑÂ•óÊé•Â≠óÔºâ</span>
</span></span><span class="line"><span class="cl"><span class="n">close</span><span class="p">()</span> <span class="p">,</span><span class="n">shutdown</span><span class="p">()</span>         <span class="o">:</span> <span class="err">ÂÖ≥Èó≠Â•óÊé•Â≠ó</span>
</span></span><span class="line"><span class="cl"><span class="n">getsockopt</span><span class="p">(),</span> <span class="n">setsockopt</span><span class="p">()</span>  <span class="o">:</span> <span class="err">Ëé∑ÂèñÂíåËÆæÁΩÆÂ•óÊé•Â≠óÈÄâÈ°π</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Â•óÊé•Â≠óÂú∞ÂùÄÁªìÊûÑ‰ª•ÂèäÂú∞ÂùÄËΩ¨Êç¢-api">Â•óÊé•Â≠óÂú∞ÂùÄÁªìÊûÑ‰ª•ÂèäÂú∞ÂùÄËΩ¨Êç¢ API
</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">sockaddr ÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÂ•óÊé•Â≠óÂú∞ÂùÄÁªìÊûÑÔºåÂÆÉÈÄöÂ∏∏‰∏éÁâπÂÆöÁöÑÂú∞ÂùÄÊóèÁªìÊûÑÔºàÂ¶Ç sockaddr_in Ôºâ‰∏ÄËµ∑‰ΩøÁî®„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm"> ËøôÊòØÂõ†‰∏∫Â§öÊï∞Â•óÊé•Â≠óÂáΩÊï∞ÔºåÂ¶Ç bind(), connect(), Âíå accept()ÔºåÈúÄË¶Å‰ΩøÁî®ÊåáÂêë sockaddr ÁªìÊûÑÁöÑÊåáÈíàÁöÑÂèÇÊï∞„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">sockaddr</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">sa_family_t</span>     <span class="n">sa_family</span><span class="p">;</span>      <span class="cm">/* Address family */</span>
</span></span><span class="line"><span class="cl">   <span class="kt">char</span>            <span class="n">sa_data</span><span class="p">[];</span>      <span class="cm">/* Socket address */</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Â•óÊé•Â≠óÂú∞ÂùÄÁªìÊûÑÔºàÈÄÇÁî®‰∫éIPv4ÁΩëÁªúÈÄö‰ø°ÁöÑÂú∞ÂùÄÁªìÊûÑÔºâ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">struct</span> <span class="nc">sockaddr_in</span> 
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">sa_family_t</span>    <span class="n">sin_family</span><span class="p">;</span> <span class="err">#</span> <span class="n">address</span> <span class="nl">family</span><span class="p">:</span> <span class="n">AF_INET</span> 
</span></span><span class="line"><span class="cl">    <span class="n">in_port_t</span>      <span class="n">sin_port</span><span class="p">;</span>   <span class="err">#</span> <span class="n">port</span> <span class="n">in</span> <span class="n">network</span> <span class="n">byte</span> <span class="n">order</span> 
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">in_addr</span> <span class="n">sin_addr</span><span class="p">;</span>   <span class="err">#</span> <span class="n">ip</span> <span class="n">address</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">in_addr</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="kt">uint32_t</span>       <span class="n">s_addr</span><span class="p">;</span>    <span class="err">#</span> <span class="n">address</span> <span class="n">in</span> <span class="n">network</span> <span class="n">byte</span> <span class="n">order</span> 
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/* 
</span></span></span><span class="line"><span class="cl"><span class="cm">ÁΩëÁªúÂú∞ÂùÄËΩ¨Êç¢ÂáΩÊï∞ (Áî®‰∫éÂ∞ÜIPÂú∞ÂùÄÂú®ÂèØÊâìÂç∞ÁöÑÊ†ºÂºèÂíå‰∫åËøõÂà∂ÁªìÊûÑ‰πãÈó¥ËΩ¨Êç¢)
</span></span></span><span class="line"><span class="cl"><span class="cm">inet_pton()   
</span></span></span><span class="line"><span class="cl"><span class="cm">Â∞ÜÁÇπÂàÜÂçÅËøõÂà∂ÁöÑIPÂú∞ÂùÄÔºàÂ¶Ç&#34;192.168.1.1&#34;ÔºâËΩ¨Êç¢ÊàêÁΩëÁªúÂ≠óËäÇÈ°∫Â∫èÁöÑ‰∫åËøõÂà∂ÂΩ¢Âºè
</span></span></span><span class="line"><span class="cl"><span class="cm">inet_ntop()   
</span></span></span><span class="line"><span class="cl"><span class="cm">Â∞ÜÁΩëÁªúÂ≠óËäÇÈ°∫Â∫èÁöÑ‰∫åËøõÂà∂IPÂú∞ÂùÄËΩ¨Êç¢‰∏∫ÁÇπÂàÜÂçÅËøõÂà∂Â≠óÁ¨¶‰∏≤Ê†ºÂºè
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp"># demo Á§∫‰æã:
</span></span></span><span class="line"><span class="cl"><span class="cp">#define INET_ADDRSTRLEN 16Ôºõ
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">char</span> <span class="n">str</span><span class="p">[</span><span class="n">INET_ADDRSTRLEN</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">in_addr</span> <span class="n">ipv4addr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">inet_pton</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="s">&#34;192.168.1.1&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ipv4addr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">inet_ntop</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ipv4addr</span><span class="p">,</span> <span class="n">str</span><span class="p">,</span> <span class="n">INET_ADDRSTRLEN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="n">printf</span><span class="p">(</span><span class="s">&#34;The IPv4 address is: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">str</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Â≠óËäÇÂ∫èËΩ¨Êç¢-api">Â≠óËäÇÂ∫èËΩ¨Êç¢ API
</h3><p>Âú®ÁΩëÁªúÁºñÁ®ã‰∏≠ÔºåÂ≠óËäÇÂ∫èÔºà‰πüÁß∞‰∏∫Á´ØÂ∫èÔºâÊåáÁöÑÊòØÊï∞ÂÄºÂú®ÂÜÖÂ≠ò‰∏≠‰øùÂ≠òÁöÑÈ°∫Â∫è„ÄÇ‰∏çÂêåÁöÑËÆ°ÁÆóÊú∫‰ΩìÁ≥ªÁªìÊûÑÂèØËÉΩ‰ºöÈááÁî®‰∏çÂêåÁöÑÂ≠óËäÇÂ∫èÊù•Ë°®Á§∫Êï∞ÊçÆ„ÄÇÊúÄÂ∏∏ËßÅÁöÑ‰∏§ÁßçÂ≠óËäÇÂ∫èÊòØ<strong>Â§ßÁ´ØÂ≠óËäÇÂ∫è</strong>ÔºàBig-EndianÔºâÂíå<strong>Â∞èÁ´ØÂ≠óËäÇÂ∫è</strong>ÔºàLittle-EndianÔºâ„ÄÇÂú®ÁΩëÁªúÈÄö‰ø°‰∏≠Ôºå‰∏∫‰∫ÜÁ°Æ‰øùÊï∞ÊçÆÂú®‰∏çÂêåÁöÑÁ≥ªÁªüÈó¥Ê≠£Á°Æ‰º†ËæìÂíåËß£ÈáäÔºåÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Áªü‰∏ÄÁöÑÂ≠óËäÇÂ∫èÔºåÂç≥Ôºö<strong>ÁΩëÁªúÂ≠óËäÇÂ∫è</strong>ÔºåÂÆÉÈááÁî®<strong>Â§ßÁ´ØÂ≠óËäÇÂ∫è</strong>„ÄÇ</p>
<p>Áî±‰∫é‰∏ªÊú∫Â≠óËäÇÂ∫è‰∏éÁΩëÁªúÂ≠óËäÇÂ∫èÂèØËÉΩ‰∏çÂêåÔºåÂõ†Ê≠§Âú®ÂèëÈÄÅÊï∞ÊçÆÂâçÔºåÂèëÈÄÅÊñπÈúÄË¶ÅÂ∞ÜÂÖ∂‰∏ªÊú∫Â≠óËäÇÂ∫èÁöÑÊï∞ÂÄºËΩ¨Êç¢‰∏∫ÁΩëÁªúÂ≠óËäÇÂ∫èÔºõÊé•Êî∂ÊñπÊî∂Âà∞Êï∞ÊçÆÂêéÔºåÈúÄË¶ÅÂ∞ÜÁΩëÁªúÂ≠óËäÇÂ∫èÁöÑÊï∞ÂÄºËΩ¨Êç¢Âõû‰∏ªÊú∫Â≠óËäÇÂ∫è„ÄÇ</p>
<p>Linux Êèê‰æõ‰∫Ü‰∏ÄÁªÑ API Êù•Â§ÑÁêÜÂ≠óËäÇÂ∫èÁöÑËΩ¨Êç¢Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// Â∞ÜÊó†Á¨¶Âè∑ÈïøÊï¥ÂûãÊï∞/Êó†Á¨¶Âè∑Áü≠Êï¥ÂûãÊï∞‰ªé‰∏ªÊú∫Â≠óËäÇÈ°∫Â∫èËΩ¨Êç¢‰∏∫ÁΩëÁªúÂ≠óËäÇÈ°∫Â∫è„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">htonl</span><span class="p">()</span> <span class="err">Âíå</span> <span class="n">htons</span><span class="p">()</span>  
</span></span><span class="line"><span class="cl"><span class="c1">// Â∞Ü‰∏Ä‰∏™Êó†Á¨¶Âè∑ÈïøÊï¥ÂûãÊï∞/Êó†Á¨¶Âè∑Áü≠Êï¥ÂûãÊï∞‰ªéÁΩëÁªúÂ≠óËäÇÈ°∫Â∫èËΩ¨Êç¢‰∏∫‰∏ªÊú∫Â≠óËäÇÈ°∫Â∫è„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">ntohl</span><span class="p">()</span> <span class="err">Âíå</span> <span class="n">ntohs</span><span class="p">()</span>  
</span></span></code></pre></td></tr></table>
</div>
</div><br>

<div class="notice notice-tip" >
    <div class="notice-title"></div><p>‰∏∫‰∫ÜÊñπ‰æøËÆ∞ÂøÜÔºåÂ§ßÂÆ∂ÂèØ‰ª•ËøôÊ†∑ÁêÜËß£Ôºöh ‰ª£Ë°® host(‰∏ªÊú∫)Ôºån ‰ª£Ë°® network(ÁΩëÁªú);<br>
l ‰ª£Ë°® long(ÂõõÂ≠óËäÇÔºö‰ª£Ë°®ip)Ôºås ‰ª£Ë°® shortÔºà‰∏§Â≠óËäÇÔºö‰ª£Ë°®Á´ØÂè£Ôºâ„ÄÇ<br>
‰ª• htons() ‰∏æ‰æãÔºåhost to network short Âç≥ÔºöÂ∞ÜÁ´ØÂè£‰ªé‰∏ªÊú∫Â≠óËäÇÂ∫èËΩ¨ÊàêÁΩëÁªúÂ≠óËäÇÂ∫è„ÄÇ</p></div>

<p><strong>Ê≥®ÊÑèÔºöhtonl Âíå ntohl ‰∏ÄËà¨Â§ÑÁêÜÁöÑÊòØ IP Âú∞ÂùÄÔºåËÄå htons Âíå ntohs ‰∏ÄËà¨Â§ÑÁêÜÁöÑÊòØÁ´ØÂè£„ÄÇ</strong></p>
<h2 id="linux-Â∏∏ËßÅÁöÑ-io-Ê®°Âûã">Linux Â∏∏ËßÅÁöÑ IO Ê®°Âûã
</h2><p>ÂâçÈù¢Êàë‰ª¨Â∑≤ÁªèÂ≠¶‰π†‰∫Ü Linux Âü∫Á°ÄÁöÑ socket APIÔºåËøôÊ†∑Êàë‰ª¨‰æøÂèØ‰ª•ÁºñÂÜôÁÆÄÂçïÁöÑÁΩëÁªúÊúçÂä°Á®ãÂ∫è„ÄÇ‰ΩÜÁé∞Âú®ÔºåÊàë‰ª¨Èù¢‰∏¥‰∏Ä‰∏™Êñ∞ÊåëÊàòÔºöÂ¶Ç‰ΩïÂà©Áî®ÊúâÈôêÁöÑÊúçÂä°Âô®ËµÑÊ∫êÔºåÊù•ÂêåÊó∂È´òÊïàÂ§ÑÁêÜÂ§ßÈáèÁöÑÂπ∂ÂèëËØ∑Ê±ÇÂë¢Ôºü</p>
<p>‰º†ÁªüÁöÑÂçïÁ∫øÁ®ãÂ§ÑÁêÜÊñπÂºèÂú®Áé∞‰ª£ÁΩëÁªúÊúçÂä°‰∏≠Â∑≤‰∏çÂêàÊó∂ÂÆúÔºåÂõ†‰∏∫ÂÆÉÊó†Ê≥ïÂêåÊó∂Â§ÑÁêÜÂ§ö‰∏™ËØ∑Ê±ÇÔºåÂØºËá¥ÊïàÁéá‰Ωé‰∏ã„ÄÇ‰∏∫‰∫ÜÁ™ÅÁ†¥Ëøô‰∏ÄÈôêÂà∂ÔºåÊàë‰ª¨ÈúÄÊé¢Á©∂ Linux Êèê‰æõÁöÑÂêÑÁßç I/O Ê®°Âûã„ÄÇËøô‰∫õÊ®°ÂûãÊèê‰æõ‰∫Ü‰ªéÈòªÂ°ûÂà∞ÈùûÈòªÂ°ûÔºå‰ªéÂ§öË∑ØÂ§çÁî®Âà∞ÂÆåÂÖ®ÂºÇÊ≠•ÁöÑ‰∏çÂêåËß£ÂÜ≥ÊñπÊ°àÔºå‰ª•ÈÄÇÂ∫îÂêÑÁßçÁΩëÁªúÂ∫îÁî®Âú∫ÊôØÔºåÁ°Æ‰øùÊúçÂä°Âô®Âú®Èù¢ÂØπÂ§ßÈáèËØ∑Ê±ÇÊó∂‰πüËÉΩ‰øùÊåÅÈ´òÊïàËøêË°å„ÄÇ</p>
<p><strong>Âú®ËÆ®ËÆ∫Ëøô‰∫õ IO Ê®°Âûã‰πãÂâçÔºåÊàë‰ª¨ÂÖàÁÆÄÂçïÂõûÈ°æ‰∏Ä‰∏ã I/O ÊòØ‰ªÄ‰πà</strong>Ôºö</p>
<p>Âú®ËÆ°ÁÆóÊú∫‰∏≠Ôºå&ldquo;I/O&quot;Â∞±ÊòØËæìÂÖ•ÂíåËæìÂá∫ÁöÑÁÆÄÁß∞ÔºåÂÆÉÊèèËø∞‰∫ÜÊï∞ÊçÆÂú®ËÆ°ÁÆóÊú∫Á≥ªÁªüÂíåÂ§ñÈÉ®‰∏ñÁïå‰πãÈó¥ÁöÑÊµÅÂä®„ÄÇÂÖ∑‰ΩìÊù•ËØ¥Ôºö</p>
<ul>
<li>
<p><strong>ËæìÂÖ•</strong>ÔºöÊï∞ÊçÆËøõÂÖ•ËÆ°ÁÆóÊú∫ÔºåÊØîÂ¶Ç‰Ω†Âú®ÈîÆÁõò‰∏äÊï≤ÂáªÂ≠óÊØçÊó∂ÔºåÂ≠óÊØçË¢´ËØªÂÖ•ËÆ°ÁÆóÊú∫„ÄÇ</p>
</li>
<li>
<p><strong>ËæìÂá∫</strong>ÔºöÊï∞ÊçÆÁ¶ªÂºÄËÆ°ÁÆóÊú∫Ôºå‰æãÂ¶ÇÂ±èÂπï‰∏äÊòæÁ§∫‰ø°ÊÅØ„ÄÇ</p>
</li>
</ul>
<p>ÂΩìÊèêÂà∞ÁΩëÁªúÊó∂Ôºå&ldquo;I/O&quot;Êâ©Â±ï‰∫ÜÂê´‰πâÔºö</p>
<ul>
<li>
<p><strong>ÁΩëÁªúËæìÂÖ•</strong>Ôºö‰ªéÂ§ñÈÉ®ÁΩëÁªúÊé•Êî∂Êï∞ÊçÆÂà∞‰Ω†ÁöÑÊú¨Âú∞ËÆ°ÁÆóÊú∫ÔºåÂ¶ÇÈÄöËøáÁΩëÁªú‰∏ãËΩΩÊñá‰ª∂Âà∞‰Ω†ÁöÑËÆ°ÁÆóÊú∫„ÄÇ</p>
</li>
<li>
<p><strong>ÁΩëÁªúËæìÂá∫</strong>ÔºöËøôÊòØÊåáÂ∞ÜÊï∞ÊçÆ‰ªé‰Ω†ÁöÑÊú¨Âú∞ËÆ°ÁÆóÊú∫ÂèëÈÄÅÂà∞Â§ñÈÉ®ÁΩëÁªúÔºåÊØîÂ¶ÇÈÄöËøáËÆ°ÁÆóÊú∫ÂèëÈÄÅÊñá‰ª∂Áªô‰Ω†ÁöÑÂ•ΩÂèã„ÄÇ</p>
</li>
</ul>
<p>ÁÆÄËÄåË®Ä‰πãÔºåI/O ÊòØÊï∞ÊçÆÂú®ËÆ°ÁÆóÊú∫ÂíåÂÖ∂‰ªñËÆæÂ§áÊàñÁΩëÁªú‰πãÈó¥‰º†ÈÄíÁöÑÊñπÂºè„ÄÇ</p>
<p><strong>Áî®Êà∑ËøõÁ®ãÂ¶Ç‰ΩïËøõË°å IO Êìç‰ΩúÔºü</strong></p>
<p>ËÆ©Êàë‰ª¨ÈÄöËøá‰∏Ä‰∏™Á§∫ÊÑèÂõæÊù•Áõ¥ËßÇÂ±ïÁ§∫Áî®Êà∑ËøõÁ®ãÂ¶Ç‰Ωï‰ªéÁΩëÁªúËé∑ÂèñÊï∞ÊçÆÂπ∂Â∞ÜÂÖ∂Â≠òÂÇ®Âà∞Á£ÅÁõòÁöÑÊï¥‰∏™ËøáÁ®ãÔºö</p>
<p><img src="/post/linux-network/2.png"
	width="881"
	height="761"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="115"
		data-flex-basis="277px"
	
></p>
<p>‰ªé‰∏äÂõæÊàë‰ª¨‰πüËÉΩÂ§üÊ∏ÖÊ•öÁöÑÁúãÂà∞ÔºåËøõÁ®ãËøõË°å‰∏ÄÊ¨° I/O Êìç‰ΩúÈúÄË¶ÅÁªèËøá‰∏§‰∏™Ê≠•È™§:</p>
<p>‰ª• read ËØªÊìç‰Ωú‰∏∫‰æãÔºö</p>
<p><strong>Á¨¨‰∏ÄÊ≠•ÔºöÁ≠âÂæÖÁΩëÁªúÊï∞ÊçÆÁöÑÂà∞Êù•</strong></p>
<p>ÂΩìÁΩëÁªúÊï∞ÊçÆÂà∞ËææÊó∂ÔºåÁΩëÁªúÊé•Âè£Âç°ÔºàNICÔºâÈ¶ñÂÖàÈÄöËøáÁõ¥Êé•ÂÜÖÂ≠òËÆøÈóÆÔºàDMAÔºâÂ∞ÜÊï∞ÊçÆ‰º†ËæìÂà∞ÂÜÖÊ†∏Á©∫Èó¥ÂàÜÈÖçÁöÑ socket Êé•Êî∂ÁºìÂÜ≤Âå∫‰∏≠ÔºåÊó†ÈúÄ CPU ÂèÇ‰∏é„ÄÇ</p>
<p><strong>Á¨¨‰∫åÊ≠•ÔºöCPU Â§çÂà∂Êï∞ÊçÆËá≥Áî®Êà∑Á©∫Èó¥</strong></p>
<p>‰∏ÄÊó¶Êï∞ÊçÆÈÄöËøá DMA ‰º†ËæìÂà∞ÂÜÖÊ†∏ÁöÑ socket Êé•Êî∂ÁºìÂÜ≤Âå∫ÔºåÁî®Êà∑ËøõÁ®ãÁöÑ read Á≥ªÁªüË∞ÉÁî®‰ºöË¢´Âî§ÈÜíÔºàÂ¶ÇÊûúÂÆÉÂú®Á≠âÂæÖÊï∞ÊçÆÁöÑËØùÔºâ„ÄÇÊé•‰∏ãÊù•ÔºåCPU ‰ºö‰ªãÂÖ•ÔºåÂ∞ÜÊï∞ÊçÆ‰ªéÂÜÖÊ†∏ÁºìÂÜ≤Âå∫Â§çÂà∂Âà∞Áî®Êà∑Á©∫Èó¥Êèê‰æõÁöÑÁºìÂÜ≤Âå∫‰∏≠„ÄÇ</p>
<p>‰πüÂ∞±ÊòØËØ¥ÔºåÂú® I/O Êìç‰ΩúÁöÑËøáÁ®ã‰∏≠Ôºå<strong>Â≠òÂú®‰∏§‰∏™ÊΩúÂú®ÁöÑÁ≠âÂæÖÊó∂Èó¥ÁÇπ Ôºö‰∏Ä‰∏™ÊòØÁ≠âÂæÖÁΩëÁªúÊï∞ÊçÆÂà∞Ëææ socket Êé•Êî∂ÁºìÂÜ≤Âå∫ÔºåÂè¶‰∏Ä‰∏™ÊòØÁ≠âÂæÖ CPU Â§çÂà∂Êï∞ÊçÆËá≥Áî®Êà∑Á©∫Èó¥„ÄÇ</strong></p>
<p>‰∏∫‰∫ÜÂáèÂ∞ëËøô‰∫õÁ≠âÂæÖÊó∂Èó¥ÂØπÂ∫îÁî®Á®ãÂ∫èÊÄßËÉΩÁöÑÂΩ±ÂìçÔºåLinux Êèê‰æõ‰∫Ü‰∫îÁßç I/O Ê®°ÂûãÔºåÂÆÉ‰ª¨ÂàÜÂà´ÈíàÂØπËøô‰∏§‰∏™Ê≠•È™§ÁöÑÊïàÁéáÈóÆÈ¢òÊèê‰æõ‰∏çÂêåÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p><strong>Êé•‰∏ãÊù•ÔºåÊàë‰ª¨Â∞ÜÊ∑±ÂÖ•‰∫ÜËß£ Linux ÊîØÊåÅÁöÑ‰∫îÁßç I/O Ê®°Âûã:</strong></p>
<h3 id="ÈòªÂ°ûioblocking-io">ÈòªÂ°ûIOÔºàBlocking I/OÔºâ
</h3><p><strong>ÁÆÄÂçïÂõæÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/3.png"
	width="616"
	height="301"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="204"
		data-flex-basis="491px"
	
></p>
<p>Âú®ÈòªÂ°û I/O ‰∏≠Ôºå<strong>ËøõÁ®ãÂú®Á≠âÂæÖÁΩëÁªúÊï∞ÊçÆÂà∞ËææÂíåÂÜÖÊ†∏Â§çÂà∂Êï∞ÊçÆÂà∞Áî®Êà∑Á©∫Èó¥Ëøô‰∏§‰∏™Ê≠•È™§‰∏≠ÈÉΩÈúÄË¶ÅÁ≠âÂæÖ</strong>„ÄÇÂΩì‰∏Ä‰∏™ËøõÁ®ãÂèëËµ∑ I/O ËØ∑Ê±ÇÊó∂ÔºåÂÆÉ‰ºö‰∏ÄÁõ¥Á≠âÂæÖÁõ¥Âà∞Êï∞ÊçÆË¢´Â§çÂà∂Âà∞ÂÆÉÁöÑÂ∫îÁî®Â±ÇÁºìÂÜ≤Âå∫‰∏≠ÔºåÁÑ∂ÂêéÊâçÁªßÁª≠ÊâßË°å„ÄÇ</p>
<h3 id="ÈùûÈòªÂ°ûionon-blocking-io">ÈùûÈòªÂ°ûI/OÔºàNon-blocking I/OÔºâ
</h3><p><strong>ÁÆÄÂçïÂõæÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/4.png"
	width="621"
	height="432"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="143"
		data-flex-basis="345px"
	
></p>
<p>Âú®ÈùûÈòªÂ°û I/O Ê®°Âûã‰∏≠ÔºåÂΩìËøõÁ®ãÂ∞ùËØï‰ªé socket ËØªÂèñÊï∞ÊçÆÊó∂ÔºåÂ¶ÇÊûúÊï∞ÊçÆÂ∞öÊú™Âà∞ËææÔºåreadË∞ÉÁî®‰∏ç‰ºöÈòªÂ°ûËøõÁ®ã„ÄÇÁõ∏ÂèçÔºåÂÆÉ‰ºöÁ´ãÂç≥ËøîÂõû‰∏Ä‰∏™ EWOULDBLOCK Êàñ EAGAIN ÈîôËØØ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåËøõÁ®ã‰∏çÈúÄË¶ÅÁ≠âÂæÖÁΩëÁªúÊï∞ÊçÆÂà∞Ëææ socket Êé•Êî∂ÁºìÂÜ≤Âå∫Â∞±ÂèØ‰ª•ËøîÂõûÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°„ÄÇ</p>
<p>‰∏ÄÊó¶Êï∞ÊçÆÂà∞ËææÂπ∂Â≠òÂÇ®Âú®ÂÜÖÊ†∏ÁºìÂÜ≤Âå∫‰∏≠ÔºåËÄåÂΩìËøõÁ®ãÂ∞ùËØïÂÜçÊ¨°ËØªÂèñÔºåËøôÊ¨° read Êìç‰ΩúÂ∞ÜÊàêÂäüÔºåÂπ∂Â∞ÜÊï∞ÊçÆ‰ªéÂÜÖÊ†∏Á©∫Èó¥Â§çÂà∂Âà∞Áî®Êà∑Á©∫Èó¥Ôºå‰ΩÜËøôÈáåÁöÑÊï∞ÊçÆÂ§çÂà∂ËøáÁ®ãÊòØÈúÄË¶ÅÁ≠âÂæÖÁöÑ„ÄÇ</p>
<p><strong>ÊÄªÁªì‰∏Ä‰∏ã</strong>Ôºö<strong>Âú®ÈùûÈòªÂ°û I/O Ê®°Âûã‰∏≠ÔºåËøõÁ®ãÈúÄË¶ÅÁ≠âÂæÖ socket Êï∞ÊçÆ‰ªéÂÜÖÊ†∏Á©∫Èó¥Â§çÂà∂Âà∞Áî®Êà∑Á©∫Èó¥„ÄÇ</strong> ËÄåÂú®Á≠âÂæÖÁΩëÁªúÊï∞ÊçÆÂà∞Ëææ socket Êé•Êî∂ÁºìÂÜ≤Âå∫Ëøô‰∏™Êó∂Èó¥ÁÇπÊòØ‰∏çÈúÄË¶ÅÁ≠âÂæÖÁöÑ„ÄÇ‰ΩÜÊòØËøõÁ®ãÈúÄË¶Å‰∏çÊñ≠Âú∞&quot;ËΩÆËØ¢&quot;Êñá‰ª∂ÊèèËø∞Á¨¶ÔºåÊ£ÄÊü• socket Êé•Êî∂ÁºìÂÜ≤Âå∫ÊòØÂê¶ÊúâÊï∞ÊçÆÔºåÈ¢ëÁπÅÁöÑËΩÆËØ¢ÂèØËÉΩ‰ºöÂØºËá¥ CPU ËµÑÊ∫êÁöÑÊµ™Ë¥π„ÄÇ</p>
<h3 id="ioÂ§öË∑ØÂ§çÁî®io-multiplexing">I/OÂ§öË∑ØÂ§çÁî®ÔºàI/O MultiplexingÔºâ
</h3><p><strong>ÁÆÄÂçïÂõæÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/5.png"
	width="871"
	height="381"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="228"
		data-flex-basis="548px"
	
></p>
<p><strong>Â∑•‰ΩúÂéüÁêÜÔºö</strong></p>
<p>I/O Â§öË∑ØÂ§çÁî®ÂÖÅËÆ∏‰∏Ä‰∏™ËøõÁ®ãÊàñÁ∫øÁ®ãÂêåÊó∂ÁõëÊéßÂ§ö‰∏™ÁΩëÁªú sockets ÁöÑÁä∂ÊÄÅ„ÄÇÂÆÉÈÄöËøáÂçï‰∏™Á≥ªÁªüË∞ÉÁî®ÔºàselectÔºâÊù•Ê£ÄÊü•Â§ö‰∏™ sockets ÊòØÂê¶ÊúâÊï∞ÊçÆÂèØËØª„ÄÅÂèØÂÜôÊàñÊòØÂê¶ÊúâÂºÇÂ∏∏„ÄÇLinux Êèê‰æõ‰∫ÜÂ§öÁßç I/O Â§çÁî®ÊäÄÊúØÔºåÂåÖÊã¨‰∏äÈù¢ÊèêÂà∞ÁöÑ select„ÄÅ‰ª•Âèä poll„ÄÅepoll„ÄÇ</p>
<p><strong>ÈÇ£ I/O Â§öË∑ØÂ§çÁî®ÊòØÂ¶Ç‰ΩïÂáèÂ∞ë‰∏äËø∞ÊèêÂà∞ÁöÑ‰∏§‰∏™ÊΩúÂú®ÁöÑÁ≠âÂæÖÊó∂Èó¥ÁöÑÔºü</strong></p>
<p><strong>Á≠âÂæÖÁΩëÁªúÊï∞ÊçÆÂà∞Ëææ</strong></p>
<ul>
<li>
<p>Âú® I/O Â§öË∑ØÂ§çÁî®Ê®°Âºè‰∏ãÔºåËøõÁ®ã‰∏ç‰ºöÂú®Âçï‰∏™ socket ‰∏äÈòªÂ°ûÁ≠âÂæÖÊï∞ÊçÆÂà∞Ëææ„ÄÇÁõ∏ÂèçÔºåÂΩì‰ªª‰Ωï‰∏Ä‰∏™Ë¢´ÁõëÊéßÁöÑ socket Êé•Êî∂Âà∞Êï∞ÊçÆÔºåÁ≥ªÁªüË∞ÉÁî®ÔºàÂ¶ÇselectÔºâ‰ºöËøîÂõû„ÄÇÂΩì select ËøîÂõûÊó∂ÔºåÂÆÉÊåáÁ§∫‰∏Ä‰∏™ÊàñÂ§ö‰∏™ sockets Â∑≤Êé•Êî∂Âà∞Êï∞ÊçÆ„ÄÇËøôÊÑèÂë≥ÁùÄÊï∞ÊçÆÂ∑≤ÁªèË¢´ÁΩëÁªúÊé•Âè£Âç°ÔºàNICÔºâÈÄöËøá DMA Êìç‰Ωú‰º†ËæìÂà∞Áõ∏Â∫îÁöÑ socket Êé•Êî∂ÁºìÂÜ≤Âå∫‰∏≠„ÄÇ</p>
</li>
<li>
<p>ËøôÊ†∑ÔºåËøõÁ®ã‰∏çÂøÖÂú®ÊØè‰∏™ socket ‰∏äÂàÜÂà´Á≠âÂæÖÔºåËÄåÊòØÂú®Â§ö‰∏™sockets‰∏äÈõÜ‰∏≠Á≠âÂæÖÔºåÊèêÈ´ò‰∫ÜÊïàÁéá„ÄÇ</p>
</li>
</ul>
<p><strong>‰ΩÜÊòØÔºåÂú® I/O Â§öË∑ØÂ§çÁî®‰∏≠Ôºå select„ÄÅpoll Êàñ epoll Á≥ªÁªüË∞ÉÁî®‰æùÁÑ∂‰ºöÈòªÂ°ûÁ≠âÂæÖÁΩëÁªúÊï∞ÊçÆÁöÑÂà∞Ëææ</strong></p>
<p><strong>Á≠âÂæÖCPUÂ§çÂà∂Êï∞ÊçÆËá≥Áî®Êà∑Á©∫Èó¥</strong></p>
<p>ËøõÁ®ãÈöèÂêéÂèØ‰ª•Á´ãÂç≥ÂØπÂáÜÂ§áÂ∞±Áª™ÁöÑ socket fd ËøõË°å read Êìç‰Ωú„ÄÇÂõ†‰∏∫Êï∞ÊçÆÂ∑≤ÁªèÂú®ÂÜÖÊ†∏ÁöÑÁºìÂÜ≤Âå∫‰∏≠ÔºåCPU Âè™ÈúÄË¶ÅÂ∞ÜÊï∞ÊçÆ‰ªéÂÜÖÊ†∏Á©∫Èó¥Â§çÂà∂Âà∞Áî®Êà∑Á©∫Èó¥„ÄÇ‰ΩÜËøô‰∏™Êã∑Ë¥ùÊï∞ÊçÆÁöÑÂÆåÊàê</p>
<p>‰πüÂ∞±ÊòØËØ¥Âú® I/O Â§öË∑ØÂ§çÁî®‰∏≠Ôºå<strong>select„ÄÅpoll Êàñ epoll Á≥ªÁªüË∞ÉÁî®‰æùÁÑ∂‰ºöÈòªÂ°ûÁ≠âÂæÖÁΩëÁªúÊï∞ÊçÆÁöÑÂà∞Ëææ</strong>Ôºå‰ΩÜÊòØ‰ªñÁöÑ<strong>‰ºòÂäøÂú®‰∫éÂèØ‰ª•ÁõëÊéßÂ§ö‰∏™ sockets ÁöÑÊé•Êî∂ÁºìÂÜ≤Âå∫ÊòØÂê¶ÊúâÊï∞ÊçÆÂà∞Êù•</strong>„ÄÇÂΩìÂ§ö‰∏™ sockets ÁöÑÊé•Êî∂ÁºìÂÜ≤Âå∫ÊúâÊï∞ÊçÆÂà∞Êù•Ôºå<strong>ËøõÁ®ã‰ºö‰∏ÄÁõ¥Á≠âÂæÖ CPU Â§çÂà∂Êï∞ÊçÆËá≥Áî®Êà∑Á©∫Èó¥ÊâçËÉΩÂπ≤ÂÖ∂‰ªñ‰ªªÂä°</strong>„ÄÇ</p>
<h3 id="‰ø°Âè∑È©±Âä®iosignal-driven-io">‰ø°Âè∑È©±Âä®I/OÔºàSignal-driven I/OÔºâ
</h3><p><strong>ÁÆÄÂçïÂõæÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/6.png"
	width="951"
	height="422"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="225"
		data-flex-basis="540px"
	
></p>
<p>‰ø°Âè∑È©±Âä® I/O ‰πüÊòØÂ±û‰∫éLinux ‰∏≠ÁöÑ‰∏ÄÁßç IO Ê®°ÂûãÔºåÂÆÉÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫èÂú®‰∏çÈòªÂ°ûÁ≠âÂæÖ I/O Êìç‰ΩúÂÆåÊàêÁöÑÊÉÖÂÜµ‰∏ãÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°„ÄÇÂΩì I/O Êìç‰ΩúÔºàÂ¶ÇÊï∞ÊçÆÁöÑËØªÂèñÊàñÂÜôÂÖ•ÔºâÂáÜÂ§áÂ∞±Áª™Êó∂ÔºåÊìç‰ΩúÁ≥ªÁªü‰ºöÂêëÂ∫îÁî®Á®ãÂ∫èÂèëÈÄÅ‰∏Ä‰∏™‰ø°Âè∑ÔºåÈÄöÁü•ÂÆÉÂèØ‰ª•ÂºÄÂßãÊâßË°å I/O Êìç‰Ωú‰∫Ü„ÄÇËøôÁßçÊ®°Âºè‰∏ªË¶ÅÈÄöËøá‰ΩøÁî®‰ø°Âè∑ÔºàÂ¶Ç SIGIOÔºâÊù•ÂÆûÁé∞„ÄÇ</p>
<p><strong>‰∏§‰∏™Á≠âÂæÖÊó∂Èó¥ÁÇπÂØπ‰ø°Âè∑È©±Âä® I/O ÁöÑÂΩ±Âìç</strong> :</p>
<p><strong>Á≠âÂæÖÁΩëÁªúÊï∞ÊçÆÂà∞Ëææ</strong>ÔºöÂú®‰ø°Âè∑È©±Âä® I/O Ê®°Âûã‰∏≠ÔºåÂ∫îÁî®Á®ãÂ∫èÂú®Á≠âÂæÖÊï∞ÊçÆÂà∞ËææÊó∂<strong>‰∏çÈúÄË¶ÅÈòªÂ°ûÁ≠âÂæÖ</strong>„ÄÇÂÆÉÂèØ‰ª•ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°ÊàñÂ§Ñ‰∫é‰ºëÁú†Áä∂ÊÄÅÔºåÁõ¥Âà∞Êìç‰ΩúÁ≥ªÁªüÂèëÂá∫Êï∞ÊçÆÂ∑≤ÂáÜÂ§áÂ∞±Áª™ÁöÑ‰ø°Âè∑ÔºàÂ¶Ç SIGIOÔºâ„ÄÇ</p>
<p><strong>Á≠âÂæÖÂÜÖÊ†∏Â§çÂà∂Êï∞ÊçÆÂà∞Áî®Êà∑Á©∫Èó¥</strong>ÔºöÂΩìÂ∫îÁî®Á®ãÂ∫èÊî∂Âà∞‰ø°Âè∑Âπ∂ÂºÄÂßãÂÆûÈôÖÁöÑ I/O Êìç‰ΩúÔºàÂ¶Ç readÔºâÊó∂Ôºå<strong>ÂÆÉ‰ªçÁÑ∂ÈúÄË¶ÅÁ≠âÂæÖÊìç‰ΩúÁ≥ªÁªüÂ∞ÜÊï∞ÊçÆ‰ªéÂÜÖÊ†∏Á©∫Èó¥Â§çÂà∂Âà∞Áî®Êà∑Á©∫Èó¥</strong>„ÄÇ</p>
<p>Â∞ΩÁÆ°‰ø°Âè∑È©±Âä® I/O Êèê‰æõ‰∫Ü‰∏ÄÁßçÂºÇÊ≠•ÈÄöÁü•Êú∫Âà∂Ôºå‰ΩøÂæóÂ∫îÁî®Á®ãÂ∫èËÉΩÂ§üÂú®I/O‰∫ã‰ª∂ÂáÜÂ§áÂ•ΩÊó∂Êé•Êî∂ÈÄöÁü•Ôºå‰ΩÜÂÆÉÂú®ÂÆûË∑µ‰∏≠‰∏çÂ¶ÇÂÖ∂‰ªñÊ®°ÂûãÔºàÂ¶ÇIOÂ§çÁî®ÔºâÈÇ£‰πàÂπøÊ≥õ‰ΩøÁî®ÔºåÂéüÂõ†ÂåÖÊã¨Ôºö</p>
<ul>
<li>
<p><strong>ÁºñÁ®ãÂ§çÊùÇÊÄß</strong>Ôºö‰ΩøÁî®‰ø°Âè∑È©±Âä®I/OË¶ÅÊ±ÇÁ®ãÂ∫èÂëòÁÜüÊÇâ‰ø°Âè∑Â§ÑÁêÜÂíåÈùûÈòªÂ°ûI/OÊìç‰ΩúÔºåËøôÂ¢ûÂä†‰∫ÜÁºñÁ®ãÁöÑÂ§çÊùÇÊÄß„ÄÇ</p>
</li>
<li>
<p><strong>‰ø°Âè∑ÂêàÂπ∂Âíå‰∏¢Â§±</strong><br>
Linux ‰ø°Âè∑Â§ÑÁêÜÊú∫Âà∂ÈÄöÂ∏∏‰∏ç‰ºö‰∏∫Âêå‰∏ÄÁ±ªÂûãÁöÑ‰ø°Âè∑ÊéíÈòü„ÄÇËøôÊÑèÂë≥ÁùÄÂ¶ÇÊûúÂú®Â§ÑÁêÜ‰∏Ä‰∏™‰ø°Âè∑Êó∂Âè¶‰∏Ä‰∏™Áõ∏ÂêåÁ±ªÂûãÁöÑ‰ø°Âè∑ÂèëÁîüÔºåÂêéËÄÖÂèØËÉΩ‰∏ç‰ºöËß¶ÂèëÈ¢ùÂ§ñÁöÑ‰ø°Âè∑Â§ÑÁêÜË∞ÉÁî®ÔºåÂØºËá¥Â∫îÁî®Á®ãÂ∫èÂèØËÉΩÈîôËøá‰∏Ä‰∫õI/O‰∫ã‰ª∂ÁöÑÈÄöÁü•„ÄÇËøôÁßç‰ø°Âè∑ÁöÑÂêàÂπ∂Ë°å‰∏∫ÈôêÂà∂‰∫Ü‰ø°Âè∑È©±Âä®I/OÊ®°ÂûãÂú®È´òÂπ∂ÂèëÂú∫ÊôØ‰∏ãÂáÜÁ°ÆÂìçÂ∫îÊØè‰∏™I/O‰∫ã‰ª∂ÁöÑËÉΩÂäõ„ÄÇ</p>
</li>
<li>
<p><strong>Êõ¥Â•ΩÁöÑÊõø‰ª£ÊñπÊ°à</strong>ÔºöÂØπ‰∫éÈúÄË¶ÅÂ§ÑÁêÜÂ§ö‰∏™Âπ∂ÂèëI/OÊìç‰ΩúÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåI/OÂ§çÁî®ÔºàÁâπÂà´ÊòØepollÔºâÊèê‰æõ‰∫ÜÊõ¥È´òÁöÑÊïàÁéáÂíåÊõ¥Â•ΩÁöÑÊéßÂà∂„ÄÇepollÁâπÂà´ÈÄÇÁî®‰∫éÈ´òÂπ∂ÂèëÂú∫ÊôØÔºåÂπ∂‰∏îÁõ∏ÂØπ‰∫é‰ø°Âè∑È©±Âä®I/OÊõ¥Êòì‰∫éÁÆ°ÁêÜÂíå‰ΩøÁî®„ÄÇ</p>
</li>
</ul>
<h3 id="ÂºÇÊ≠•ioasynchronous-io">ÂºÇÊ≠•I/OÔºàAsynchronous I/OÔºâ
</h3><p><strong>ÁÆÄÂçïÂõæÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/7.png"
	width="941"
	height="442"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="212"
		data-flex-basis="510px"
	
></p>
<p>aio_read ÊòØ POSIX ÂºÇÊ≠• I/O Êé•Âè£ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂÆÉ‰∏ìÈó®Áî®‰∫éÊâßË°åÂºÇÊ≠•Êñá‰ª∂ËØªÂèñÊìç‰Ωú„ÄÇ‰∏çÂ§™ÈÄÇÁî®‰∫éÁΩëÁªú I/O „ÄÇÂõ†Ê≠§‰∏äÈù¢ÁöÑÂõæÁ§∫ÊòØÂü∫‰∫éÊñá‰ª∂ËØªÂèñÂØπÂºÇÊ≠• IO ÁöÑÂ∑•‰ΩúËøáÁ®ãËøõË°åËØ¥ÊòéÁöÑ„ÄÇ</p>
<p><strong>Â∑•‰ΩúÂéüÁêÜÔºö</strong></p>
<p>Âú®ÂºÇÊ≠• I/O Ê®°Âûã‰∏≠ÔºåÂΩìÂ∫îÁî®Á®ãÂ∫èÂèëËµ∑‰∏Ä‰∏™I/OÊìç‰ΩúÔºà‰æãÂ¶Ç aio_read ËØªÂèñÔºâÊó∂ÔºåÂÆÉ‰∏çÈúÄË¶ÅÁ≠âÂæÖÊìç‰ΩúÂÆåÊàêÂ∞±ÂèØ‰ª•ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°„ÄÇÂ∫îÁî®Á®ãÂ∫è‰ªÖ‰ªÖÊòØÂêëÊìç‰ΩúÁ≥ªÁªüÂèëÂá∫ I/O ËØ∑Ê±ÇÔºåÂπ∂‰∏îÂΩì I/O Êìç‰ΩúÁúüÊ≠£ÂÆåÊàêÊó∂ÔºåÊìç‰ΩúÁ≥ªÁªü‰ºöÈÄöÁü•Â∫îÁî®Á®ãÂ∫è„ÄÇËøôÁßçÊñπÂºèÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫èÊõ¥ÊúâÊïàÂú∞Âà©Áî® CPU Êó∂Èó¥ÔºåÂõ†‰∏∫ÂÆÉ‰∏çÈúÄË¶ÅÂú® I/O Êìç‰ΩúÂÆåÊàêÂâçÁ©∫Èó≤Á≠âÂæÖ„ÄÇ</p>
<p>ÈÇ£ÂâçÈù¢ÊèêÂà∞ÁöÑ‰∏§‰∏™ÊΩúÂú®Á≠âÂæÖÊó∂Èó¥ÂØπÂºÇÊ≠• IO ÊòØÂê¶‰ºöÊúâÂΩ±ÂìçÂë¢Ôºü</p>
<p><strong>Á≠âÂæÖÂÜÖÊ†∏ PageCache Êï∞ÊçÆÂáÜÂ§áÂ•ΩÔºö</strong></p>
<p>Âú®ÂºÇÊ≠• I/O ‰∏≠ÔºåÂ∫îÁî®Á®ãÂ∫èÂú®ÂèëÂá∫ËØªÂÜôËØ∑Ê±ÇÂêéÁ´ãÂç≥ËøîÂõûÔºå‰∏çÈúÄË¶ÅÁ≠âÂæÖÊï∞ÊçÆÂú®ÂÜÖÊ†∏‰∏≠ÂáÜÂ§áÂ•Ω„ÄÇËøôÊÑèÂë≥ÁùÄÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°ÔºåËÄåÂÜÖÊ†∏‰ºöÂºÇÊ≠•ÁöÑ‰ªéÁ£ÅÁõòËØªÂèñÊï∞ÊçÆËá≥ÂÜÖÊ†∏ÁºìÂ≠ò PageCache ‰∏≠„ÄÇ</p>
<p><strong>Ê≥®ÊÑèÔºö</strong> ‰∏äÈù¢ÊàëÊòØÈÄöËøá aio_read Á≥ªÁªüË∞ÉÁî®Êù•ËØ¥ÊòéÂºÇÊ≠• I/O ÁöÑÂ∑•‰ΩúÂéüÁêÜÁöÑÔºåaio_read ÊòØ Linux ÁöÑ POSIX ÂºÇÊ≠• I/O (AIO) Â∫ìÊèê‰æõÁöÑÊé•Âè£Ôºå‰∏ªË¶ÅËÆæËÆ°Áî®‰∫éÊñá‰ª∂ÂíåÂùóËÆæÂ§áÁöÑÂºÇÊ≠•ËØªÂÜôÊìç‰ΩúÔºåËÄå‰∏çÊîØÊåÅÁΩëÁªú I/O„ÄÇÂõ†Ê≠§ËøôÈáåÊòØÁ≠âÂæÖÂÜÖÊ†∏ÁöÑ PageCache Êï∞ÊçÆÂáÜÂ§áÂ•ΩËÄå‰∏çÊòØÁ≠âÂæÖÁΩëÁªúÊï∞ÊçÆÂáÜÂ§áÂ•ΩÔºå‰ΩÜÈÉΩÂèØ‰ª•ÂΩíÁ∫≥‰∏∫Á≠âÂæÖÊï∞ÊçÆÂáÜÂ§áÂ•Ω„ÄÇ</p>
<p><strong>Á≠âÂæÖCPUÂ§çÂà∂Êï∞ÊçÆËá≥Áî®Êà∑Á©∫Èó¥</strong>Ôºö</p>
<p>‰∏ÄÊó¶Êï∞ÊçÆÂú® pagecache ‰∏≠ÂáÜÂ§áÂ•ΩÔºåÊìç‰ΩúÁ≥ªÁªüË¥üË¥£Â∞ÜËøô‰∫õÊï∞ÊçÆ‰ªéÂÜÖÊ†∏Á©∫Èó¥Â§çÂà∂Âà∞Áî®Êà∑Á©∫Èó¥ÊåáÂÆöÁöÑÁºìÂÜ≤Âå∫„ÄÇ<strong>Ëøô‰∏™Â§çÂà∂ËøáÁ®ãÊòØÁî±ÂÜÖÊ†∏Ëá™Âä®ÊâßË°åÁöÑÔºåËÄå‰∏çÊòØÁî±Áî®Êà∑ËøõÁ®ã‰∏ªÂä®Â§çÂà∂ÁöÑ„ÄÇ</strong> Áî®Êà∑Á®ãÂ∫è‰∏çÈúÄË¶ÅÁ≠âÂæÖËøô‰∏ÄËøáÁ®ãÁöÑÂÆåÊàêÔºåÂèØ‰ª•ÁªßÁª≠ËøõË°åÂÖ∂‰ªñÂ∑•‰Ωú„ÄÇÂè™ÊúâÂú®Êï∞ÊçÆÂÆåÂÖ®Â§çÂà∂Âà∞Áî®Êà∑Á©∫Èó¥ÂêéÔºåÂ∫îÁî®Á®ãÂ∫èÊâç‰ºöÊî∂Âà∞‰∏Ä‰∏™ÂÆåÊàêÁöÑ‰ø°Âè∑ÊàñÈÄöÁü•„ÄÇËøõËÄåÂ§ÑÁêÜÊã∑Ë¥ùËá≥Áî®Êà∑Á©∫Èó¥ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p><strong>‰πüÂ∞±ÊòØËØ¥ÔºöÂú®ÂºÇÊ≠• IO ‰∏≠Ôºå‰∏çÁÆ°ÊòØÁ≠âÂæÖÊï∞ÊçÆÂáÜÂ§áÂ•ΩËøòÊòØÁ≠âÂæÖ CPU Â§çÂà∂Êï∞ÊçÆËá≥Áî®Êà∑Á©∫Èó¥ÔºåÁî®Êà∑ËøõÁ®ãÈÉΩ‰∏çÈúÄË¶ÅÁ≠âÂæÖ„ÄÇ</strong></p>
<h3 id="linux-ÁΩëÁªú-io-ÊÄßËÉΩ‰ºòÂåñ">Linux ÁΩëÁªú I/O ÊÄßËÉΩ‰ºòÂåñ
</h3><p>Âú®ÂâçÈù¢ÁöÑÈÉ®ÂàÜÔºåÊàë‰ª¨Êé¢ËÆ®‰∫Ü LinuxÁöÑ ÂêÑÁßçI/OÊ®°Âûã„ÄÇÊØèÁßçÊ®°ÂûãÈÉΩÊúâÂÖ∂Áã¨ÁâπÁöÑ‰ΩøÁî®Âú∫ÊôØÂíåÊÄßËÉΩÁâπÁÇπ„ÄÇÁâπÂà´ÊòØÂú®ÁΩëÁªúÁºñÁ®ã‰∏≠ÔºåÈÄâÊã©ÂêàÈÄÇÁöÑI/OÊ®°ÂûãÂØπ‰∫éÊèêÈ´òÊúçÂä°Âô®ÁöÑÂ§ÑÁêÜËÉΩÂäõËá≥ÂÖ≥ÈáçË¶Å„ÄÇ‰ΩÜÊòØÔºå‰ªÖ‰ªÖÈÄâÊã©ÂêàÈÄÇÁöÑI/OÊ®°ÂûãÂπ∂‰∏çË∂≥‰ª•Á°Æ‰øùÊúÄ‰Ω≥ÊÄßËÉΩ„ÄÇÂÆûÈôÖ‰∏äÔºåÁΩëÁªúI/OÊÄßËÉΩËøòÂèóÂà∞ËÆ∏Â§öÂÖ∂‰ªñÂõ†Á¥†ÁöÑÂΩ±ÂìçÔºåÊØîÂ¶Ç<strong>ÁΩëÂç°ÈÖçÁΩÆ„ÄÅÂ∏¶ÂÆΩ„ÄÅÊúçÂä°Âô®ÁöÑÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ</strong>Á≠â„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÈúÄË¶ÅËøõ‰∏ÄÊ≠•‰ºòÂåñ Linux ÁΩëÁªú I/O ÊÄßËÉΩÔºå‰ª•Á°Æ‰øùÊàë‰ª¨ÁöÑÂ∫îÁî®ÂèØ‰ª•ÂÖÖÂàÜÂà©Áî®ÊúçÂä°Âô®ËµÑÊ∫êÔºåÊèê‰æõÊõ¥Âø´„ÄÅÊõ¥ÂèØÈù†ÁöÑÊúçÂä°„ÄÇ</p>
<p><strong>ÈÇ£‰πàÔºåÂ¶Ç‰Ωï‰ºòÂåñ Linux ÁΩëÁªú I/O ÊÄßËÉΩÂë¢Ôºü</strong></p>
<p>ÁΩëÁªú I/O ÊÄßËÉΩ‰ºòÂåñ‰∏ªË¶ÅÂ∞±ÊòØ‰ªéÁ°¨‰ª∂ÂíåËΩØ‰ª∂‰∏§‰∏™ÊñπÈù¢Êù•ËøõË°åÔºö</p>
<p><strong>È¶ñÂÖàÊù•Áúã‰∏ãÁ°¨‰ª∂‰ºòÂåñÔºö</strong><br>
Á°¨‰ª∂‰ºòÂåñÊó†ÈùûÂ∞±ÊòØÊèêÂçáÊúçÂä°Âô®Á°¨‰ª∂ÊÄßËÉΩÔºåÂåÖÊã¨ CPU„ÄÅÁΩëÂç°ÈÖçÁΩÆÂçáÁ∫ß„ÄÅÂÜÖÂ≠òÈÖçÁΩÆÂçáÁ∫ßÁ≠â„ÄÇ</p>
<ul>
<li><strong>‰ΩøÁî®Â§öÊ†∏ CPU</strong> ÔºöÁ°Æ‰øùÊúçÂä°Âô®ÊúâË∂≥Â§üÁöÑCPUÊ†∏ÂøÉÊù•Â§ÑÁêÜÈ´òÁΩëÁªúË¥üËΩΩ„ÄÇ</li>
<li><strong>ÂÜÖÂ≠òÂçáÁ∫ß</strong>ÔºöÂ¢ûÂä†Ë∂≥Â§üÁöÑÂÜÖÂ≠ò‰ª•ÊîØÊåÅÈ´òÈÄüÁΩëÁªúÊìç‰ΩúÔºåÁâπÂà´ÊòØÂØπ‰∫éÈúÄË¶ÅÂ§ßÈáèÂÜÖÂ≠òÁºìÂ≠òÁöÑÂ∫îÁî®„ÄÇ</li>
<li><strong>ÁΩëÁªúÊé•Âè£Âç°</strong>ÔºöÂçáÁ∫ßNICÔºö‰ΩøÁî®Êõ¥È´òÈÄüÁéáÁöÑNICÔºå‰æãÂ¶Ç‰ªé1GbpsÂçáÁ∫ßÂà∞10GbpsÊàñÊõ¥È´ò„ÄÇ<br>
ÊàñËÄÖ‰ΩøÁî® NIC Â§öÈòüÂàóÔºàMulti-queueÔºâÔºö‰ΩøÁî®ÊîØÊåÅÂ§öÈòüÂàóÁöÑNICÔºå‰ª•‰æøÂàÜÊï£Â§ÑÁêÜË¥üËΩΩÂà∞Â§ö‰∏™CPUÊ†∏ÂøÉ„ÄÇ</li>
</ul>
<p><strong>Êé•‰∏ãÊù•Êù•Áúã‰∏ãËΩØ‰ª∂‰ºòÂåñÔºö</strong></p>
<p><strong>1.È¶ñÂÖàÊù•Áúã‰∏ãÂ∫îÁî®Á®ãÂ∫èËÆæËÆ°ÔºåÂ∫îÁî®Á®ãÂ∫èÊú¨Ë∫´ÁöÑËÆæËÆ°ÂØπÁΩëÁªú I/O ÊÄßËÉΩÊúâÁùÄÈáçÂ§ßÂΩ±ÂìçÔºö</strong></p>
<ul>
<li>
<p><strong>ÈÄâÊã©ÂêàÈÄÇÁöÑ I/O Ê®°Âûã</strong>Ôºö<br>
ÈÄâÊã©ÂêàÈÄÇÁöÑ I/O Ê®°ÂûãÔºåÊ†πÊçÆÂ∫îÁî®ÁöÑÁâπÁÇπÂíåÈúÄÊ±ÇÈÄâÊã©ÂêàÈÄÇÁöÑ I/O Ê®°Âûã„ÄÇÂØπ‰∫éÈ´òÂπ∂ÂèëÁöÑÁΩëÁªúÊúçÂä°ÔºåI/O Â§öË∑ØÂ§çÁî®ÔºàÂ¶Ç epoll„ÄÅkqueueÔºâÈÄöÂ∏∏ÊòØÊúÄ‰Ω≥ÈÄâÊã©„ÄÇÂÆÉ‰ª¨ÂÖÅËÆ∏Âçï‰∏™Á∫øÁ®ãÈ´òÊïàÂú∞ÁõëÊéßÂíåÂ§ÑÁêÜÂ§ö‰∏™ÁΩëÁªúËøûÊé•ÔºåÂáèÂ∞ë‰∫ÜÁ∫øÁ®ãÂàáÊç¢ÁöÑÂºÄÈîÄ„ÄÇËÄåÂØπ‰∫é I/O ÂØÜÈõÜÂûãÁöÑÂ∫îÁî®ÔºåÂºÇÊ≠• I/OÊ®°ÂûãÂèØËÉΩ‰ºöÊõ¥È´òÊïàÔºåÂºÇÊ≠• I/O ÔºàÂ¶Ç io_uring„ÄÅlibaioÔºâÊèê‰æõ‰∫Ü‰∏ÄÁßç‰∏çÈòªÂ°ûÂ∫îÁî®Á®ãÂ∫è‰∏ªÈÄªËæëÁöÑÊñπÂºèÊù•Â§ÑÁêÜ I/O ËØ∑Ê±Ç„ÄÇËøôÁßçÊ®°ÂûãÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫èÂú® I/O ËØ∑Ê±ÇÊ≠£Âú®Â§ÑÁêÜÊó∂ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°„ÄÇ</p>
</li>
<li>
<p><strong>‰ΩøÁî®Èõ∂Êã∑Ë¥ùÊäÄÊúØ</strong>Ôºö<br>
‰º†ÁªüÁöÑÊï∞ÊçÆ‰º†ËæìËøáÁ®ãÊ∂âÂèäÂ§öÊ¨°Êï∞ÊçÆÊã∑Ë¥ùÔºåÂåÖÊã¨‰ªéÂÜÖÊ†∏ÁºìÂÜ≤Âå∫Âà∞Áî®Êà∑ÁºìÂÜ≤Âå∫„ÄÇÈõ∂Êã∑Ë¥ùÊäÄÊúØÔºàÂ¶Ç sendfileÔºâÂèØ‰ª•ÂáèÂ∞ëËøô‰∫õÊã∑Ë¥ùÊìç‰ΩúÔºåÁõ¥Êé•Âú®ÂÜÖÊ†∏‰∏≠Â§ÑÁêÜÊï∞ÊçÆÔºå‰ªéËÄåÂáèÂ∞ë CPU ‰ΩøÁî®ÂíåÊèêÈ´òÊïàÁéá„ÄÇ</p>
</li>
<li>
<p><strong>ÊâπÈáèÂ§ÑÁêÜÂíåÁºìÂÜ≤</strong> : ËÅöÈõÜÊï∞ÊçÆÔºå‰ª•ÂáèÂ∞ëÁΩëÁªú‰∫§‰∫íÂíåÁ£ÅÁõòÊìç‰ΩúÁöÑÊ¨°Êï∞„ÄÇ</p>
<p><strong>a:ËÅöÈõÜÊï∞ÊçÆ</strong>ÔºöÈÄöËøáÁ¥ØÁßØÊï∞ÊçÆÂà∞Ëææ‰∏ÄÂÆöÈáèÂêéÂÜçËøõË°åÂ§ÑÁêÜÔºåËÄå‰∏çÊòØÊØèÊ¨°Êé•Êî∂Âà∞Êï∞ÊçÆÂ∞±Á´ãÂç≥Â§ÑÁêÜ„ÄÇ‰ª•ËØªÂèñÁΩëÁªúÊï∞ÊçÆ‰∏ãËΩΩËá≥Êú¨Âú∞Á£ÅÁõò‰∏∫‰æãÔºöÂèØ‰ª•Á≠âÂæÖÊï∞ÊçÆÁßØÁ¥ØÂà∞‰∏ÄÂÆöÈáèÁöÑÊó∂ÂÄôÂú®ÂÜôÂÖ•Á£ÅÁõòÔºåËøôÊ†∑ÂèØ‰ª•ÂáèÂ∞ëÁ£ÅÁõò I/O Ê¨°Êï∞„ÄÇ</p>
<p><strong>b.ÁºìÂÜ≤Âå∫ÁÆ°ÁêÜ</strong>ÔºöÈúÄË¶ÅÂêàÁêÜÁÆ°ÁêÜÁºìÂÜ≤Âå∫Ôºå‰ª•ÈÅøÂÖçÊ∫¢Âá∫ÔºåÂπ∂Âú®ÈÄÇÂΩìÁöÑÊó∂ÂÄôÈáçÁΩÆÊàñÊ∏ÖÁ©∫ÁºìÂÜ≤Âå∫„ÄÇ</p>
<p><strong>c.ÈÄÇÁî®Âú∫ÊôØ</strong>ÔºöËøôÁßçÊ®°ÂºèÈÄÇÂêà‰∫éÊï∞ÊçÆÈáèÂ§ß„ÄÅÊï∞ÊçÆÈ¢ëÁπÅÂà∞ËææÁöÑÂú∫ÊôØÔºåÂ¶ÇÊó•ÂøóÊî∂ÈõÜ„ÄÅÊâπÈáèÊï∞ÊçÆÂ§ÑÁêÜÁ≠â„ÄÇ</p>
</li>
<li>
<p><strong>Âπ∂ÂèëÂíåÂπ∂Ë°åÂ§ÑÁêÜ</strong>ÔºöÂà©Áî®Â§öÊ†∏Â§ÑÁêÜÂô®ÁöÑ‰ºòÂäøÔºåÈÄöËøáÂ§öÁ∫øÁ®ãÊàñÂ§öËøõÁ®ãÊù•ÊèêÈ´òÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ„ÄÇ</p>
</li>
</ul>
<p><strong>2. Êé•‰∏ãÊù•Áúã‰∏ãÂÖ≥‰∫éÊìç‰ΩúÁ≥ªÁªüÊñπÈù¢ÁöÑË∞ÉÊï¥ÔºåÊìç‰ΩúÁ≥ªÁªüÁ∫ßÂà´ÁöÑË∞ÉÊï¥ÂØπ‰∫é‰ºòÂåñÁΩëÁªú I/O ‰πüÊòØËá≥ÂÖ≥ÈáçË¶ÅÁöÑ</strong></p>
<ul>
<li>
<p><strong>Â¢ûÂä†Êñá‰ª∂ÊèèËø∞Á¨¶ÈôêÂà∂</strong>ÔºöÂØπ‰∫éÈ´òÂπ∂ÂèëÁöÑÁΩëÁªúÊúçÂä°Âô®ÔºåÊèêÈ´òÊñá‰ª∂ÊèèËø∞Á¨¶ÁöÑÈôêÂà∂ÊòØÂøÖË¶ÅÁöÑÔºå‰ª•ÈÅøÂÖçÂõ†ËææÂà∞Êñá‰ª∂ÊèèËø∞Á¨¶‰∏äÈôêËÄåÊó†Ê≥ïÊé•ÂèóÊñ∞ËøûÊé•„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøá ulimit -n ÂëΩ‰ª§Êàñ‰øÆÊîπ /etc/security/limits.conf Êñá‰ª∂Êù•Â¢ûÂä†Ëøô‰∏™ÈôêÂà∂„ÄÇ</p>
</li>
<li>
<p><strong>Ë∞ÉÊï¥ TCP ÂçèËÆÆÊ†àÂèÇÊï∞</strong>ÔºöÂ∏∏ËßÅÁöÑ TCPÂçèËÆÆÊ†àÂèÇÊï∞ÊúâÂ¶Ç‰∏ãÁöÑÂá†Á±ªÔºö</p>
<p><strong>aÔºöÁºìÂÜ≤Âå∫Â§ßÂ∞èÂíåËµÑÊ∫êÁÆ°ÁêÜ</strong>Ôºö<br>
Ëøô‰∫õÂèÇÊï∞ÊéßÂà∂ TCP ÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞èÂíåÊï¥‰Ωì TCP ÁºìÂÜ≤Âå∫ÁöÑËµÑÊ∫êÁÆ°ÁêÜÔºå‰ª•‰ºòÂåñÊï∞ÊçÆ‰º†ËæìÊÄßËÉΩÂíåÂÜÖÂ≠ò‰ΩøÁî®„ÄÇ</p>
<p><strong>tcp_rmem Âíå tcp_wmem</strong> ÔºöÂàÜÂà´ÊéßÂà∂ TCP Êé•Êî∂ÂíåÂèëÈÄÅÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞è„ÄÇ</p>
<p><strong>tcp_mem</strong> ÔºöÊéßÂà∂Êï¥‰Ωì TCP ÁºìÂÜ≤Âå∫Âú®Á≥ªÁªüËåÉÂõ¥ÂÜÖÁöÑ‰ΩøÁî®ÊÉÖÂÜµ„ÄÇ</p>
<p><strong>b: ËøûÊé•Âª∫Á´ãÂíåÁªàÊ≠¢Ôºö</strong><br>
ËøôÁ±ªÂèÇÊï∞Ê∂âÂèä TCP ËøûÊé•ÁöÑÂª∫Á´ãËøáÁ®ãÂíåËøûÊé•ÁªàÊ≠¢Êó∂ÁöÑË°å‰∏∫„ÄÇ</p>
<p><strong>tcp_syn_retries Âíå tcp_synack_retries</strong> : ÂàÜÂà´ÊéßÂà∂ TCP SYN ËøûÊé•ËØ∑Ê±ÇÂíå SYN-ACK ÂåÖÁöÑÈáçËØïÊ¨°Êï∞„ÄÇ</p>
<p><strong>tcp_fin_timeout</strong> Ôºö tcp_fin_timeout ÂèÇÊï∞ËÆæÁΩÆ‰∫Ü TCP ËøûÊé•Âú® FIN-WAIT-2 Áä∂ÊÄÅ‰∏ãÁöÑË∂ÖÊó∂Êó∂Èó¥„ÄÇËøô‰∏™ÂèÇÊï∞ÂÆö‰πâ‰∫ÜÂú®‰∏Ä‰∏™ TCP ËøûÊé•Ë¢´Êú¨Âú∞Á´ØÂÖ≥Èó≠ÂêéÔºåÁ≥ªÁªüÁ≠âÂæÖÂØπÊñπÂèëÈÄÅ FIN ÂåÖ‰ª•ÂÆåÊàêËøûÊé•ÁªàÊ≠¢ËøáÁ®ãÁöÑÊúÄÈïøÊó∂Èó¥„ÄÇÂ¶ÇÊûúÂú®Ëøô‰∏™Ë∂ÖÊó∂Êó∂Èó¥ÂÜÖÊ≤°ÊúâÊî∂Âà∞ÂØπÊñπÁöÑ FIN ÂåÖÔºåËøûÊé•Â∞ÜË¢´Âº∫Âà∂ÂÖ≥Èó≠„ÄÇ</p>
<p><strong>c :ËøûÊé•‰øùÊ¥ªÂíåÁä∂ÊÄÅÁÆ°ÁêÜÔºö</strong><br>
Ëøô‰∫õÂèÇÊï∞Áî®‰∫éÊ£ÄÊµãÂíåÁª¥ÊåÅÁ©∫Èó≤ËøûÊé•Ôºå‰ª•ÂèäÁÆ°ÁêÜËøûÊé•Áä∂ÊÄÅ„ÄÇ</p>
<p><strong>tcp_keepalive_time</strong> ÔºöËÆæÁΩÆÂú®ÂºÄÂßãÂèëÈÄÅ keepalive Êé¢Êµã‰πãÂâçÔºå‰∏Ä‰∏™ TCP ËøûÊé•ÂøÖÈ°ªÂ§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅÁöÑÊó∂Èó¥„ÄÇ</p>
<p><strong>tcp_keepalive_probes</strong> ÔºöËÆæÁΩÆÂú®Êñ≠ÂºÄËøûÊé•‰πãÂâçÔºåÊúÄÂ§öÂèëÈÄÅÂ§öÂ∞ë‰∏™ keepalive Êé¢ÊµãÂåÖ„ÄÇ</p>
<p><strong>tcp_keepalive_intvl</strong> Ôºö ËÆæÁΩÆ‰∏§‰∏™ËøûÁª≠ keepalive Êé¢ÊµãÂåÖ‰πãÈó¥ÁöÑÊó∂Èó¥Èó¥Èöî„ÄÇ</p>
<p><strong>tcp_tw_reuse</strong> : ËÆæÁΩÆÂÖÅËÆ∏Âú® TIME_WAIT Áä∂ÊÄÅÁöÑÂ•óÊé•Â≠ó‰∏äÁöÑÁ´ØÂè£Ë¢´ÈáçÊñ∞Áî®‰∫éÊñ∞ÁöÑËøûÊé•„ÄÇ</p>
<p><strong>d:ÊÄßËÉΩ‰ºòÂåñ :</strong> Ëøô‰∫õÂèÇÊï∞Áî®‰∫éÊèêÂçáÁΩëÁªúÊÄßËÉΩÔºåÂáèÂ∞ëÂª∂Ëøü„ÄÇ</p>
<p><strong>tcp_nodelay</strong> : Á¶ÅÁî® Nagle ÁÆóÊ≥ïÔºåÂáèÂ∞ëÂèëÈÄÅÂ∞èÂùóÊï∞ÊçÆÁöÑÂª∂Ëøü„ÄÇÔºàNagle ÁÆóÊ≥ïÊòØ‰∏ÄÁßç‰∏∫‰∫ÜÂáèÂ∞ëÁΩëÁªú‰∏äÂ∞èÊï∞ÊçÆÂåÖÊï∞ÈáèËÄåËÆæËÆ°ÁöÑ TCP ÁâπÊÄß„ÄÇÂÆÉÈÄöËøáÁ¥ØÁßØËæÉÂ∞èÁöÑÊï∞ÊçÆÂåÖÂπ∂Â∞ÜÂÆÉ‰ª¨ÁªÑÂêàÊàêÊõ¥Â§ßÁöÑÊï∞ÊçÆÂùóÊù•ÂèëÈÄÅÔºå‰ªéËÄåÂáèÂ∞ë‰∫ÜÁΩëÁªú‰∏äÁöÑÊÄªÊï∞ÊçÆÂåÖÊï∞ÈáèÔºâ„ÄÇ</p>
<p><strong>tcp_max_syn_backlog</strong> : ËÆæÁΩÆ SYN Êé•Êî∂ÈòüÂàóÁöÑÊúÄÂ§ßÈïøÂ∫¶Ôºå‰ºòÂåñÈ´òÂπ∂ÂèëËøûÊé•ÁöÑÊé•Êî∂„ÄÇ</p>
<p>Èô§‰∫Ü SYN Êé•Êî∂ÈòüÂàóÔºåTCP ËøûÊé•ËøòÊ∂âÂèäÂà∞‰∏Ä‰∏™&quot;Â∑≤ËøûÊé•ÈòüÂàó&rdquo;Ôºà‰πüÁß∞‰∏∫ accept ÈòüÂàóÔºâÔºåËØ•ÈòüÂàóÁî®‰∫éÂ≠òÂÇ®Â∑≤ÁªèÂÆåÊàê‰∏âÊ¨°Êè°Êâã„ÄÅÁ≠âÂæÖÂ∫îÁî®Á®ãÂ∫è accept ÁöÑËøûÊé•„ÄÇ</p>
<p><strong>/proc/sys/net/core/somaxconn</strong>Ôºö ËØ•ÂèÇÊï∞ÊéßÂà∂ÁùÄÂ∑≤ËøûÊé•ÈòüÂàóÁöÑÊúÄÂ§ßÈïøÂ∫¶„ÄÇ</p>
<p><strong>Ë∞ÉÊï¥ÊñπÊ≥ï:</strong><br>
Ëøô‰∫õÂèÇÊï∞ÈÄöÂ∏∏ÈÄöËøá‰øÆÊîπ /etc/sysctl.conf Êñá‰ª∂Êàñ‰ΩøÁî® sysctl ÂëΩ‰ª§ËøõË°åË∞ÉÊï¥„ÄÇ‰æãÂ¶ÇÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sysctl -w net.ipv4.tcp_rmem=&#39;4096 87380 6291456&#39;
</span></span><span class="line"><span class="cl">sysctl -w net.ipv4.tcp_wmem=&#39;4096 16384 4194304&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Ê≥®ÊÑèÔºö</strong> Ë∞ÉÊï¥Ëøô‰∫õÂèÇÊï∞Êó∂ÔºåÂ∫îË∞®ÊÖéËÄÉËôëÁ≥ªÁªüÁöÑÊï¥‰ΩìËµÑÊ∫êÂíåÂ∫îÁî®ÁöÑÂÖ∑‰ΩìÈúÄÊ±Ç„ÄÇ‰∏çÊÅ∞ÂΩìÁöÑËÆæÁΩÆÂèØËÉΩÂØºËá¥ÊÄßËÉΩ‰∏ãÈôçÊàñÁ≥ªÁªüËµÑÊ∫êËÄóÂ∞Ω„ÄÇÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠Â∫îÁî®Êõ¥ÊîπÂâçÔºåÊúÄÂ•ΩÂú®ÊµãËØïÁéØÂ¢É‰∏≠ËøõË°åÂÖÖÂàÜÁöÑÊµãËØï„ÄÇ</p>
</li>
</ul>
<h2 id="linux-Â∏∏ËßÅÁöÑÊúçÂä°Âô®Ê®°Âûã">Linux Â∏∏ËßÅÁöÑÊúçÂä°Âô®Ê®°Âûã
</h2><p>ÊúçÂä°Âô®Ê®°ÂûãÊòØÁΩëÁªúÊúçÂä°Âô®Á®ãÂ∫èËÆæËÆ°ÁöÑÂü∫Áü≥ÔºåÂÆÉÂÜ≥ÂÆö‰∫ÜÊúçÂä°Âô®Â¶Ç‰ΩïÁÆ°ÁêÜÂ§ö‰∏™ÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ÂíåËØ∑Ê±Ç„ÄÇÊé•‰∏ãÊù•ÔºåËÆ©Êàë‰ª¨Êù•ÁúãÁúã <strong>Linux</strong> ‰∏ãÁöÑÂá†ÁßçÂ∏∏ËßÅÁöÑÊúçÂä°Âô®Ê®°ÂûãÊòØÊÄéÊ†∑Â∑•‰ΩúÁöÑÔºü</p>
<h3 id="ÂçïËøõÁ®ãÊúçÂä°Âô®‰∏ÄÂØπ‰∏ÄÊúçÂä°">ÂçïËøõÁ®ãÊúçÂä°Âô®Ôºö‰∏ÄÂØπ‰∏ÄÊúçÂä°
</h3><p>Âú®ÂçïËøõÁ®ãÊúçÂä°Âô®Ê®°Âûã‰∏≠„ÄÇÊúçÂä°Âô®‰ΩøÁî®‰∏Ä‰∏™‰∏ªËøõÁ®ãÊù•ÈÄê‰∏™Â§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇËøôÊÑèÂë≥ÁùÄÔºåÂΩìÊúçÂä°Âô®Ê≠£Âú®ÊúçÂä°‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÊó∂ÔºåÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÂøÖÈ°ªÁ≠âÂæÖÁõ¥Âà∞ÂΩìÂâçÂÆ¢Êà∑Á´ØÊúçÂä°ÁªìÊùü„ÄÇ</p>
<p><strong>ÂõæÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/8.png"
	width="640"
	height="570"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="112"
		data-flex-basis="269px"
	
></p>
<p><strong>ÂçïËøõÁ®ãÂõûÂ∞ÑÊúçÂä°Âô®Á§∫‰æã</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">server_fd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">bind</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">listen</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// The main server loop
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">newsockfd</span> <span class="o">=</span> <span class="n">accept</span><span class="p">(</span><span class="n">server_fd</span><span class="err">Ôºå</span><span class="p">...);</span>
</span></span><span class="line"><span class="cl">    <span class="n">memset</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">256</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Read and write to the connection in a loop
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">n</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">newsockfd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span> <span class="c1">// If read returns 0, the client has closed the connection
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">        <span class="c1">// printf(&#34;Client: %s\n&#34;, buffer);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">write</span><span class="p">(</span><span class="n">newsockfd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">close</span><span class="p">(</span><span class="n">newsockfd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Áº∫ÁÇπ</strong>Ôºö</p>
<ul>
<li>
<p><strong>Êó†Ê≥ïÂÆûÁé∞Âπ∂Âèë</strong>Ôºö ÂçïËøõÁ®ãÊúçÂä°Âô®Âú®‰ªª‰ΩïÊó∂ÂàªÂè™ËÉΩÂ§ÑÁêÜ‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±Ç„ÄÇËøôÊÑèÂë≥ÁùÄÂ¶ÇÊûúÊúâÂ§ö‰∏™ÂÆ¢Êà∑Á´ØÂêåÊó∂ËØ∑Ê±ÇÊúçÂä°ÔºåÈô§‰∫ÜÁ¨¨‰∏Ä‰∏™‰πãÂ§ñÁöÑÊâÄÊúâËØ∑Ê±ÇÈÉΩÂøÖÈ°ªÁ≠âÂæÖÔºåËøôÈôêÂà∂‰∫ÜÊúçÂä°Âô®ÁöÑÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõ„ÄÇ</p>
</li>
<li>
<p><strong>ÊÄßËÉΩÁì∂È¢à</strong>Ôºö Áî±‰∫éÊúçÂä°Âô®Âú®Â§ÑÁêÜÂΩìÂâçËØ∑Ê±ÇÊó∂Êó†Ê≥ïÊé•ÂèóÊñ∞ÁöÑËøûÊé•ÔºåËøô‰ºöÂØºËá¥ÊúçÂä°Âô®ÂØπÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÁöÑÂìçÂ∫îÊó∂Èó¥Âª∂ÈïøÔºåÁâπÂà´ÊòØÂú®È´òÊµÅÈáèÁöÑÊÉÖÂÜµ‰∏ãÔºåÊïàÁéá‰Ωé‰∏ã„ÄÇ</p>
</li>
<li>
<p><strong>ËµÑÊ∫êÂà©Áî®‰∏çÂÖÖÂàÜ</strong>Ôºö Âú®Â§öÊ†∏ÂøÉÂ§ÑÁêÜÂô®‰∏äÔºåÂçïËøõÁ®ãÊ®°ÂûãÊó†Ê≥ïÂÖÖÂàÜÂà©Áî®Â§öÊ†∏ÁöÑ‰ºòÂäøÔºåÂõ†‰∏∫ÂÆÉÂè™Âú®‰∏Ä‰∏™Ê†∏ÂøÉ‰∏äËøêË°åÔºåÊ≤°ÊúâÂπ∂Ë°åÂ§ÑÁêÜËÉΩÂäõ„ÄÇ</p>
</li>
</ul>
<h3 id="Â§öËøõÁ®ãÊúçÂä°Âô®">Â§öËøõÁ®ãÊúçÂä°Âô®
</h3><p>‰∫ÜËß£‰∫ÜÂçïËøõÁ®ãÊúçÂä°Âô®Ê®°ÂûãÁöÑÁº∫ÁÇπÂêéÔºåÊàë‰ª¨Ëá™ÁÑ∂‰ºöÂØªÊ±ÇÊõ¥È´òÊïàÁöÑÊñπÊ°àÊù•Â§ÑÁêÜÂ§öÂÆ¢Êà∑Á´ØÂπ∂ÂèëÁöÑÊÉÖÂÜµ„ÄÇËøôÂ∞±ÂºïÂá∫‰∫ÜÂ§öËøõÁ®ãÊúçÂä°Âô®Ê®°ÂûãÔºåÂÆÉÊòØËß£ÂÜ≥ÂçïËøõÁ®ãÊ®°ÂûãÈôêÂà∂ÁöÑÂ∏∏ËßÅÊñπÊ°à„ÄÇ</p>
<p>Âú®Â§öËøõÁ®ãÊ®°Âûã‰∏≠ÔºåÊúçÂä°Âô®‰∏∫ÊØè‰∏™Êñ∞ÁöÑÂÆ¢Êà∑Á´ØËøûÊé•ÂàõÂª∫‰∏Ä‰∏™Áã¨Á´ãÁöÑËøõÁ®ã„ÄÇËøôÂÖÅËÆ∏ÊúçÂä°Âô®ÂêåÊó∂Â§ÑÁêÜÂ§ö‰∏™ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºåÊûÅÂ§ßÂú∞ÊèêÈ´ò‰∫ÜÂπ∂ÂèëÂ§ÑÁêÜËÉΩÂäõÂíåËµÑÊ∫êÂà©Áî®Áéá„ÄÇ</p>
<p><strong>ÂõæÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/9.png"
	width="950"
	height="600"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="158"
		data-flex-basis="380px"
	
></p>
<p><strong>Â§öËøõÁ®ãÂõûÂ∞ÑÊúçÂä°Âô®Á§∫‰æã</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">server_fd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">bind</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">listen</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">new_socket</span> <span class="o">=</span><span class="n">accept</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="p">...);</span>    
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">pid</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">pid</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">close</span><span class="p">(</span><span class="n">new_socket</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="nf">if</span><span class="p">(</span><span class="n">pid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">close</span><span class="p">(</span><span class="n">server_fd</span><span class="p">);</span> <span class="c1">// Child does not need the listener
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">handle_client</span><span class="p">(</span><span class="n">new_socket</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">close</span><span class="p">(</span><span class="n">new_socket</span><span class="p">);</span> <span class="c1">// Parent does not need this socket
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">handle_client</span><span class="p">(</span><span class="kt">int</span> <span class="n">new_socket</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">bytes_read</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">bytes_read</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">new_socket</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">bytes_read</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span> <span class="c1">// Break the loop if read error or end of file
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">write</span><span class="p">(</span><span class="n">new_socket</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">bytes_read</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">close</span><span class="p">(</span><span class="n">new_socket</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Â§öËøõÁ®ãÊúçÂä°Âô®‰ºòÁÇπ</strong>Ôºö</p>
<ul>
<li>
<p><strong>Á®≥ÂÆöÊÄß</strong>: Â§öËøõÁ®ãÊúçÂä°Âô®‰∏≠ÔºåÊØè‰∏™ËøõÁ®ãÊòØÁã¨Á´ãÁöÑ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ËøõÁ®ãÂ¥©Ê∫ÉÔºåÈÄöÂ∏∏‰∏ç‰ºöÂΩ±ÂìçÂà∞ÂÖ∂‰ªñËøõÁ®ãÔºå‰ªéËÄåÊèêÈ´ò‰∫ÜÊúçÂä°Âô®ÁöÑÊï¥‰ΩìÁ®≥ÂÆöÊÄß„ÄÇ</p>
</li>
<li>
<p><strong>ÈöîÁ¶ªÊÄß</strong>: ÊØè‰∏™ËøõÁ®ãÊúâËá™Â∑±ÁöÑÂú∞ÂùÄÁ©∫Èó¥ÔºåËøôÊÑèÂë≥ÁùÄËøõÁ®ã‰πãÈó¥ÁöÑÂÜÖÂ≠òÊòØÈöîÁ¶ªÁöÑ„ÄÇËøôÊ†∑ÂèØ‰ª•Èò≤Ê≠¢Êüê‰∏™ËøõÁ®ãÁöÑÈîôËØØÊìç‰ΩúÂΩ±ÂìçÂà∞ÂÖ∂‰ªñËøõÁ®ã„ÄÇ</p>
</li>
<li>
<p><strong>Âà©Áî®Â§öÊ†∏‰ºòÂäø</strong>: Â§öËøõÁ®ãÊ®°ÂûãËÉΩÂ§üÂú®Â§öÊ†∏Â§ÑÁêÜÂô®‰∏äËøêË°åÔºåÊØè‰∏™ËøõÁ®ãÂèØ‰ª•Ë¢´Êìç‰ΩúÁ≥ªÁªüË∞ÉÂ∫¶Âà∞‰∏çÂêåÁöÑCPUÊ†∏ÂøÉ‰∏äÔºåÂÖÖÂàÜÂà©Áî®Á°¨‰ª∂ËµÑÊ∫ê„ÄÇ</p>
</li>
</ul>
<p><strong>Áº∫ÁÇπ</strong>Ôºö</p>
<ul>
<li>
<p><strong>ËµÑÊ∫êÊ∂àËÄó</strong>: ÊØè‰∏™ËøõÁ®ãÈÉΩÈúÄË¶Å‰∏ÄÂÆöÈáèÁöÑÂÜÖÂ≠òÂíåÁ≥ªÁªüËµÑÊ∫êÔºåÂ¶ÇÊûúËøõÁ®ãÊï∞ËøáÂ§öÔºå‰ºöÂç†Áî®Â§ßÈáèÁöÑÁ≥ªÁªüËµÑÊ∫êÔºåËøôÂèØËÉΩÂØºËá¥ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ‰∏ãÈôç„ÄÇ</p>
</li>
<li>
<p><strong>‰∏ä‰∏ãÊñáÂàáÊç¢ÂºÄÈîÄ</strong>: Â§öËøõÁ®ãÊÑèÂë≥ÁùÄÊìç‰ΩúÁ≥ªÁªüÈúÄË¶ÅÈ¢ëÁπÅÂú∞Âú®ËøõÁ®ã‰πãÈó¥ËøõË°å‰∏ä‰∏ãÊñáÂàáÊç¢ÔºåËøô‰∏™ËøáÁ®ãÊ∂âÂèäÂà∞‰øùÂ≠òÂíåÂä†ËΩΩÂØÑÂ≠òÂô®„ÄÅÊõ¥Êñ∞ÂêÑÁßçË°®Á≠âÊìç‰ΩúÔºå‰ºöÊ∂àËÄó‰∏ÄÂÆöÁöÑCPUÊó∂Èó¥„ÄÇ</p>
</li>
</ul>
<h3 id="Â§öÁ∫øÁ®ãÊúçÂä°Âô®">Â§öÁ∫øÁ®ãÊúçÂä°Âô®
</h3><p>ËôΩÁÑ∂Â§öËøõÁ®ãÊ®°ÂûãÊèêÈ´ò‰∫ÜÊúçÂä°Âô®ÁöÑÁ®≥ÂÆöÊÄßÂíåÈöîÁ¶ªÊÄßÔºå‰ΩÜÂÆÉ‰πüÂ∏¶Êù•‰∫Ü<strong>ËµÑÊ∫êÊ∂àËÄó„ÄÅ‰∏ä‰∏ãÊñáÂàáÊç¢ÂºÄÈîÄ</strong>Á≠âÈôêÂà∂„ÄÇÈíàÂØπÂ§öËøõÁ®ãÊ®°ÂûãÁöÑËøô‰∫õÈôêÂà∂ÔºåÂ§öÁ∫øÁ®ãÊúçÂä°Âô®Ê®°ÂûãÊèê‰æõ‰∫Ü‰∏Ä‰∏™Êõ¥‰∏∫È´òÊïàÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>Â§öÁ∫øÁ®ãÊúçÂä°Âô®Ê®°ÂûãÂú®Âêå‰∏Ä‰∏™ËøõÁ®ãÂÜÖÂàõÂª∫Â§ö‰∏™Á∫øÁ®ãÊù•Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºåÊØè‰∏™Á∫øÁ®ãËÉΩÂ§üÁã¨Á´ãÊâßË°åÔºå<strong>ÂÆÉ‰ª¨ÂÖ±‰∫´ËøõÁ®ãÁöÑËµÑÊ∫êÔºåÂ¶ÇÂÜÖÂ≠òÁ©∫Èó¥Á≠âËµÑÊ∫ê„ÄÇËÄå‰∏î‰∏ä‰∏ãÊñáÂàáÊç¢‰πüÊõ¥Âø´„ÄÇ</strong></p>
<p><strong>ÂõæÁ§∫</strong>Ôºö<br>
<img src="/post/linux-network/10.png"
	width="950"
	height="580"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="163"
		data-flex-basis="393px"
	
></p>
<p><strong>Â§öÁ∫øÁ®ãÂõûÂ∞ÑÊúçÂä°Âô®ÁöÑÁ§∫‰æã</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">server_fd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="n">bind</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="p">...);</span>
</span></span><span class="line"><span class="cl"><span class="n">listen</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="p">...);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">new_socket</span> <span class="o">=</span> <span class="n">accept</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="p">...);</span>
</span></span><span class="line"><span class="cl">    <span class="n">pthread_t</span> <span class="n">thread_id</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">pthread_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">thread_id</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">handle_client</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">new_socket</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Handle error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span><span class="o">*</span> <span class="nf">handle_client</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span> <span class="n">socket</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">new_socket</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">socket</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">bytes_read</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">bytes_read</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">new_socket</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">bytes_read</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span> <span class="c1">// Break the loop if read error or end of file
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="n">write</span><span class="p">(</span><span class="n">new_socket</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">bytes_read</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">close</span><span class="p">(</span><span class="n">new_socket</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">pthread_exit</span><span class="p">(</span><span class="nb">NULL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Â§öÁ∫øÁ®ãÊúçÂä°Âô®‰ºòÁº∫ÁÇπ</strong>Ôºö</p>
<ul>
<li><strong>ËµÑÊ∫êÊïàÁéá</strong>: Á∫øÁ®ãÂÖ±‰∫´ËøõÁ®ãÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÁõ∏ËæÉ‰∫éÂ§öËøõÁ®ãÊ®°ÂûãÔºåÂ§öÁ∫øÁ®ãÊúçÂä°Âô®Âú®ÂÜÖÂ≠òÂíåËµÑÊ∫ê‰∏äÁöÑÂºÄÈîÄÊõ¥Â∞è„ÄÇ</li>
<li><strong>‰∏ä‰∏ãÊñáÂàáÊç¢ÊïàÁéá</strong>: Á∫øÁ®ãÈó¥ÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÊØîËøõÁ®ãÈó¥ÁöÑÂàáÊç¢Ë¶ÅÂø´ÔºåÂõ†‰∏∫Á∫øÁ®ãÂÖ±‰∫´ËÆ∏Â§öËµÑÊ∫êÔºåÂàáÊç¢Êó∂ÊâÄÈúÄÁöÑËµÑÊ∫êËæÉÂ∞ëÔºà<strong>Á∫øÁ®ãÂàáÊç¢‰∏ÄËà¨Âè™ÈúÄË¶ÅÂàáÊç¢ÂêÑËá™ÂØÑÂ≠òÂô®ÂíåÊ†à‰∏äÁöÑÊï∞ÊçÆ</strong>Ôºâ„ÄÇ</li>
<li><strong>Âà©Áî®Â§öÊ†∏‰ºòÂäø</strong>: Á∫øÁ®ãÂèØ‰ª•ÂàÜÂ∏ÉÂú®Â§ö‰∏™ CPU Ê†∏ÂøÉ‰∏äËøêË°åÔºåËøô‰ΩøÂæóÂ§öÁ∫øÁ®ãÊúçÂä°Âô®ËÉΩÂ§üÂÖÖÂàÜÂà©Áî®Â§öÊ†∏ CPU ÁöÑËÆ°ÁÆóËÉΩÂäõ„ÄÇ</li>
</ul>
<p><strong>Áº∫ÁÇπ</strong>Ôºö</p>
<ul>
<li><strong>ÂêåÊ≠•Â§çÊùÇÊÄß</strong>: Âõ†‰∏∫Á∫øÁ®ãÂÖ±‰∫´ÂÜÖÂ≠òÂíåËµÑÊ∫êÔºåÊâÄ‰ª•ÂøÖÈ°ª‰ªîÁªÜËÆæËÆ°ÂêåÊ≠•Êú∫Âà∂Êù•ÈÅøÂÖçÁ´ûÊÄÅÊù°‰ª∂ÂíåÂÖ∂‰ªñÂπ∂ÂèëÈóÆÈ¢ò„ÄÇ</li>
<li><strong>Á®≥ÂÆöÊÄßÈ£éÈô©</strong>: ‰∏Ä‰∏™Á∫øÁ®ãÁöÑÈîôËØØÂèØËÉΩÂΩ±ÂìçÊï¥‰∏™ËøõÁ®ãÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÂÖ±‰∫´Âêå‰∏ÄÂÜÖÂ≠òÁ©∫Èó¥„ÄÇËøôÂèØËÉΩÂØºËá¥Êï¥‰∏™ÊúçÂä°Âô®Á®ãÂ∫èÂ¥©Ê∫É„ÄÇ</li>
<li><strong>ËµÑÊ∫êÈôêÂà∂</strong>: ËôΩÁÑ∂Á∫øÁ®ãÊØîËøõÁ®ãËΩªÈáèÔºå‰ΩÜÂ§ßÈáèÁ∫øÁ®ã‰ªçÁÑ∂‰ºöÊ∂àËÄóÂ§ßÈáèÁ≥ªÁªüËµÑÊ∫êÔºåÂ∞§ÂÖ∂ÊòØÂú®È´òÂπ∂ÂèëÊÉÖÂÜµ‰∏ã„ÄÇ</li>
<li><strong>Ë∞ÉËØïÂõ∞Èöæ</strong>: Â§öÁ∫øÁ®ãÁ®ãÂ∫èÁöÑË∞ÉËØïËæÉ‰∏∫Â§çÊùÇÔºåÂ∞§ÂÖ∂ÊòØÂΩìÂá∫Áé∞‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢òÊó∂ÔºåËøô‰∫õÈóÆÈ¢òÂèØËÉΩÈöæ‰ª•ÈáçÁé∞ÂíåÂÆö‰Ωç„ÄÇ</li>
</ul>
<h3 id="Á∫øÁ®ãÊ±†Ê®°Âûã">Á∫øÁ®ãÊ±†Ê®°Âûã
</h3><p>Âú®Â§öÁ∫øÁ®ãÊúçÂä°Âô®Ê®°Âûã‰∏≠ÔºåÊØè‰∏™ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÈÉΩÁî±‰∏Ä‰∏™Êñ∞ÁöÑÁ∫øÁ®ãÊù•Â§ÑÁêÜ„ÄÇËøôÁßçÊñπÊ≥ïËôΩÁÑ∂ÊúâÊïàÔºå<strong>‰ΩÜÂú®Èù¢ÂØπÂ§ßÈáèÂπ∂ÂèëËØ∑Ê±ÇÊó∂ÔºåÈ¢ëÁπÅÂú∞ÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ã‰ºöÂØºËá¥ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ‰∏ãÈôç„ÄÇ</strong> ÁâπÂà´ÊòØÂú®ËØ∑Ê±ÇÊï∞ÈáèÂâßÂ¢ûÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ∫øÁ®ãÂàõÂª∫ÂíåÈîÄÊØÅÁöÑÂºÄÈîÄ‰ºöÂèòÂæóÊòæËëóÔºåÂêåÊó∂ËøáÂ§öÁöÑÊ¥ªË∑ÉÁ∫øÁ®ã‰πü‰ºöÁ´û‰∫âÊúâÈôêÁöÑCPUÂíåÂÜÖÂ≠òËµÑÊ∫êÔºåËøõ‰∏ÄÊ≠•ÂΩ±ÂìçÊúçÂä°ÁöÑÂìçÂ∫îÊó∂Èó¥ÂíåÂêûÂêêÈáè„ÄÇ</p>
<p>ËÄåÂú®Á∫øÁ®ãÊ±†Ê®°Âûã‰∏≠ÔºåÊúçÂä°Âô®ÂêØÂä®Êó∂‰ºöÈ¢ÑÂÖàÂàõÂª∫‰∏ÄÂÆöÊï∞ÈáèÁöÑÁ∫øÁ®ãÔºåËøô‰∫õÁ∫øÁ®ãÂ≠òÊîæÂú®Ê±†‰∏≠ÔºåÂπ∂‰∏çÁ´ãÂç≥ÊâßË°å‰ªªÂä°„ÄÇÂΩìÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÂà∞ËææÊó∂ÔºåËØ∑Ê±Ç‰ºöË¢´ÂàÜÈÖçÁªôÁ∫øÁ®ãÊ±†‰∏≠ÁöÑ‰∏Ä‰∏™Á©∫Èó≤Á∫øÁ®ãÔºåËØ•Á∫øÁ®ãË¥üË¥£Â§ÑÁêÜÊï¥‰∏™ËØ∑Ê±ÇËøáÁ®ã„ÄÇÂ§ÑÁêÜÂÆåÊØïÂêéÔºåÁ∫øÁ®ãÂπ∂‰∏çÈîÄÊØÅÔºåËÄåÊòØËøîÂõûÂà∞Ê±†‰∏≠Á≠âÂæÖÂ§ÑÁêÜ‰∏ã‰∏Ä‰∏™ËØ∑Ê±Ç„ÄÇ</p>
<p><strong>ÂõæÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/11.png"
	width="1830"
	height="670"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="273"
		data-flex-basis="655px"
	
></p>
<p><strong>ËØ¥Êòé</strong>Ôºö</p>
<p><strong>ÊúçÂä°Âô®ÔºàServerÔºâ</strong>ÔºöËøôÊòØÊï¥‰∏™ÊµÅÁ®ãÂºÄÂßãÁöÑÂú∞Êñπ„ÄÇÊúçÂä°Âô®ÂàùÂßãÂåñ‰∏Ä‰∏™Á∫øÁ®ãÊ±†ÔºåÂπ∂‰∏çÊñ≠ÁõëÂê¨ÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇÂΩì‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•ËØ∑Ê±ÇÂà∞Êù•Êó∂ÔºåÊúçÂä°Âô®Êé•ÂèóËøô‰∏™ËøûÊé•Ôºàaccept()ÔºâÔºåÁÑ∂ÂêéÊääÁõ∏Â∫îÁöÑ‰ªªÂä°ÔºàjobÔºö‰∏ÄËà¨ÊòØËØªÂÜôÂÆ¢Êà∑Á´ØÊï∞ÊçÆÁöÑÈÄªËæëÔºâÊ∑ªÂä†Âà∞Á∫øÁ®ãÊ±†ÁöÑ‰ªªÂä°ÈòüÂàó‰∏≠Âéª„ÄÇÊúÄÁªàÔºåÂΩìÊúçÂä°Âô®‰∏çÂÜçÈúÄË¶ÅÁ∫øÁ®ãÊ±†Êó∂Ôºå‰ºöÈîÄÊØÅÂÆÉ„ÄÇ</p>
<p><strong>Á∫øÁ®ãÊ±†ÔºàThreadPool</strong>ÔºâÔºöÁ∫øÁ®ãÊ±†ÊòØÈ¢ÑÂÖàÂàõÂª∫ÁöÑÁ∫øÁ®ãÈõÜÂêàÔºåÁî®‰∫éÊâßË°åÂ§ö‰∏™‰ªªÂä°„ÄÇÂÆÉÂàÜ‰∏∫‰∏§‰∏™‰∏ªË¶ÅÈÉ®ÂàÜÔºö</p>
<ul>
<li><strong>‰ªªÂä°ÈòüÂàóÔºàJob QueueÔºâ</strong>ÔºöËøôÈáåÂ≠òÊîæÊâÄÊúâÂæÖÂ§ÑÁêÜÁöÑ‰ªªÂä°ÔºàjobsÔºâ„ÄÇÂΩìÊúçÂä°Âô®Êé•Âèó‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ÔºåÂÆÉ‰ºöÂàõÂª∫‰∏Ä‰∏™‰ªªÂä°ÔºåÂπ∂Â∞ÜÂÖ∂Ê∑ªÂä†Âà∞Ëøô‰∏™ÈòüÂàó‰∏≠„ÄÇ</li>
<li><strong>Á∫øÁ®ãÈòüÂàóÔºàThread QueueÔºâ</strong>ÔºöËøôÈáåÂ≠òÊîæÁöÑÊòØÁ∫øÁ®ãÊ±†‰∏≠ÊâÄÊúâÂèØÁî®ÁöÑÁ∫øÁ®ã„ÄÇÂΩì‰ªªÂä°ÈòüÂàó‰∏≠Êúâ‰ªªÂä°Êó∂ÔºåÁ∫øÁ®ãÊ±†‰ºöÂàÜÈÖç‰∏Ä‰∏™Á∫øÁ®ãÂéªÊâßË°åËøô‰∏™‰ªªÂä°„ÄÇ</li>
</ul>
<p><strong>ÂÆ¢Êà∑Á´ØÔºàClientsÔºâ</strong>ÔºöÂÆ¢Êà∑Á´ØÈÄöËøáÁΩëÁªúËøûÊé•‰∏éÊúçÂä°Âô®ËøõË°åÈÄö‰ø°„ÄÇ</p>
<h3 id="ioÂ§öË∑ØÂ§çÁî®ÊúçÂä°Âô®">I/OÂ§öË∑ØÂ§çÁî®ÊúçÂä°Âô®
</h3><p><strong>‰ªÄ‰πàÊòØ I/O Â§öË∑ØÂ§çÁî®Ôºü</strong></p>
<p>Âú® Linux ‰∏≠ÔºåI/O Â§öË∑ØÂ§çÁî®ÊòØ‰∏ÄÁßçÂÖÅËÆ∏<strong>Âçï‰∏™ËøõÁ®ãÊàñÁ∫øÁ®ãÂêåÊó∂ÁõëÊéßÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶</strong>ÔºàÈÄöÂ∏∏ÊòØÁΩëÁªúÂ•óÊé•Â≠óÔºâ‰∏äÁöÑËØªÂÜôÂ∞±Áª™Áä∂ÊÄÅÁöÑÊäÄÊúØ„ÄÇËøô‰ΩøÂæóÁ®ãÂ∫èËÉΩÂ§üÂú®‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶‰∏äÂèëÁîü I/O ‰∫ã‰ª∂Êó∂Ë¢´ÈÄöÁü•Ôºå‰ªéËÄåÂØπËøô‰∫õ‰∫ã‰ª∂‰ΩúÂá∫ÂìçÂ∫îÔºàÊØîÂ¶ÇËøõË°åËØªÂÜôÊìç‰ΩúÔºâ„ÄÇËøôÁßçÊú∫Âà∂ÊûÅÂ§ßÂú∞ÊèêÈ´ò‰∫ÜÂ§ÑÁêÜÂ§ö‰∏™Âπ∂ÂèëÁΩëÁªúËøûÊé•ÁöÑÊïàÁéáÔºåÂõ†‰∏∫ÂÆÉÂÖÅËÆ∏‰ΩøÁî®ËæÉÂ∞ëÁöÑÁ≥ªÁªüËµÑÊ∫êÔºàÂ¶ÇËøõÁ®ãÂíåÁ∫øÁ®ãÔºâÊù•ÁÆ°ÁêÜÂ§ßÈáèÁöÑËøûÊé•„ÄÇ</p>
<p>‰∏äÈù¢Êàë‰ª¨Âú®ËÆ≤Ëß£ I/O Ê®°ÂûãÁöÑÊó∂ÂÄôÔºåÊèêÂà∞‰∫Ü IO Â§öË∑ØÂ§çÁî®ÔºåËÄåÂú®ËÆ≤Ëß£ÊúçÂä°Âô®Ê®°ÂûãÊàë‰ª¨ÂèàÂÜçÊ¨°ÊèêÂà∞‰∫ÜIO Â§öË∑ØÂ§çÁî®„ÄÇ<strong>ÂèØËÉΩÂ§ßÂÆ∂‰ºöÊúâÁñëÈóÆÔºöIO Â§öË∑ØÂ§çÁî®Âà∞Â∫ïÂ±û‰∫é I/O Ê®°ÂûãËøòÊòØÊúçÂä°Âô®Ê®°ÂûãÔºü</strong></p>
<p>ÂÖ∂ÂÆû I/O Â§öË∑ØÂ§çÁî®ÊäÄÊúØÊòØ‰∏§ËÄÖ‰πãÈó¥ÁöÑÊ°•Ê¢ÅÔºöÂÆÉÊòØ‰∏ÄÁßçÊúâÊïàÁöÑ I/O Â§ÑÁêÜÊñπÂºèÔºåÂêåÊó∂‰πüÊòØÊûÑÂª∫ÊúçÂä°Âô®Ê®°ÂûãÁöÑÂü∫Á°Ä„ÄÇ</p>
<ul>
<li>I/O Â§öË∑ØÂ§çÁî®‰Ωú‰∏∫ I/O Ê®°ÂûãÔºåÂÖ≥Ê≥®ÁöÑÊòØÂ¶Ç‰ΩïÊúâÊïàÂú∞ÁÆ°ÁêÜÂíåÊâßË°å I/O Êìç‰ΩúÔºåÁâπÂà´ÊòØÂú®Ê∂âÂèäÂ§ö‰∏™ I/O Ê∫êÔºàÂ¶ÇÁΩëÁªúÂ•óÊé•Â≠óÔºâÊó∂„ÄÇ</li>
<li>I/O Â§öË∑ØÂ§çÁî®‰Ωú‰∏∫ÊúçÂä°Âô®Ê®°ÂûãÔºåÂàôÊòØÂú®ËøôÁßç I/O Êìç‰ΩúÁöÑÁÆ°ÁêÜÊñπÂºèÂü∫Á°Ä‰∏äÊûÑÂª∫Êï¥‰∏™ÊúçÂä°Âô®ÁöÑÊû∂ÊûÑÔºåÂÜ≥ÂÆöÂ¶Ç‰ΩïÊé•Êî∂ÂíåÂ§ÑÁêÜÂ§ö‰∏™ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºåÂ¶Ç‰ΩïÂàÜÈÖçÂ§ÑÁêÜÁ®ãÂ∫èÊù•ÂìçÂ∫îËøô‰∫õËØ∑Ê±ÇÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂà©Áî®Á≥ªÁªüËµÑÊ∫ê„ÄÇ</li>
</ul>
<p><strong>ÁÆÄÂçïÊù•ËØ¥ÔºåI/O Ê®°ÂûãÊòØÂÖ≥‰∫é&quot;Â¶Ç‰ΩïÊâßË°å I/O&quot;ÁöÑÔºåËÄåÊúçÂä°Âô®Ê®°ÂûãÊòØÂü∫‰∫éÊüêÁßç I/O Ê®°ÂûãÊù•ÊûÑÂª∫ÊúçÂä°ÁöÑÔºå‰ª•ÂèäÂ¶Ç‰ΩïÁªÑÁªáÊúçÂä°Âô®Á®ãÂ∫è‰ª•ÂìçÂ∫îÂÆ¢Êà∑Á´ØËØ∑Ê±Ç„ÄÇ</strong></p>
<p><strong>Â∏∏ËßÅÁöÑ I/O Â§öË∑ØÂ§çÁî®ÊäÄÊúØ</strong>Ôºö</p>
<p>Linux Êèê‰æõ‰∫ÜÂ§öÁßç I/O Â§öË∑ØÂ§çÁî®ÁöÑÊú∫Âà∂ÔºåÂ¶Ç select, poll, Âíå epoll„ÄÇËøô‰∫õÊäÄÊúØÁöÑ‰∏ªË¶ÅÂå∫Âà´Âú®‰∫éÂÆÉ‰ª¨Â§ÑÁêÜÂ§ßÈáèÊñá‰ª∂ÊèèËø∞Á¨¶ÁöÑÊñπÂºèÂíåÊïàÁéá„ÄÇ</p>
<h4 id="io-Â§çÁî®‰πã-select">IO Â§çÁî®‰πã Select
</h4><p><strong>Âü∫Êú¨Ê¶ÇÂøµ</strong>Ôºö<br>
Linux ‰∏≠ÁöÑ select ÂáΩÊï∞ÊòØ‰∏ÄÁßçÂ∏∏Áî®ÁöÑ I/O Â§çÁî®ÊäÄÊúØ„ÄÇÂÆÉÂÖÅËÆ∏Á®ãÂ∫èÁõëËßÜÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºàFDsÔºâÔºå‰ª•Ê£ÄÊµãÊòØÂê¶Êúâ‰ªª‰Ωï‰∏Ä‰∏™ÊàñÂ§ö‰∏™ FD ÂáÜÂ§áÂ•ΩËøõË°åËØªÂèñ„ÄÅÂÜôÂÖ•ÊàñÊòØÂê¶ÊúâÂºÇÂ∏∏ÂèëÁîü„ÄÇËøôÁßçÊäÄÊúØÁâπÂà´ÈÄÇÁî®‰∫éÂêåÊó∂Â§ÑÁêÜÂ§ö‰∏™ÁΩëÁªúËøûÊé•ÊàñÂÖ∂‰ªñÁ±ªÂûãÁöÑ I/O Êìç‰ΩúÔºàÂ¶ÇÔºöÊñá‰ª∂I/OÔºâ„ÄÇ</p>
<p><strong>ÂáΩÊï∞Â£∞Êòé</strong></p>
<p>select ÂáΩÊï∞ÁöÑÂü∫Êú¨Â£∞ÊòéÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;sys/select.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">select</span><span class="p">(</span><span class="kt">int</span> <span class="n">nfds</span><span class="p">,</span> <span class="n">fd_set</span> <span class="o">*</span><span class="n">readfds</span><span class="p">,</span> <span class="n">fd_set</span> <span class="o">*</span><span class="n">writefds</span><span class="p">,</span> <span class="n">fd_set</span> <span class="o">*</span><span class="n">exceptfds</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">timeval</span> <span class="o">*</span><span class="n">timeout</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">ÂèÇÊï∞ÁªìÊûÑ
</span></span></span><span class="line"><span class="cl"><span class="cm">nfdsÔºöÁõëËßÜÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÈõÜÂêà‰∏≠ÊúÄÂ§ßÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Âä†‰∏Ä„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">readfdsÔºö‰∏Ä‰∏™ÊåáÂêë fd_set ÁªìÊûÑÁöÑÊåáÈíàÔºåÁî®‰∫éÁõëËßÜÂì™‰∫õ FD ÂáÜÂ§áÂ•ΩËøõË°åËØªÊìç‰Ωú„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">writefdsÔºö‰∏Ä‰∏™ÊåáÂêë fd_set ÁªìÊûÑÁöÑÊåáÈíàÔºåÁî®‰∫éÁõëËßÜÂì™‰∫õ FD ÂáÜÂ§áÂ•ΩËøõË°åÂÜôÊìç‰Ωú„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">exceptfdsÔºö‰∏Ä‰∏™ÊåáÂêë fd_set ÁªìÊûÑÁöÑÊåáÈíàÔºåÁî®‰∫éÁõëËßÜÂì™‰∫õ FD ÊúâÂºÇÂ∏∏ÂèëÁîü„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">timeoutÔºöÊåáÂÆö select Á≠âÂæÖÂáÜÂ§áÂ∞±Áª™ÁöÑ FD ÁöÑÊúÄÈïøÊó∂Èó¥„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>fd_set ÊòØ‰∏Ä‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÁªÑÔºåÁî®‰∫éÊåáÁ§∫ select ÂáΩÊï∞Â∫îËØ•ÁõëËßÜÁöÑ FDs„ÄÇ</p>
<p><strong>fd_set ÁªìÊûÑÂõæËß£Â±ïÁ§∫</strong>Ôºö</p>
<p><img src="/post/linux-network/12.png"
	width="622"
	height="242"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="257"
		data-flex-basis="616px"
	
></p>
<p><strong>ËØ¥Êòé</strong>Ôºö</p>
<p>ÂèÇÊï∞ readfds„ÄÅwritefds„ÄÅexceptfds ‰ªéÁî®Êà∑Á©∫Èó¥‰º†ÂÖ•ÂÜÖÊ†∏Á©∫Èó¥Âíå‰ªéÂÜÖÊ†∏Á©∫Èó¥ËøîÂõûÁî®Êà∑Á©∫Èó¥ÔºåÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÁªÑ‰∏≠ÁöÑÂÄº‰ª£Ë°®ÁöÑÂê´‰πâ‰∏çÂêåÔºö</p>
<p><strong>‰ª•ÂèØËØª‰∫ã‰ª∂ readfds ‰∏∫‰æã</strong>Ôºö</p>
<p><strong>‰ªéÁî®Êà∑Á©∫Èó¥‰º†ÂÖ•ÂÜÖÊ†∏Á©∫Èó¥</strong>ÔºöÊï∞ÁªÑÂÄº‰∏∫ 0 ‰ª£Ë°®‰∏çÁõëÊéßËØ•Êñá‰ª∂ÊèèËø∞Á¨¶ÔºàfdÔºâÔºåÊï∞ÁªÑÂÄº‰∏∫ 1 ‰ª£Ë°®Ë¶ÅÁõëÊéßËØ•Êñá‰ª∂ÊèèËø∞Á¨¶ÔºàfdÔºâ„ÄÇ</p>
<p><strong>‰ªéÂÜÖÊ†∏Á©∫Èó¥ËøîÂõûÁî®Êà∑Á©∫Èó¥</strong>ÔºöÊï∞ÁªÑÂÄº‰∏∫ 0 ‰ª£Ë°®ËØ•Êñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÊçÆÊú™ÂáÜÂ§áÂ∞±Áª™ÔºåÊï∞ÁªÑÂÄº‰∏∫ 1 ‰ª£Ë°®ËØ•Êñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÊçÆÂáÜÂ§áÂ∞±Áª™„ÄÇÁî®Êà∑ËøõÁ®ãÂèØ‰ª•ËøõË°åËØªÊìç‰Ωú‰∫Ü„ÄÇ</p>
<p><strong>select Âπ∂ÂèëÂõûÂ∞ÑÊúçÂä°Âô®Á®ãÂ∫èÁ§∫‰æã</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#define PORT 8080
</span></span></span><span class="line"><span class="cl"><span class="cp">#define MAX_CLIENTS 30
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">server_fd</span><span class="p">,</span> <span class="n">new_socket</span><span class="p">,</span> <span class="n">client_socket</span><span class="p">[</span><span class="n">MAX_CLIENTS</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">sockaddr_in</span> <span class="n">address</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">addrlen</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">fd_set</span> <span class="n">readfds</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">max_sd</span><span class="p">,</span> <span class="n">sd</span><span class="p">,</span> <span class="n">activity</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">valread</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">1025</span><span class="p">];</span>  <span class="c1">// Êï∞ÊçÆÁºìÂÜ≤Âå∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàùÂßãÂåñÊâÄÊúâÂÆ¢Êà∑Á´ØÂ•óÊé•Â≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_CLIENTS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">client_socket</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫Â•óÊé•Â≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">server_fd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªëÂÆöÂ•óÊé•Â≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">address</span><span class="p">.</span><span class="n">sin_family</span> <span class="o">=</span> <span class="n">AF_INET</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">address</span><span class="p">.</span><span class="n">sin_addr</span><span class="p">.</span><span class="n">s_addr</span> <span class="o">=</span> <span class="n">INADDR_ANY</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">address</span><span class="p">.</span><span class="n">sin_port</span> <span class="o">=</span> <span class="n">htons</span><span class="p">(</span><span class="n">PORT</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">bind</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">address</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">address</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁõëÂê¨Â•óÊé•Â≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">listen</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">FD_ZERO</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readfds</span><span class="p">);</span><span class="c1">// Ê∏ÖÁ©∫ fd_set
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">FD_SET</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">readfds</span><span class="p">);</span> <span class="c1">// Ê∑ªÂä† server_fd Âà∞ fd_set
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">max_sd</span> <span class="o">=</span> <span class="n">server_fd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Ê∑ªÂä†ÂÆ¢Êà∑Á´ØÂ•óÊé•Â≠óÂà∞ fd_set
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_CLIENTS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">sd</span> <span class="o">=</span> <span class="n">client_socket</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">sd</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">FD_SET</span><span class="p">(</span><span class="n">sd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">readfds</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">sd</span> <span class="o">&gt;</span> <span class="n">max_sd</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">max_sd</span> <span class="o">=</span> <span class="n">sd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// ‰ΩøÁî® select ÁõëÂê¨Â•óÊé•Â≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">activity</span> <span class="o">=</span> <span class="n">select</span><span class="p">(</span><span class="n">max_sd</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">readfds</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Êé•ÂèóÊñ∞ËøûÊé•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">FD_ISSET</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">readfds</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">((</span><span class="n">new_socket</span> <span class="o">=</span> <span class="n">accept</span><span class="p">(</span><span class="n">server_fd</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">address</span><span class="p">,</span> <span class="p">(</span><span class="n">socklen_t</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">addrlen</span><span class="p">))</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">              <span class="c1">// ÈîôËØØÂ§ÑÁêÜÂπ∂ÈÄÄÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Â∞ÜÊñ∞Â•óÊé•Â≠óÊ∑ªÂä†Âà∞Êï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_CLIENTS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">client_socket</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">client_socket</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_socket</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">     <span class="c1">// ÂÖ∂‰ªñÂ•óÊé•Â≠óÁöÑÊï∞ÊçÆÂ§ÑÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_CLIENTS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">sd</span> <span class="o">=</span> <span class="n">client_socket</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">FD_ISSET</span><span class="p">(</span><span class="n">sd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">readfds</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// Ê£ÄÊü•ÊòØÂê¶ÊòØÊñ≠ÂºÄËøûÊé•ÔºåÂê¶ÂàôÊé•Êî∂Êï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">if</span> <span class="p">((</span><span class="n">valread</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">sd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="mi">1024</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">close</span><span class="p">(</span><span class="n">sd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="n">client_socket</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">buffer</span><span class="p">[</span><span class="n">valread</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="c1">// Â∞ÜÊé•Êî∂Âà∞ÁöÑÊï∞ÊçÆÂèëÈÄÅÂõûÂÆ¢Êà∑Á´Ø
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="n">send</span><span class="p">(</span><span class="n">sd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>select‰ºòÁº∫ÁÇπ</strong>Ôºö</p>
<p><strong>‰ºòÁÇπ</strong>:</p>
<ul>
<li>
<p><strong>ËÉΩÂ§üÂêåÊó∂ÁõëËßÜÂ§ö‰∏™Â•óÊé•Â≠ó</strong>: select ÂÖÅËÆ∏ÊúçÂä°Âô®‰ª•ÂçïÁ∫øÁ®ãÁöÑÊñπÂºèÁõëËßÜÂ§ö‰∏™Â•óÊé•Â≠óÔºåÊù•Ê£ÄÊµãÂÆÉ‰ª¨ÊòØÂê¶ÊúâÂèØËØª„ÄÅÂèØÂÜôÊàñÂºÇÂ∏∏Êù°‰ª∂ÂèëÁîü„ÄÇ</p>
</li>
<li>
<p><strong>Êó†ÈúÄÂ§öÁ∫øÁ®ãÊàñÂ§öËøõÁ®ã</strong>Ôºöselect ÈááÁî®ÂçïÁ∫øÁ®ãÁöÑÂ§ÑÁêÜÊñπÂºèÔºå‰ΩøÁî® select ÂèØ‰ª•ÈÅøÂÖçÂ§çÊùÇÁöÑÂ§öÁ∫øÁ®ãÊàñÂ§öËøõÁ®ãÁÆ°ÁêÜÔºåÂáèÂ∞ë‰∫Ü‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÂºÄÈîÄÔºåÁÆÄÂåñ‰∫ÜÂπ∂ÂèëÂ§ÑÁêÜ„ÄÇ</p>
</li>
<li>
<p><strong>ÈÄÇÁî®‰∫éÂ∞èÂà∞‰∏≠Á≠âËßÑÊ®°ÁöÑË¥üËΩΩ</strong>ÔºöÂØπ‰∫é‰∏çÊòØÂæàÈ´òÁöÑÂπ∂ÂèëËøûÊé•Êï∞ÔºàÂá†ÁôæÁöÑËøûÊé•Êï∞ÔºâÔºåselect ÈÄöÂ∏∏ÂèØ‰ª•Êª°Ë∂≥ÈúÄÊ±ÇÔºå‰∏îÊïàÁéá‰∏çÈîô„ÄÇ</p>
</li>
</ul>
<p><strong>Áº∫ÁÇπ</strong>:</p>
<ul>
<li>
<p><strong>Êñá‰ª∂ÊèèËø∞Á¨¶ÈôêÂà∂</strong>Ôºöselect ÂèØ‰ª•ÁõëËßÜÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÈáèÊòØÊúâÈôêÁöÑÔºåÈÄöÂ∏∏Áî± <strong>FD_SETSIZE</strong> Â∏∏ÈáèÂÜ≥ÂÆöÔºåËøôÂú®ÂæàÂ§öÁ≥ªÁªü‰∏äÈªòËÆ§ÊòØ1024„ÄÇËøôÈôêÂà∂‰∫ÜÊúçÂä°Âô®ÂèØ‰ª•Â§ÑÁêÜÁöÑÊúÄÂ§ßÂπ∂ÂèëËøûÊé•Êï∞„ÄÇÂΩìÁÑ∂ select ‰πü‰ºöÂèóÈôê‰∫éÁ≥ªÁªüÁ∫ßÂà´ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÈáèÈôêÂà∂„ÄÇ</p>
</li>
<li>
<p><strong>ÊïàÁéáÈóÆÈ¢ò</strong>ÔºöÈöèÁùÄÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÈáèÁöÑÂ¢ûÂä†Ôºåselect ÁöÑÊÄßËÉΩ‰ºöÁ∫øÊÄß‰∏ãÈôç„ÄÇÊØèÊ¨°Ë∞ÉÁî®selectÊó∂ÔºåÈÉΩÈúÄË¶ÅÈáçÊñ∞‰º†ÂÖ•Êï¥‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÈõÜÂêàÔºåÂÜÖÊ†∏ÈúÄË¶ÅÈÅçÂéÜËøô‰∏™ÈõÜÂêàÊù•Êõ¥Êñ∞Áä∂ÊÄÅÔºåËøôÂú®Êñá‰ª∂ÊèèËø∞Á¨¶ÂæàÂ§öÊó∂‰ºöÊàê‰∏∫Áì∂È¢à„ÄÇ</p>
</li>
<li>
<p><strong>ÂìçÂ∫îÊó∂Èó¥ÂèòÈïø</strong>ÔºöÂú® select ËøîÂõûÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÂàóË°®ÈõÜÂêà‰∏≠ÔºåÂ¶ÇÊûúÊúâÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÂêåÊó∂Âèò‰∏∫Ê¥ªË∑ÉÁä∂ÊÄÅÔºåÊúçÂä°Âô®ÈÄöÂ∏∏‰ºöÊåâÈ°∫Â∫èÂ§ÑÁêÜÂÆÉ‰ª¨„ÄÇËøôÂèØËÉΩÂØºËá¥ÂØπÂàóË°®ÂâçÈù¢ÁöÑËøûÊé•ÊúâÂÅèËßÅÔºå‰ΩøÂæóÂêéÈù¢ÁöÑËøûÊé•Á≠âÂæÖÊó∂Èó¥ËæÉÈïø„ÄÇ</p>
</li>
</ul>
<h4 id="io-Â§çÁî®‰πã-poll">IO Â§çÁî®‰πã Poll
</h4><p><strong>Âü∫Êú¨Ê¶ÇÂøµ</strong>Ôºö<br>
poll ‰πüÊòØ‰∏ÄÁßç IO Â§çÁî®ÊäÄÊúØÔºåÁî®‰∫éÁõëËßÜÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºàÈÄöÂ∏∏ÊòØÁΩëÁªúÂ•óÊé•Â≠óÔºâÁöÑÂèØËØªÊÄß„ÄÅÂèØÂÜôÊÄßÂíåÂºÇÂ∏∏Áä∂ÊÄÅ„ÄÇ‰∏é select Á±ª‰ººÔºåpoll ÂÖÅËÆ∏ÊÇ®ÁöÑÁ®ãÂ∫èÁõëËßÜÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºåÁõ¥Âà∞‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÂáÜÂ§áÂ•ΩËøõË°å IO Êìç‰Ωú„ÄÇËøô‰ΩøÂæóÊÇ®ÂèØ‰ª•ÂêåÊó∂ÁÆ°ÁêÜÂ§ö‰∏™ÁΩëÁªúËøûÊé•ÔºåËÄå‰∏çÊòØÈÄê‰∏™ÈòªÂ°ûÂú∞Â§ÑÁêÜÂÆÉ‰ª¨„ÄÇ</p>
<p><strong>ÂáΩÊï∞Â£∞Êòé</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;poll.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">poll</span><span class="p">(</span><span class="k">struct</span> <span class="nc">pollfd</span> <span class="o">*</span><span class="n">fds</span><span class="p">,</span> <span class="n">nfds_t</span> <span class="n">nfds</span><span class="p">,</span> <span class="kt">int</span> <span class="n">timeout</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="err">ÂèÇÊï∞ËØ¥ÊòéÔºö</span>
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">fdsÔºöÊåáÂêë‰∏Ä‰∏™ pollfd ÁªìÊûÑÊï∞ÁªÑÁöÑÊåáÈíàÔºåËØ•Êï∞ÁªÑÂåÖÂê´Ë¶ÅÁõëËßÜÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÂèäÂÖ∂ËØ∑Ê±ÇÁöÑ‰∫ã‰ª∂ÔºàÂ¶Ç POLLIN Ë°®Á§∫ÂèØËØªÔºåPOLLOUT Ë°®Á§∫ÂèØÂÜôÔºâ„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">nfdsÔºöÊåáÂÆöÊï∞ÁªÑ fds ‰∏≠ÁöÑÂÖÉÁ¥†Êï∞Èáè„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">timeoutÔºöÊåáÂÆöÁ≠âÂæÖÊó∂Èó¥ÔºàÊØ´ÁßíÔºâ„ÄÇÁâπÊÆäÂÄºÊúâÔºö0 Á´ãÂç≥ËøîÂõûÔºàÈùûÈòªÂ°ûÔºâÔºå-1 Êó†ÈôêÁ≠âÂæÖÁõ¥Âà∞Êüê‰∏™‰∫ã‰ª∂ÂèëÁîü„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>pollfd ÁªìÊûÑ</strong></p>
<p>poll ÂáΩÊï∞‰ΩøÁî® pollfd ÁªìÊûÑÊù•ÊåáÂÆöË¶ÅÁõëËßÜÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Âíå‰∫ã‰ª∂Á±ªÂûãÔºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">pollfd</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">fd</span><span class="p">;</span>         <span class="c1">// Êñá‰ª∂ÊèèËø∞Á¨¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">short</span> <span class="n">events</span><span class="p">;</span>   <span class="c1">// ËØ∑Ê±ÇÁöÑ‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">short</span> <span class="n">revents</span><span class="p">;</span>  <span class="c1">// ÂÆûÈôÖÂèëÁîüÁöÑ‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">fd</span><span class="err">ÔºöÊñá‰ª∂ÊèèËø∞Á¨¶</span>
</span></span><span class="line"><span class="cl"><span class="n">events</span><span class="err">ÔºöË¶ÅÁõëËßÜÁöÑ‰∫ã‰ª∂ÔºåÂ¶Ç</span> <span class="n">POLLIN</span><span class="err">„ÄÅ</span><span class="n">POLLOUT</span>
</span></span><span class="line"><span class="cl"><span class="n">revents</span><span class="err">ÔºöÁî±</span> <span class="n">poll</span> <span class="err">ÂáΩÊï∞ËÆæÁΩÆÔºåË°®ÊòéÂì™‰∫õ‰∫ã‰ª∂ÂÆûÈôÖÂèëÁîü‰∫Ü</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Poll Â∫ïÂ±ÇÈááÁî®ÁöÑÊï∞ÊçÆÁªìÊûÑÂõæËß£</strong></p>
<p><img src="/post/linux-network/13.png"
	width="691"
	height="631"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="109"
		data-flex-basis="262px"
	
></p>
<p><strong>Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÔºö</strong></p>
<p><strong>Áî®Êà∑Á©∫Èó¥Êï∞ÁªÑ</strong>ÔºöÁî®Êà∑Á©∫Èó¥Á®ãÂ∫è‰ΩøÁî®Êï∞ÁªÑÔºàÁ±ªÂûã‰∏∫ struct pollfdÔºâÊù•Êèê‰æõË¶ÅÁõëËßÜÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÂèäÂÖ∂ÊÑüÂÖ¥Ë∂£ÁöÑ‰∫ã‰ª∂</p>
<p>‰ΩÜÂú®ÂÜÖÊ†∏‰∏≠Ôºå‰∏∫‰∫ÜÊúâÊïàÂú∞Â§ÑÁêÜËøô‰∫õÊñá‰ª∂ÊèèËø∞Á¨¶Ôºåpoll ÁöÑÂÆûÁé∞ËΩ¨ËÄå‰ΩøÁî®ÈìæË°®„ÄÇ</p>
<p><strong>ÂÜÖÊ†∏Á©∫Èó¥ÈìæË°®</strong>Ôºö</p>
<ul>
<li>ÂΩì poll Á≥ªÁªüË∞ÉÁî®Ë¢´ÊâßË°åÊó∂ÔºåÂÜÖÊ†∏È¶ñÂÖàÂ∞ÜËøô‰∏™Êï∞ÁªÑ‰∏≠ÁöÑÊï∞ÊçÆÂ§çÂà∂Âà∞ÂÜÖÊ†∏Á©∫Èó¥„ÄÇ</li>
<li>Âú®ÂÜÖÊ†∏‰∏≠Ôºå‰∏∫‰∫ÜÊõ¥ÁÅµÊ¥ªÂú∞Â§ÑÁêÜÂèØËÉΩÁöÑÂ§ßÈáèÊñá‰ª∂ÊèèËø∞Á¨¶ÔºåËøô‰∫õ pollfd ÁªìÊûÑË¢´ÁªÑÁªáÊàêÈìæË°®ÂΩ¢Âºè„ÄÇ</li>
<li>ÈìæË°®ÁöÑÊØè‰∏™ËäÇÁÇπÂèØËÉΩÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™ pollfd ÁªìÊûÑÔºåÂÖ∑‰ΩìÂèñÂÜ≥‰∫éÂèØÁî®ÁöÑÂÜÖÂ≠òÂíåÊñá‰ª∂ÊèèËø∞Á¨¶ÁöÑÊï∞Èáè„ÄÇ</li>
</ul>
<p><strong>poll ‰ºòÁº∫ÁÇπ</strong>Ôºö</p>
<p><strong>‰ºòÁÇπ</strong>Ôºö</p>
<p><strong>Êó†ÂÜÖÁΩÆÊñá‰ª∂ÊèèËø∞Á¨¶ÈôêÂà∂</strong>Ôºö‰∏é select ‰∏çÂêåÔºåpoll ‰∏çÂèóÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÈáèÁöÑÈôêÂà∂„ÄÇselect ÈÄöÂ∏∏ÂèóÈôê‰∫é FD_SETSIZEÔºåËøôÂú®Â§ÑÁêÜÂ§ßÈáèÂπ∂ÂèëËøûÊé•Êó∂ÂèØËÉΩÊàê‰∏∫Áì∂È¢à„ÄÇ<strong>‰ΩÜÂÆÉ‰ªçÁÑ∂ÂèóÈôê‰∫éÁ≥ªÁªüÁ∫ßÂà´ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÈôêÂà∂„ÄÇ</strong></p>
<p><strong>ÁÆÄÂåñÁöÑÊé•Âè£</strong>Ôºöpoll ‰ΩøÁî®Âçï‰∏™ÁªìÊûÑ‰ΩìÊï∞ÁªÑÊù•Ë°®Á§∫ÊâÄÊúâÁõëËßÜÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÂíåÁõ∏ÂÖ≥‰∫ã‰ª∂ÔºåÁõ∏ÊØî select ÈúÄË¶Å‰ΩøÁî®‰∏â‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÈõÜÔºàËØª„ÄÅÂÜô„ÄÅÂºÇÂ∏∏ÔºâÔºåÊé•Âè£Êõ¥‰∏∫ÁÆÄÊ¥Å„ÄÇ</p>
<p><strong>Êõ¥Áõ¥ËßÇÁöÑ‰∫ã‰ª∂Ê®°Âûã</strong>Ôºöpoll ‰ΩøÁî®‰ΩçÂ≠óÊÆµÊù•Ë°®Á§∫‰∏çÂêåÁöÑ‰∫ã‰ª∂Á±ªÂûãÔºåËøô‰ΩøÂæó‰∫ã‰ª∂Ê®°ÂûãÊØî select ÁöÑÊñπÂºèÊõ¥Áõ¥ËßÇÂíåÊòì‰∫éÁêÜËß£„ÄÇ</p>
<p><strong>Áº∫ÁÇπ</strong>Ôºö</p>
<p><strong>Á∫øÊÄßÊâ´ÊèèÂºÄÈîÄ</strong>Ôºöpoll Âú®Â§ÑÁêÜÊñá‰ª∂ÊèèËø∞Á¨¶Êó∂ÔºåÈúÄË¶ÅÂØπÊï¥‰∏™Êï∞ÁªÑËøõË°åÁ∫øÊÄßÊâ´Êèè„ÄÇÂΩìÁõëËßÜÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞ÈáèÈùûÂ∏∏Â§ßÊó∂ÔºåËøôÂèØËÉΩÂØºËá¥ÊÄßËÉΩ‰∏ãÈôç„ÄÇ</p>
<p>ÊÄªÁöÑÊù•ËØ¥Ôºåpoll ÊòØ select ÁöÑ‰∏ÄÁßçÊîπËøõÔºåÁâπÂà´ÊòØÂú®ÂèØÂ§ÑÁêÜÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶Êï∞Èáè‰∏äÊ≤°ÊúâÈôêÂà∂Ôºå‰ΩÜÂú®È´òÊÄßËÉΩÂíåÂ§ßËßÑÊ®°Âπ∂ÂèëÂ§ÑÁêÜÊñπÈù¢Ôºåepoll Âú®Áé∞‰ª£ Linux Á≥ªÁªü‰∏äÈÄöÂ∏∏ÊòØÊõ¥‰Ω≥ÁöÑÈÄâÊã©„ÄÇ</p>
<p><strong>poll Âπ∂ÂèëÂõûÂ∞ÑÊúçÂä°Âô®Á®ãÂ∫èÁ§∫‰æã</strong>Ôºö</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#define PORT 8080
</span></span></span><span class="line"><span class="cl"><span class="cp">#define MAX_CLIENTS 30
</span></span></span><span class="line"><span class="cl"><span class="cp">#define BUFFER_SIZE 1024
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">listen_fd</span><span class="p">,</span> <span class="n">new_socket</span><span class="p">,</span> <span class="n">valread</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">sockaddr_in</span> <span class="n">address</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">opt</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">addrlen</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">address</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">pollfd</span> <span class="n">client_fds</span><span class="p">[</span><span class="n">MAX_CLIENTS</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫ÁõëÂê¨Â•óÊé•Â≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="n">listen_fd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="err">Ôºõ</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÁªëÂÆöÂ•óÊé•Â≠ó
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">address</span><span class="p">.</span><span class="n">sin_family</span> <span class="o">=</span> <span class="n">AF_INET</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">address</span><span class="p">.</span><span class="n">sin_addr</span><span class="p">.</span><span class="n">s_addr</span> <span class="o">=</span> <span class="n">INADDR_ANY</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">address</span><span class="p">.</span><span class="n">sin_port</span> <span class="o">=</span> <span class="n">htons</span><span class="p">(</span><span class="n">PORT</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">bind</span><span class="p">(</span><span class="n">listen_fd</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">address</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen</span><span class="p">(</span><span class="n">listen_fd</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span> <span class="c1">// ÂºÄÂßãÁõëÂê¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ÂàùÂßãÂåñ pollfd ÁªìÊûÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_CLIENTS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fd</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">client_fds</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">fd</span> <span class="o">=</span> <span class="n">listen_fd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">client_fds</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">events</span> <span class="o">=</span> <span class="n">POLLIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ‰∏ªÂæ™ÁéØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">int</span> <span class="n">activity</span> <span class="o">=</span> <span class="n">poll</span><span class="p">(</span><span class="n">client_fds</span><span class="p">,</span> <span class="n">MAX_CLIENTS</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">activity</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="c1">//Âá∫ÈîôÂ§ÑÁêÜÂπ∂ÈÄÄÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Ê£ÄÊü•ÊòØÂê¶ÊúâÊñ∞ÁöÑËøûÊé•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">client_fds</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">revents</span> <span class="o">&amp;</span> <span class="n">POLLIN</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">((</span><span class="n">new_socket</span> <span class="o">=</span> <span class="n">accept</span><span class="p">(</span><span class="n">listen_fd</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">address</span><span class="p">,</span> <span class="p">(</span><span class="n">socklen_t</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">addrlen</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">               <span class="c1">//Âá∫ÈîôÂ§ÑÁêÜÂπ∂ÈÄÄÂá∫
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// Ê∑ªÂä†Êñ∞ÁöÑÂ•óÊé•Â≠óÂà∞Êï∞ÁªÑ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_CLIENTS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fd</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fd</span> <span class="o">=</span> <span class="n">new_socket</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">events</span> <span class="o">=</span> <span class="n">POLLIN</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Ê£ÄÊü•ÂÆ¢Êà∑Á´ØÊ¥ªÂä®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">MAX_CLIENTS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fd</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">revents</span> <span class="o">&amp;</span> <span class="n">POLLIN</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">((</span><span class="n">valread</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">BUFFER_SIZE</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">buffer</span><span class="p">[</span><span class="n">valread</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">send</span><span class="p">(</span><span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">valread</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="n">close</span><span class="p">(</span><span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">                    <span class="n">client_fds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">fd</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// Ê†áËÆ∞‰∏∫ÂèØÁî®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>                <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="io-Â§çÁî®‰πã-epoll">IO Â§çÁî®‰πã Epoll
</h4><p><a class="link" href="https://serennan.github.io/post/linux-epoll/"  target="_blank" rel="noopener"
    >„ÄêLinux„ÄëIO Â§öË∑ØÂ§çÁî® epoll</a></p>
<h3 id="ÂºÇÊ≠•ioÊúçÂä°Âô®Ê®°Âûã">ÂºÇÊ≠•I/OÊúçÂä°Âô®Ê®°Âûã
</h3><p>Âú®ËÆ≤Ëø∞‰∫Ü I/O Â§öË∑ØÂ§çÁî®ÊúçÂä°Âô®Ê®°ÂûãÂêéÔºåÊàë‰ª¨ÁúãÂà∞ÂÆÉÂ¶Ç‰Ωï‰ΩøÂçï‰∏™ËøõÁ®ãËÉΩÂ§üÊúâÊïàÂú∞ÁÆ°ÁêÜÂ§ö‰∏™ÁΩëÁªúËøûÊé•„ÄÇÈÄöËøá select„ÄÅpoll Êàñ epollÔºåËøõÁ®ãÂèØ‰ª•Âú®Â§ö‰∏™ËøûÊé•‰∏äÂêåÊó∂Á≠âÂæÖÊï∞ÊçÆÔºåËÄåÊó†ÈúÄ‰∏∫ÊØè‰∏™ËøûÊé•ÈòªÂ°ûÁ≠âÂæÖ„ÄÇËøôÁßçÊñπÊ≥ïÊèêÂçá‰∫ÜÂπ∂ÂèëÂ§ÑÁêÜÁöÑÊïàÁéáÔºå<strong>‰ΩÜÂÆÉÊúâ‰∏Ä‰∏™Â±ÄÈôêÊÄßÔºö‰∏ÄÊó¶Êüê‰∏™ËøûÊé•ÁöÑ I/O Êìç‰ΩúÂºÄÂßãÔºåËØ•ËøõÁ®ãÂøÖÈ°ªÁ≠âÂæÖËØ•Êìç‰ΩúÂÆåÊàêÊâçËÉΩÁªßÁª≠Â§ÑÁêÜ‰∏ã‰∏Ä‰∏™ËøûÊé•„ÄÇ</strong> ÁÆÄÂçïÁêÜËß£Â∞±ÊòØÔºöÂ§ÑÁêÜÂêÑ‰∏™ËøûÊé•ÁöÑ IO ËØªÂÜôÊòØÂêåÊ≠•ÁöÑÔºåÊòØ‰∏≤Ë°åÁöÑ„ÄÇ</p>
<p>‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏ÄÈóÆÈ¢òÔºåÂºïÂÖ•‰∫ÜÂºÇÊ≠•I/OÊúçÂä°Âô®Ê®°Âûã„ÄÇËøôÁßçÊ®°ÂûãÊûÅÂ§ßÊèêÂçá‰∫ÜÊúçÂä°Âô®ÁöÑ‰ªªÂä°Â§ÑÁêÜËÉΩÂäõÔºåÂÆÉÂÖÅËÆ∏ËøõÁ®ãÂú®ÂèëËµ∑I/OÊìç‰ΩúÂêéÁ´ãÂç≥ËΩ¨ËÄåÊâßË°åÂÖ∂‰ªñÂ∑•‰ΩúÔºåËÄåÊó†ÈúÄÁ≠âÂæÖI/OÊìç‰ΩúÁöÑÂÆåÊàê„ÄÇËøô‰∏ÄËøáÁ®ãÁî±Êìç‰ΩúÁ≥ªÁªüÂú®ÂêéÂè∞ÁÆ°ÁêÜÔºå‰∏ÄÊó¶I/OÊìç‰ΩúÂÆåÊàêÔºåËøõÁ®ã‰æø‰ºöÊî∂Âà∞ÈÄöÁü•„ÄÇËøõÁ®ãÂè™ÈúÄË¶ÅÂéªÂ§ÑÁêÜÂ∑≤Ë¢´Êã∑Ë¥ùËá≥Â∫îÁî®Â±ÇÁºìÂÜ≤Âå∫ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p><strong>Linux‰∏≠ÁöÑÂºÇÊ≠•I/OÂÆûÁé∞</strong>Ôºö</p>
<p>Âú®Linux‰∏≠ÔºåÂºÇÊ≠• IO Ê®°Âûã‰∏ªË¶ÅÁî± <strong>Linux aio</strong>ÔºàÈÄöËøálibaioÂ∫ìÔºâÂíå <strong>io_uring</strong> ‰∏§ÁßçÊäÄÊúØÊù•ÂÆûÁé∞„ÄÇ</p>
<p><strong>Linux aio(libaio)</strong></p>
<p>Linux aio ÊòØ Linux Á≥ªÁªü‰∏≠ËæÉÊó©ÊîØÊåÅÁöÑÂºÇÊ≠•I/OÊú∫Âà∂„ÄÇÂÆÉÈÄöËøá libaio Â∫ìÊèê‰æõ‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑAPIÔºåÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫èÈùûÈòªÂ°ûÂú∞ÂêØÂä®ÂíåÁÆ°ÁêÜI/OÊìç‰Ωú„ÄÇÂΩì‰∏Ä‰∏™I/OËØ∑Ê±ÇË¢´Êèê‰∫§ÂêéÔºålibaioË¥üË¥£Â∞ÜÂÖ∂ÂèëÈÄÅÂà∞Êìç‰ΩúÁ≥ªÁªüÔºåÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•ÁªßÁª≠ÊâßË°åËÄåÊó†ÈúÄÁ≠âÂæÖ„ÄÇ‰∏ÄÊó¶I/OÊìç‰ΩúÂÆåÊàêÔºåÂ∫îÁî®Á®ãÂ∫èÂ∞ÜÈÄöËøáÂõûË∞ÉÂáΩÊï∞ÊàñÂÖ∂‰ªñÊú∫Âà∂ÂæóÂà∞ÈÄöÁü•„ÄÇ</p>
<p><strong>libaioÊèê‰æõÁöÑ API</strong> :</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">io_setup</span>       <span class="err">ÔºöÂàõÂª∫‰∏Ä‰∏™ÂºÇÊ≠•</span><span class="n">I</span><span class="o">/</span><span class="n">O‰∏ä‰∏ãÊñá</span><span class="err">„ÄÇ</span>
</span></span><span class="line"><span class="cl"><span class="n">io_submit</span>      <span class="err">ÔºöÂêëÂºÇÊ≠•</span><span class="n">I</span><span class="o">/</span><span class="n">O‰∏ä‰∏ãÊñáÊèê‰∫§‰∏Ä‰∏™ÊàñÂ§ö‰∏™I</span><span class="o">/</span><span class="n">OËØ∑Ê±Ç</span><span class="err">„ÄÇ</span>
</span></span><span class="line"><span class="cl"><span class="n">io_getevents</span>   <span class="err">Ôºö‰ªéÂºÇÊ≠•</span><span class="n">I</span><span class="o">/</span><span class="n">O‰∏ä‰∏ãÊñá‰∏≠Ëé∑ÂèñÂ∑≤ÂÆåÊàêÁöÑ‰∫ã‰ª∂</span><span class="err">„ÄÇ</span>
</span></span><span class="line"><span class="cl"><span class="n">io_destroy</span>     <span class="err">ÔºöÈîÄÊØÅ‰∏Ä‰∏™ÂºÇÊ≠•</span><span class="n">I</span><span class="o">/</span><span class="n">O‰∏ä‰∏ãÊñá</span><span class="err">„ÄÇ</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Â∞ΩÁÆ° libaio ‰∏∫ÂºÇÊ≠• I/O Êèê‰æõ‰∫ÜÂü∫Á°ÄÊîØÊåÅÔºå‰ΩÜÂÆÉÊúâ‰∏ÄÂÆöÁöÑÂ±ÄÈôêÊÄßÔºå<strong>ÊØîÂ¶ÇÔºöÂÆÉÂè™ÈÄÇÁî®‰∫éÊñá‰ª∂ I/OÔºåÂπ∂‰∏çÈÄÇÂêàÁî®‰∫éÁΩëÁªú I/O„ÄÇ</strong></p>
<p>‰ª•‰∏ãÊòØ‰∏Ä‰∏™ÁÆÄÊ¥ÅÁöÑ libaio ‰ΩøÁî®Á§∫‰æãÔºåÊºîÁ§∫‰∫ÜÂ¶Ç‰ΩïÂú® Linux Á≥ªÁªü‰∏≠‰ª•ÂºÇÊ≠•ÊñπÂºèËøõË°åÊñá‰ª∂ËØªÂèñ„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;libaio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;sys/eventfd.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define FILE_PATH &#34;example_file.txt&#34;
</span></span></span><span class="line"><span class="cl"><span class="cp">#define BUFFER_SIZE 1024
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">io_context_t</span> <span class="n">ctx</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">iocb</span> <span class="n">cb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">iocb</span> <span class="o">*</span><span class="n">cbs</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">file_fd</span><span class="p">,</span> <span class="n">efd</span><span class="p">,</span> <span class="n">ret</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">io_event</span> <span class="n">events</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint64_t</span> <span class="n">u</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">ctx</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">io_setup</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">file_fd</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="n">FILE_PATH</span><span class="p">,</span> <span class="n">O_RDWR</span> <span class="o">|</span> <span class="n">O_CREAT</span><span class="p">,</span> <span class="mo">0644</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàõÂª∫eventfdÁî®‰∫éÈÄöÁü•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">efd</span> <span class="o">=</span> <span class="n">eventfd</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂáÜÂ§áÂºÇÊ≠•ËØªËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cb</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span> <span class="nc">iocb</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">io_prep_pread</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cb</span><span class="p">,</span> <span class="n">file_fd</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">BUFFER_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ËÆæÁΩÆeventfd‰Ωú‰∏∫ÂÆåÊàê‰∫ã‰ª∂ÁöÑÈÄöÁü•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">cb</span><span class="p">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)(</span><span class="n">uintptr_t</span><span class="p">)</span><span class="n">efd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cbs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">cb</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Êèê‰∫§ÂºÇÊ≠•I/OËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">io_submit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">cbs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Âú®ËøôÈáåÔºå‰∏ªÁ∫øÁ®ãÂèØ‰ª•ÊâßË°åÂÖ∂‰ªñ‰∏öÂä°ÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">read</span><span class="p">(</span><span class="n">efd</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint64_t</span><span class="p">));</span>  <span class="c1">// Âú®‰∏ªÁ∫øÁ®ã‰∏≠Á≠âÂæÖÈÄöÁü•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">io_getevents</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">events</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>  <span class="c1">// ËØªÂèñÂºÇÊ≠•I/O‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// Â§ÑÁêÜÂÆåÊàêÁöÑI/O‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">events</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">data</span> <span class="o">==</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)(</span><span class="n">uintptr_t</span><span class="p">)</span><span class="n">efd</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Read %zd bytes: %.*s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">events</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">res</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">events</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">res</span><span class="p">,</span> <span class="n">buffer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">close</span><span class="p">(</span><span class="n">file_fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">io_destroy</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">close</span><span class="p">(</span><span class="n">efd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>io_uring</strong>Ôºö</p>
<p>io_uring ÊòØ Linux ÂÜÖÊ†∏ 5.1 ÁâàÊú¨ÂºïÂÖ•ÁöÑÂÖ®Êñ∞ÂºÇÊ≠• I/O Ê°ÜÊû∂Ôºåio_uring Êó®Âú®Êèê‰æõ‰∏ÄÁßçÈ´òÊïà„ÄÅÁÅµÊ¥ª‰∏îÂäüËÉΩ‰∏∞ÂØåÁöÑÊñπÂºèÊù•ÊâßË°åÂºÇÊ≠• I/O Êìç‰Ωú„ÄÇ‰∏é libaio Áõ∏ÊØîÔºåio_uring Êèê‰æõ‰∫ÜÊõ¥‰ΩéÁöÑÁ≥ªÁªüË∞ÉÁî®ÂºÄÈîÄÔºåÊõ¥ÁÆÄÂçïÁöÑÊé•Âè£Ôºå‰ª•ÂèäÊõ¥Â•ΩÁöÑÊÄßËÉΩ„ÄÇ</p>
<p><strong>Â¶Ç‰ΩïÂ∑•‰Ωú</strong>Ôºö</p>
<p>io_uring ÁöÑÊ†∏ÂøÉÊÄùÊÉ≥ÊòØÈÄöËøá‰∏§‰∏™ÈòüÂàóÊù•ÁÆ°ÁêÜÂºÇÊ≠• I/O ËØ∑Ê±Ç„ÄÇ‰∏Ä‰∏™Âè´ÂÅöÊèê‰∫§ÈòüÂàóÔºàSQÔºâÔºåÂè¶‰∏Ä‰∏™Âè´ÂÆåÊàêÈòüÂàóÔºàCQÔºâ„ÄÇ</p>
<p>1.<strong>Êèê‰∫§ËØ∑Ê±Ç</strong>ÔºöÂΩì‰Ω†ÁöÑÁ®ãÂ∫èÊÉ≥Ë¶ÅÊâßË°å‰∏Ä‰∏™ I/O Êìç‰ΩúÔºåÊØîÂ¶ÇËØªÂèñÁΩëÁªúÊï∞ÊçÆÔºåÂÆÉ‰ºöÂàõÂª∫‰∏Ä‰∏™ËØ∑Ê±ÇÂπ∂ÊääÂÆÉÊîæÂà∞Êèê‰∫§ÈòüÂàóÔºàSQÔºâ‰∏≠„ÄÇ</p>
<p>2.<strong>ÂÜÖÊ†∏Â§ÑÁêÜ</strong>ÔºöLinux ÂÜÖÊ†∏‰ºöÊü•ÁúãÊèê‰∫§ÈòüÂàóÔºåÂèñÂá∫ËØ∑Ê±ÇÂπ∂Â§ÑÁêÜÂÆÉ‰ª¨„ÄÇ‰Ω†ÁöÑÁ®ãÂ∫è‰∏çÈúÄË¶ÅÁ≠âÂæÖÂÜÖÊ†∏ÂÆåÊàêËøô‰∏™Êìç‰ΩúÔºåÂÆÉÂèØ‰ª•ÁªßÁª≠ÂÅöÂÖ∂‰ªñ‰∫ãÊÉÖ„ÄÇ</p>
<p>3.<strong>ÂÆåÊàêÈÄöÁü•</strong>Ôºö‰∏ÄÊó¶ÂÜÖÊ†∏ÂÆåÊàê‰∫Ü‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÂÆÉ‰ºöÊääÁªìÊûúÊîæÂÖ•ÂÆåÊàêÈòüÂàóÔºàCQÔºâ‰∏≠„ÄÇËøôÊ†∑Á®ãÂ∫èÂ∞±Áü•ÈÅìËØ•Êìç‰ΩúÂ∑≤ÁªèÂÆåÊàêÔºåÂèØ‰ª•ÁªßÁª≠Â§ÑÁêÜÁªìÊûú‰∫Ü„ÄÇ</p>
<p><strong>io_uring ÁöÑ‰ºòÂäøÔºö</strong></p>
<ul>
<li><strong>ÊÄßËÉΩ</strong>ÔºöÂÆÉÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫è‰∏ÄÊ¨°ÊÄßÂú∞ÊâπÈáèÊèê‰∫§Â§ö‰∏™ I/O ËØ∑Ê±ÇÔºåÂáèÂ∞ë‰∫ÜÁ≥ªÁªüË∞ÉÁî®ÁöÑÊï∞ÈáèÔºåÊâÄ‰ª• io_uring ËÉΩÂ§üÊèê‰æõÊØî‰º†ÁªüÁöÑÂºÇÊ≠• I/O Êõ¥Â•ΩÁöÑÊÄßËÉΩ„ÄÇ</li>
<li><strong>ÂáèÂ∞ëÁ≠âÂæÖ</strong>ÔºöÂ∫îÁî®Á®ãÂ∫è‰∏çÈúÄË¶ÅÊØèÊ¨°Êèê‰∫§‰∏Ä‰∏™ËØ∑Ê±ÇÂ∞±Á≠âÂæÖÁªìÊûúÔºåÂÆÉÂèØ‰ª•ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°ÔºåÂêåÊó∂ÂÜÖÊ†∏Âú®ËÉåÂêéÂ§ÑÁêÜËøô‰∫õ I/O ËØ∑Ê±Ç„ÄÇ</li>
<li><strong>ÂäüËÉΩ‰∏∞ÂØå</strong>Ôºöio_uring ÊîØÊåÅÂêÑÁßçÁ±ªÂûãÁöÑ I/O Êìç‰ΩúÔºåÂåÖÊã¨‰ΩÜ‰∏çÈôê‰∫éÊñá‰ª∂ËØªÂÜô„ÄÅÁΩëÁªúÊìç‰ΩúÁ≠â„ÄÇ</li>
<li><strong>ÊòìÁî®ÊÄß</strong>Ôºöio_uring Êèê‰æõ‰∫Ü‰∏Ä‰∏™Êõ¥‰∏∫ÁÆÄÊ¥ÅÂíå‰∏ÄËá¥ÁöÑÊé•Âè£ÔºåÁõ∏ÊØî‰∫éÊóßÁöÑÂºÇÊ≠• I/O Êé•Âè£ÔºåÂÆÉÊõ¥Êòì‰∫é‰ΩøÁî®ÂíåÁêÜËß£„ÄÇ</li>
</ul>
<p>ÂÖ≥‰∫éÂºÇÊ≠• IO ÊúçÂä°Âô®Ê®°ÂûãÁöÑÂ≠¶‰π†ÔºåÂ§ßÂÆ∂Âè™ÈúÄË¶ÅÁêÜËß£ÂºÇÊ≠•IOÁöÑÂ∑•‰ΩúÊñπÂºèÔºå‰ª•Âèä‰∫ÜËß£Âú® Linux ‰∏≠ÂèØ‰ª•ÈÄöËøá libaio Âíå io_uring ÊäÄÊúØÂèØ‰ª•ÊûÑÂª∫ÂºÇÊ≠• IO ÊúçÂä°Âô®Ê®°Âûã„ÄÇÂ¶ÇÊûúÊÉ≥Ê∑±ÂÖ•Â≠¶‰π† io_uring ÁöÑÂ∫ïÂ±ÇÂéüÁêÜÔºåÂàôÂèØ‰ª•ÂéªÂÆòÁΩëÊàñËÄÖË∞∑Ê≠åÊêúÁ¥¢Áõ∏ÂÖ≥ËµÑÊñôÂéªÊ∑±ÂÖ•Â≠¶‰π†„ÄÇ</p>
<p><strong>ËøôÁØáÊñáÁ´†ÔºåÂ§ßÂÆ∂ÂèØ‰ª•Âéª‰∫ÜËß£Ôºö</strong><br>
<a class="link" href="https://cloud.tencent.com/developer/article/2187655"  target="_blank" rel="noopener"
    >https://cloud.tencent.com/developer/article/2187655</a></p>
<p><strong>ÂÖ≥‰∫éÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅÁ§∫‰æãÔºåÂàôÂèØ‰ª•Âéª‰∫ÜËß£ liburing Ëøô‰∏™Â∫ìÁöÑ example ‰ª£Á†ÅÁ§∫‰æã</strong>Ôºö<a class="link" href="https://github.com/axboe/liburing"  target="_blank" rel="noopener"
    >https://github.com/axboe/liburing</a></p>
<h2 id="ÊúçÂä°Âô®Êû∂ÊûÑÊ®°Âºè">ÊúçÂä°Âô®Êû∂ÊûÑÊ®°Âºè
</h2><p>Âú®ÂâçÈù¢ÁöÑ‰ªãÁªç‰∏≠ÔºåÊàë‰ª¨‰∫ÜËß£‰∫ÜÂ∏∏ËßÅÁöÑÊúçÂä°Âô®Ê®°ÂûãÔºå‰ΩÜÊòØËøô‰∫õÊ®°ÂûãÂú®Â∫îÂØπÈ´òÂπ∂ÂèëÂú∫ÊôØÈÉΩ‰ºöÈÅáÂà∞‰∏Ä‰∫õÊåëÊàòÔºåÁâπÂà´ÊòØÂú®Â§ÑÁêÜÂ§ßÈáèÂπ∂ÂèëËøûÊé•ÂíåÈ´òÊïàÁéá I/O Êìç‰ΩúÊñπÈù¢„ÄÇÂ∞ΩÁÆ°Ê®°ÂûãÂ¶ÇÂ§öÁ∫øÁ®ã„ÄÅÁ∫øÁ®ãÊ±†Âíå I/O Â§öË∑ØÂ§çÁî®Êèê‰æõ‰∫ÜÂπ∂ÂèëÂ§ÑÁêÜÁöÑÂü∫Á°ÄÊû∂ÊûÑÔºå‰ΩÜÂÆÉ‰ª¨ÂêÑËá™ÈÉΩÊúâÂ±ÄÈôêÊÄßÔºåÁâπÂà´ÊòØÂú®È´òÂπ∂ÂèëÂíå‰ΩéÂª∂ËøüË¶ÅÊ±ÇÁöÑÂú∫ÊôØ‰∏≠„ÄÇ</p>
<p>Ëøô‰∫õÊåëÊàò‰øÉ‰Ωø‰∫ÜÂØπ‰∏ÄÁßçÊõ¥È´òÊïà„ÄÅÊõ¥ÂèØÊâ©Â±ïÁöÑÂπ∂ÂèëÂ§ÑÁêÜÊ®°ÂºèÁöÑÈúÄÊ±Ç‚Äî ËøôÂ∞±ÊòØ Reactor Ê®°Âºè„ÄÇReactor Ê®°ÂºèÈááÁî®‰∫ã‰ª∂È©±Âä®ÁöÑÊñπÊ≥ïÔºåÁªìÂêàÂêåÊ≠• I/O Â§öË∑ØÂ§çÁî®ÊäÄÊúØÔºåÂ¶Ç select„ÄÅpoll Êàñ epollÔºåÊèê‰æõ‰∫Ü‰∏ÄÁßç‰∏çÂêå‰∫é‰º†ÁªüÁ∫øÁ®ãÊ®°ÂûãÁöÑÂπ∂ÂèëÂ§ÑÁêÜÊú∫Âà∂„ÄÇ</p>
<p><strong>‰∏∫‰ªÄ‰πàÈúÄË¶Å Reactor Ê®°ÂºèÔºü</strong></p>
<p><strong>Âπ∂ÂèëÂíå I/O ÊïàÁéá</strong>Ôºö‰º†ÁªüÁöÑÂ§öÁ∫øÁ®ãÂíåÂ§öËøõÁ®ãÊ®°ÂûãÂú®Â§ÑÁêÜÊàêÂçÉ‰∏ä‰∏áÁöÑÂπ∂ÂèëËøûÊé•Êó∂ÂèØËÉΩ‰ºöÈÅáÂà∞ÊÄßËÉΩÁì∂È¢à„ÄÇËøô‰∫õÊ®°ÂûãÂæÄÂæÄÊ∂âÂèäÈáçÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢ÂíåËµÑÊ∫êÂàÜÈÖçÔºåÁâπÂà´ÊòØÂú®È¢ëÁπÅÁöÑ I/O Êìç‰Ωú‰∏ã„ÄÇ</p>
<p><strong>ÁÆÄÂåñ‰∫ã‰ª∂Â§ÑÁêÜ</strong>ÔºöÂú® I/O Â§öË∑ØÂ§çÁî®Ê®°Âûã‰∏≠ÔºåËôΩÁÑ∂ÂèØ‰ª•È´òÊïàÂú∞ÁõëÊéßÂ§ö‰∏™ I/O ÊµÅÔºå‰ΩÜÂú®‰∫ã‰ª∂ÂàÜÂèëÂíåÂ§ÑÁêÜÊñπÈù¢ÂæÄÂæÄÁº∫‰πèÁªÑÁªáÂíåÁªìÊûÑ„ÄÇReactor Ê®°ÂºèÊèê‰æõ‰∫Ü‰∏ÄÁßçÊ∏ÖÊô∞ÁöÑÊ°ÜÊû∂Êù•Â§ÑÁêÜÂ§ö‰∏™Âπ∂Âèë I/O ‰∫ã‰ª∂ÔºåÁÆÄÂåñ‰∫Ü‰∫ã‰ª∂È©±Âä®Á®ãÂ∫èÁöÑÂºÄÂèë„ÄÇ</p>
<h3 id="reactor-Ê®°ÂºèËØ¶Ëß£">Reactor Ê®°ÂºèËØ¶Ëß£
</h3><p><strong>Reactor ÊòØ‰ªÄ‰πàÔºü</strong></p>
<p>Reactor Ê®°ÂºèÂèØ‰ª•ÁêÜËß£‰∏∫‰∏ÄÁßçÂú®ÁΩëÁªúÁºñÁ®ã‰∏≠Â∏∏Áî®ÁöÑËÆæËÆ°Ê®°ÂºèÔºåÁî®‰∫éÈ´òÊïàÂú∞Â§ÑÁêÜÂ§ö‰∏™Âπ∂Âèë I/O ‰∫ã‰ª∂ÔºåÂ¶ÇÁî®Êà∑ËØ∑Ê±ÇÊàñÁΩëÁªúÈÄö‰ø°„ÄÇÂÆÉÁöÑÊ†∏ÂøÉÊ¶ÇÂøµÊòØ‰ΩøÁî®‰∏Ä‰∏™‰∏≠ÂøÉÂåñÁöÑÂ§ÑÁêÜÂô®ÔºàÁß∞‰∏∫ ReactorÔºâÊù•ÁõëÊéßÊâÄÊúâÁöÑ I/O ËØ∑Ê±Ç„ÄÇÂΩì‰∏Ä‰∏™ I/O ‰∫ã‰ª∂ÂèëÁîüÊó∂Ôºà‰æãÂ¶ÇÔºåÊñ∞ÁöÑÂÆ¢Êà∑Á´ØËøûÊé•ÊàñËÄÖÊï∞ÊçÆÂà∞ËææÔºâÔºåReactor ‰ºöÊçïËé∑Ëøô‰∏™‰∫ã‰ª∂ÔºåÂπ∂Â∞ÜÂÖ∂ÂàÜÊ¥æÁªôÁõ∏Â∫îÁöÑÂ§ÑÁêÜÁ®ãÂ∫èËøõË°åÂ§ÑÁêÜ„ÄÇ</p>
<p><strong>Ê†∏ÂøÉÁªÑ‰ª∂Ôºö</strong></p>
<p><strong>1.Handles (Âè•ÊüÑ)Ôºö</strong></p>
<p><strong>ÂÆö‰πâ</strong>ÔºöÂè•ÊüÑÊòØÂØπÊìç‰ΩúÁ≥ªÁªüËµÑÊ∫êÁöÑÂºïÁî®ÔºåÈÄöÂ∏∏ÊòØ<strong>Êñá‰ª∂ÊèèËø∞Á¨¶</strong>Ôºàfile descriptorÔºâ„ÄÇÂú®ÁΩëÁªúÁºñÁ®ã‰∏≠ÔºåËøôÈÄöÂ∏∏ÊòØÊåá‰ª£ÁΩëÁªúÂ•óÊé•Â≠óÔºàsocketsÔºâ„ÄÇ</p>
<p><strong>Áî®ÈÄî</strong>ÔºöÂÆÉÁî®‰∫éÊ†áËØÜ‰∏Ä‰∏™ÁâπÂÆöÁöÑÁΩëÁªúËøûÊé•ÊàñÂÖ∂‰ªñ I/O ËµÑÊ∫êÔºåÂ¶ÇÊâìÂºÄÁöÑÊñá‰ª∂„ÄÅÁÆ°ÈÅìÁ≠â„ÄÇ</p>
<p><strong>Á§∫‰æã</strong>ÔºöÂΩì‰∏Ä‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•Âà∞ÊúçÂä°Âô®ÔºåÊúçÂä°Âô®‰ºö‰∏∫Ëøô‰∏™ËøûÊé•ÂàõÂª∫‰∏Ä‰∏™Â•óÊé•Â≠óÔºåÂπ∂‰∏∫ÂÖ∂ÂàÜÈÖç‰∏Ä‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºåËøô‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶Â∞±ÊòØ‰∏Ä‰∏™Âè•ÊüÑ„ÄÇ</p>
<p><strong>2.Synchronous Event Demultiplexer (‰∫ã‰ª∂Â§öË∑ØÂàÜÂèëÂô®)Ôºö</strong></p>
<p><strong>ÂÆö‰πâ</strong>Ôºö‰∫ã‰ª∂Â§öË∑ØÂàÜÂèëÂô®ÊòØË¥üË¥£Á≠âÂæÖÂ§ö‰∏™Âè•ÊüÑ‰∏ä‰∫ã‰ª∂ÂèëÁîüÁöÑÁªÑ‰ª∂„ÄÇÂÆÉÂèØ‰ª•ÂêåÊó∂ÁõëÊéßÂ§ö‰∏™Âè•ÊüÑÔºåÂ¶ÇÁΩëÁªúÂ•óÊé•Â≠ó‰∏äÁöÑÂèØËØªÊàñÂèØÂÜô‰∫ã‰ª∂„ÄÇ</p>
<p><strong>ÂÆûÁé∞</strong>ÔºöÂú® Linux ‰∏≠ÔºåËøôÈÄöÂ∏∏ÈÄöËøáÁ≥ªÁªüË∞ÉÁî®Â¶Ç select, poll Êàñ epoll ÂÆûÁé∞„ÄÇ</p>
<p><strong>ÂäüËÉΩ</strong>ÔºöÂΩì‰∏Ä‰∏™ÊàñÂ§ö‰∏™Âè•ÊüÑ‰∏äÂèëÁîü‰∫ã‰ª∂Êó∂Ôºà‰æãÂ¶ÇÔºåÊñ∞ÁöÑÂÆ¢Êà∑Á´ØËøûÊé•„ÄÅÊï∞ÊçÆÂà∞ËææÁ≠âÔºâÔºå‰∫ã‰ª∂Â§öË∑ØÂàÜÂèëÂô®ÈÄöÁü• Reactor„ÄÇ</p>
<p><strong>3.Event Handler (‰∫ã‰ª∂Â§ÑÁêÜÂô®)Ôºö</strong></p>
<p><strong>ÂÆö‰πâÔºö</strong> ÂÆÉÊòØ‰∏Ä‰∏™ÂÆö‰πâ‰∫ÜÂ§ÑÁêÜ‰∏çÂêåÁ±ªÂûã‰∫ã‰ª∂ÊâÄÈúÄÊé•Âè£ÊàñÂçèËÆÆÁöÑÊäΩË±°Ê¶ÇÂøµ„ÄÇÈÄöÂ∏∏ÂåÖÂê´‰∏ÄÁ≥ªÂàóÁöÑÊñπÊ≥ïÊàñÂáΩÊï∞ÔºåÁî®‰∫éÂ§ÑÁêÜÂêÑÁßç‰∫ã‰ª∂ÔºåÂ¶ÇËØªÂèñÊï∞ÊçÆÔºàÂèØËØª‰∫ã‰ª∂Ôºâ„ÄÅÂÜôÂÖ•Êï∞ÊçÆÔºàÂèØÂÜô‰∫ã‰ª∂ÔºâÊàñÂ§ÑÁêÜÈîôËØØÔºàÈîôËØØ‰∫ã‰ª∂Ôºâ„ÄÇ‰∫ã‰ª∂Â§ÑÁêÜÂô®ÂÆö‰πâ‰∫ÜÂú®ÂèëÁîüÁâπÂÆö‰∫ã‰ª∂Êó∂Â∫îÂΩìË∞ÉÁî®Âì™‰∫õÊñπÊ≥ïÔºå‰ΩÜ‰∏çÊ∂âÂèäËøô‰∫õÊñπÊ≥ïÁöÑÂÖ∑‰ΩìÂÆûÁé∞„ÄÇ</p>
<p><strong>‰æãÂ¶ÇÔºö</strong> ‰∏Ä‰∏™‰∫ã‰ª∂Â§ÑÁêÜÂô®Êé•Âè£ÂèØËÉΩÊúâ‰∏Ä‰∏™ handle_read ÊñπÊ≥ïÁî®‰∫éÂ§ÑÁêÜÂèØËØª‰∫ã‰ª∂Ôºå‰ΩÜÂÆÉÂπ∂‰∏çÂÆûÁé∞ËØ•ÊñπÊ≥ï„ÄÇ</p>
<p><strong>4.Concrete Event Handlers (ÂÖ∑‰Ωì‰∫ã‰ª∂Â§ÑÁêÜÂô®)Ôºö</strong></p>
<p><strong>ÂÆö‰πâÔºö</strong> ÂÖ∑‰Ωì‰∫ã‰ª∂Â§ÑÁêÜÂô®ÂÆûÁé∞‰∫ÜÂÆö‰πâÂú®‰∫ã‰ª∂Â§ÑÁêÜÂô®Êé•Âè£‰∏≠ÁöÑÊâÄÊúâÊñπÊ≥ïÔºåÊèê‰æõ‰∫ÜÂ¶Ç‰ΩïÂ§ÑÁêÜÁâπÂÆö‰∫ã‰ª∂ÁöÑÂÖ∑‰ΩìÈÄªËæë„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå‰∏Ä‰∏™ÂÖ∑‰Ωì‰∫ã‰ª∂Â§ÑÁêÜÂô®ÂèØËÉΩÂÆûÁé∞ handle_read ÊñπÊ≥ïÊù•‰ªéÂ•óÊé•Â≠ó‰∏≠ËØªÂèñÊï∞ÊçÆÂπ∂Â§ÑÁêÜËøô‰∫õÊï∞ÊçÆ„ÄÇÂèàÊàñËÄÖÂÆûÁé∞ handle_accept ÊñπÊ≥ïÊù•Â§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ËØ∑Ê±Ç„ÄÇ</p>
<p>ÂÖ∑‰Ωì‰∫ã‰ª∂Â§ÑÁêÜÂô®ÊòØÂÆûÈôÖÂ∑•‰ΩúÁöÑÁªÑ‰ª∂ÔºåÊØè‰∏™ÂÖ∑‰ΩìÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÂô®ÂÆû‰æãÈÄöÂ∏∏‰∏éÂ∫îÁî®Á®ãÂ∫è‰∏≠ÁöÑ‰∏Ä‰∏™ÁâπÂÆöËµÑÊ∫êÔºà‰∏Ä‰∏™socket Êñá‰ª∂ÊèèËø∞Á¨¶ÔºâÂÖ≥ËÅî„ÄÇ</p>
<p><strong>5.Initiation Dispatcher (ÂàùÂßãÂåñÂàÜÂèëÂô®)Ôºö</strong></p>
<p><strong>ÂÆö‰πâ</strong>ÔºöÂàùÂßãÂåñÂàÜÂèëÂô®ÊòØ Reactor Ê®°ÂºèÁöÑÊ†∏ÂøÉÁªÑ‰ª∂ÔºåË¥üË¥£ÁÆ°ÁêÜ‰∫ã‰ª∂Âæ™ÁéØ„ÄÅÁõëÂê¨‰∫ã‰ª∂Âπ∂Â∞ÜÂÆÉ‰ª¨ÂàÜÂèëÂà∞Áõ∏Â∫îÁöÑÂÖ∑‰Ωì‰∫ã‰ª∂Â§ÑÁêÜÂô®„ÄÇ</p>
<p><strong>ËÅåË¥£</strong>ÔºöÂÆÉÂàùÂßãÂåñ‰∫ã‰ª∂Â§öË∑ØÂàÜÂèëÂô®ÔºåÊ≥®ÂÜå‰∫ã‰ª∂Â§ÑÁêÜÂô®ÔºåÂπ∂Âú®‰∫ã‰ª∂ÂèëÁîüÊó∂Ë∞ÉÁî®Áõ∏Â∫îÁöÑÂÖ∑‰Ωì‰∫ã‰ª∂Â§ÑÁêÜÂô®„ÄÇ</p>
<p><strong>‰∫ã‰ª∂Âæ™ÁéØ</strong>ÔºöÂú®Êï¥‰∏™Â∫îÁî®Á®ãÂ∫èÁöÑÁîüÂëΩÂë®ÊúüÂÜÖÔºåÂàùÂßãÂåñÂàÜÂèëÂô®ËøêË°å‰∏Ä‰∏™Âæ™ÁéØÔºåÁ≠âÂæÖÂíåÂàÜÂèë‰∫ã‰ª∂„ÄÇ</p>
<p><strong>select ÂÆûÁé∞ÁöÑ Reactor ÁΩëÁªúÊúçÂä°Âô®Á®ãÂ∫è</strong></p>
<p>ËøôÈáåÂè™ÊòØÊèê‰æõ‰∏Ä‰∏™ÁÆÄÂçïÁ§∫‰æãÔºå‰ΩÜ‰ª•‰∏äÁöÑ5‰∏™ÁªÑ‰ª∂ÈÉΩÂåÖÂê´„ÄÇ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#define PORT 8080
</span></span></span><span class="line"><span class="cl"><span class="cp">#define BUFFER_SIZE 1024
</span></span></span><span class="line"><span class="cl"><span class="cp">#define MAX_CLIENTS 1024
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="n">handler_t</span> <span class="n">handlers</span><span class="p">[</span><span class="n">MAX_CLIENTS</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="n">num_clients</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="k">struct</span> <span class="nc">handler_t</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span> <span class="c1">//Âè•ÊüÑÔºöÂú®Êàë‰ª¨ÁöÑ‰∏ä‰∏ãÊñá‰∏≠Â∞±ÊòØÂ•óÊé•Â≠óÊèèËø∞Á¨¶„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">handle_func</span><span class="p">)(</span><span class="kt">int</span> <span class="n">handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">);</span>  <span class="c1">//‰∫ã‰ª∂Â§ÑÁêÜÂô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span> <span class="n">handler_t</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂÖ∑‰Ωì‰∫ã‰ª∂Â§ÑÁêÜÂô® Ôºö Â§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑËøûÊé•ËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">acceptor_handler_func</span><span class="p">(</span><span class="kt">int</span> <span class="n">handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">sockaddr_in</span> <span class="n">client_addr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">socklen_t</span> <span class="n">client_len</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">client_addr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">client_fd</span> <span class="o">=</span> <span class="n">accept</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">client_addr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">client_len</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">client_fd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Accepted connection from %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">inet_ntoa</span><span class="p">(</span><span class="n">client_addr</span><span class="p">.</span><span class="n">sin_addr</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Â∞ÜÊñ∞ÂÆ¢Êà∑Á´ØÂä†ÂÖ•Âà∞ handlers ‰∏≠
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">handlers</span><span class="p">[</span><span class="n">num_clients</span><span class="p">].</span><span class="n">handle</span> <span class="o">=</span> <span class="n">client_fd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">handlers</span><span class="p">[</span><span class="n">num_clients</span><span class="p">].</span><span class="n">handle_func</span> <span class="o">=</span> <span class="n">client_handler_func</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">num_clients</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ÂÖ∑‰Ωì‰∫ã‰ª∂Â§ÑÁêÜÂô®ÔºöÂ§ÑÁêÜÂÆ¢Êà∑Á´ØÁöÑÊï∞ÊçÆÂ§ÑÁêÜËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">client_handler_func</span><span class="p">(</span><span class="kt">int</span> <span class="n">handle</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">nbytes</span> <span class="o">=</span> <span class="n">recv</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">nbytes</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">close</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Â∞Ühandle‰ªéhandlersÊï∞ÁªÑ‰∏≠ÁßªÈô§
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_clients</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">handle</span> <span class="o">==</span> <span class="n">handle</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">handlers</span><span class="p">[</span><span class="n">num_clients</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">                <span class="n">num_clients</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">send</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">nbytes</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">event_demultiplexer</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">fd_set</span> <span class="n">read_fds</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">fd_max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">FD_ZERO</span><span class="p">(</span><span class="o">&amp;</span><span class="n">read_fds</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_clients</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">FD_SET</span><span class="p">(</span><span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">read_fds</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">handle</span> <span class="o">&gt;</span> <span class="n">fd_max</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">fd_max</span> <span class="o">=</span> <span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">handle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Á≠âÂæÖ socket ‰∏äÁöÑÂèØËØª‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">fd_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">read_fds</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">perror</span><span class="p">(</span><span class="s">&#34;select&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂàÜÂèë‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_clients</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">FD_ISSET</span><span class="p">(</span><span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">read_fds</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">handle_func</span><span class="p">(</span><span class="n">handlers</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">handle</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">Initiation Dispatcher (ÂàùÂßãÂåñÂàÜÂèëÂô®)
</span></span></span><span class="line"><span class="cl"><span class="cm">Initiation Dispatcher ÊòØ Reactor Ê®°ÂºèÁöÑÊ†∏ÂøÉÔºåÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫èÊ≥®ÂÜå‰∫ã‰ª∂„ÄÅÊ≥®ÈîÄ‰∫ã‰ª∂„ÄÇÂπ∂‰∏îÂÆÉË¥üË¥£ÂêØÂä®‰∫ã‰ª∂Âæ™ÁéØÔºåÁ≠âÂæÖ‰∫ã‰ª∂Âπ∂ÂàÜÂèë‰∫ã‰ª∂„ÄÇ
</span></span></span><span class="line"><span class="cl"><span class="cm">*/</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">run_reactor</span><span class="p">(</span><span class="kt">int</span> <span class="n">listen_fd</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Ê≥®ÂÜå‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">handlers</span><span class="p">[</span><span class="n">num_clients</span><span class="p">].</span><span class="n">handle</span> <span class="o">=</span> <span class="n">listen_fd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">handlers</span><span class="p">[</span><span class="n">num_clients</span><span class="p">].</span><span class="n">handle_func</span> <span class="o">=</span> <span class="n">acceptor_handler_func</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">num_clients</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// ÂêØÂä®‰∫ã‰ª∂Âæ™ÁéØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">event_demultiplexer</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">listen_fd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">sockaddr_in</span> <span class="n">server_addr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen_fd</span> <span class="o">=</span> <span class="n">socket</span><span class="p">(</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">SOCK_STREAM</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">server_addr</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">server_addr</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="n">server_addr</span><span class="p">.</span><span class="n">sin_family</span> <span class="o">=</span> <span class="n">AF_INET</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">server_addr</span><span class="p">.</span><span class="n">sin_port</span> <span class="o">=</span> <span class="n">htons</span><span class="p">(</span><span class="n">PORT</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">server_addr</span><span class="p">.</span><span class="n">sin_addr</span><span class="p">.</span><span class="n">s_addr</span> <span class="o">=</span> <span class="n">INADDR_ANY</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">bind</span><span class="p">(</span><span class="n">listen_fd</span><span class="p">,</span> <span class="p">(</span><span class="k">struct</span> <span class="nc">sockaddr</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">server_addr</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">server_addr</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">listen</span><span class="p">(</span><span class="n">listen_fd</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="n">run_reactor</span><span class="p">(</span><span class="n">listen_fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">close</span><span class="p">(</span><span class="n">listen_fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Âü∫‰∫é <strong>epoll</strong> ÁöÑÈ´òÊïàÊÄßÔºåÊàë‰ª¨‰∏ÄËà¨‰ºöÂü∫‰∫é epoll ÂéªÂÆûÁé∞ reactor„ÄÇ<strong>ÂÖ∑‰ΩìÂÆûÁé∞ÂèØÂèÇËÄÉËøôÁØáÊñáÁ´†Ôºö</strong><br>
<a class="link" href="https://zhuanlan.zhihu.com/p/539556726"  target="_blank" rel="noopener"
    >https://zhuanlan.zhihu.com/p/539556726</a></p>
<p><strong>Reactor ‰∫ã‰ª∂Â§ÑÁêÜÊµÅÁ®ã</strong></p>
<p>‰∏ãÈù¢ÈÄöËøáÊó∂Â∫èÂõæÊù•ÂõæÁ§∫‰∏äËø∞‰ª£Á†ÅÁöÑÊâßË°åËøáÁ®ãÔºåÊñπ‰æøÂ§ßÂÆ∂ÁêÜËß£Ôºö</p>
<p><img src="/post/linux-network/14.png"
	width="1381"
	height="681"
	
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="202"
		data-flex-basis="486px"
	
></p>
<h3 id="reactor-Ê®°ÂºèÁöÑ‰ºòÂäøÂíåÂ∫îÁî®Âú∫ÊôØ">Reactor Ê®°ÂºèÁöÑ‰ºòÂäøÂíåÂ∫îÁî®Âú∫ÊôØ
</h3><p><strong>Reactor Ê®°ÂºèÁöÑ‰∏ªË¶Å‰ºòÂäøÂåÖÊã¨Ôºö</strong></p>
<ul>
<li><strong>È´òÊïàÁöÑËµÑÊ∫êÂà©Áî®</strong>Ôºö<br>
ÈÄöËøáÂçïÁ∫øÁ®ãÊàñÂ∞ëÈáèÁ∫øÁ®ãÊù•ÁÆ°ÁêÜÂ§ö‰∏™Âπ∂ÂèëËøûÊé•ÔºåÂáèÂ∞ë‰∫ÜÁ∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÂíåËµÑÊ∫êÊ∂àËÄóÔºåÊèêÈ´ò‰∫ÜËµÑÊ∫êÂà©Áî®ÊïàÁéá„ÄÇ</li>
<li><strong>Âø´ÈÄüÂìçÂ∫îËÉΩÂäõ</strong>Ôºö<br>
ÈùûÈòªÂ°ûÂíå‰∫ã‰ª∂È©±Âä®Êú∫Âà∂Á°Æ‰øù‰∫ÜÂø´ÈÄüÂìçÂ∫îÂ§ñÈÉ®‰∫ã‰ª∂ÔºåÊèêÈ´ò‰∫ÜÁ®ãÂ∫èÁöÑÂìçÂ∫îÈÄüÂ∫¶„ÄÇ</li>
<li><strong>Êõ¥Â•ΩÁöÑÂèØÊâ©Â±ïÊÄß</strong>Ôºö<br>
ËÉΩÂ§üÂ§ÑÁêÜÊàêÂçÉ‰∏ä‰∏áÁöÑÂπ∂ÂèëËøûÊé•ÔºåËÄå‰∏ç‰ºöÈÅáÂà∞‰º†ÁªüÂ§öÁ∫øÁ®ãÊàñÂ§öËøõÁ®ãÊ®°Âûã‰∏≠Á∫øÁ®ãËµÑÊ∫êÈôêÂà∂ÁöÑÈóÆÈ¢ò„ÄÇ</li>
</ul>
<h3 id="Â∫îÁî®Âú∫ÊôØ">Â∫îÁî®Âú∫ÊôØ
</h3><p>ËøôÁßçÊ®°ÂºèÁâπÂà´ÈÄÇÂêà‰∫éÈúÄË¶ÅÈ´òÂπ∂ÂèëÂ§ÑÁêÜÁöÑÁΩëÁªúÊúçÂä°Âô®ÔºåÂ¶Ç Web ÊúçÂä°Âô®„ÄÅÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®Á≠â„ÄÇ</p>
<p><strong>ÁªìËÆ∫Ôºö</strong><br>
Reactor Ê®°ÂºèÊòØÁé∞‰ª£È´òÊÄßËÉΩÁΩëÁªúÁºñÁ®ãÁöÑÂü∫Áü≥‰πã‰∏Ä„ÄÇÂÆÉÈÄöËøá‰∫ã‰ª∂È©±Âä®ÂíåÈùûÈòªÂ°û I/O Êú∫Âà∂ÊúâÊïàÂú∞Ëß£ÂÜ≥‰∫Ü‰º†ÁªüÂπ∂ÂèëÊ®°ÂûãÂú®È´òÂπ∂ÂèëÁéØÂ¢É‰∏ãÁöÑÈôêÂà∂Ôºå‰∏∫ÊûÑÂª∫ÂèØÊâ©Â±ïÁöÑÁΩëÁªúÂ∫îÁî®Êèê‰æõ‰∫ÜÂº∫Â§ßÁöÑÂ∑•ÂÖ∑„ÄÇ</p>
<h3 id="proactor-Ê®°ÂºèËØ¶Ëß£">Proactor Ê®°ÂºèËØ¶Ëß£
</h3><p>Âú®ÂâçÈù¢ÁöÑËÆ≤Ëß£‰∏≠ÔºåÊàë‰ª¨Êé¢ËÆ®‰∫Ü Reactor Ê®°Âºè„ÄÇËØ•Ê®°Âºè‰∏ªË¶Å‰æùËµñ‰∫éÂêåÊ≠• I/OÔºåÁÑ∂ËÄåÔºåÈöèÁùÄÂπ∂ÂèëÈúÄÊ±ÇÁöÑÂ¢ûÂä†ÔºåÂ∞§ÂÖ∂Âú®È´òË¥üËΩΩÁéØÂ¢É‰∏ãÔºåÂêåÊ≠• I/O ÁöÑÂ±ÄÈôêÊÄßÈÄêÊ∏êÂá∏Êòæ„ÄÇ</p>
<p>Â∫îÂØπËøô‰∏ÄÊåëÊàòÔºåÂºÇÊ≠•ÁºñÁ®ãÊ®°ÂûãÁöÑ <strong>Proactor Ê®°Âºè</strong>Êèê‰æõ‰∫Ü‰∏ÄÁßçÂÖ®Êñ∞ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇÂÆÉÂå∫Âà´‰∫é Reactor ÁöÑÂêåÊ≠•Á≠âÂæÖÔºåËΩ¨ËÄåÈááÁî®<strong>ÂÆåÂÖ®ÂºÇÊ≠•ÁöÑ I/O Êìç‰Ωú</strong>„ÄÇÂú®Ëøô‰∏™Ê®°Âºè‰∏ãÔºåÂ∫îÁî®Á®ãÂ∫èÊó†ÈúÄÂú® I/O ÂÆåÊàêÂâçÁ≠âÂæÖÔºåËÄåÊòØÂú® I/O ÂÆåÊàêÂêéÊé•Êî∂ÈÄöÁü•„ÄÇProactor Ê®°ÂºèÊúâÊïàÂáèÂ∞ë‰∫ÜÁ≠âÂæÖÊó∂Èó¥ÔºåÊèêÈ´ò‰∫ÜÂØπÂπ∂ÂèëËøûÊé•ÁöÑÂ§ÑÁêÜÊïàÁéáÔºåÂ∞§ÂÖ∂ÈÄÇÂêà‰∫éÊûÑÂª∫<strong>È´òÊÄßËÉΩ</strong>„ÄÅ<strong>I/O ÂØÜÈõÜÂûã</strong>ÁöÑÁΩëÁªúÂ∫îÁî®„ÄÇËøô‰∏ÄÊ®°Âºè‰∏ç‰ªÖÊèêÂçá‰∫ÜÊÄßËÉΩÔºå‰πü‰ª£Ë°®‰∫ÜÁΩëÁªúÁºñÁ®ãËåÉÂºèÁöÑ‰∏ÄÊ¨°ÈáçË¶ÅËΩ¨ÂèòÔºå‰∏∫ÂºÄÂèëÈ´òÊïàÂíåÂèØÊâ©Â±ïÁöÑÁΩëÁªúÊúçÂä°Êèê‰æõ‰∫ÜÊñ∞ÊÄùË∑Ø„ÄÇ</p>
<p><strong>Proactor ÊòØ‰ªÄ‰πàÔºü</strong></p>
<p>Proactor Ê®°ÂºèÊòØ‰∏ÄÁßçÈ´òÁ∫ßÁöÑÂºÇÊ≠•ÁºñÁ®ãÊ®°ÂûãÔºåÁî®‰∫éÂ§ÑÁêÜ I/O Êìç‰Ωú„ÄÇ‰∏é‰º†ÁªüÁöÑÂêåÊ≠• I/O Êìç‰ΩúÔºàÂ¶Ç Reactor Ê®°ÂºèÔºâ‰∏çÂêåÔºåProactor Ê®°ÂºèÂÖÅËÆ∏Â∫îÁî®Á®ãÂ∫èÂú®‰∏çÈòªÂ°û‰∏ªÊâßË°åÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ãÊâßË°å I/O Êìç‰Ωú„ÄÇÂ∫îÁî®Á®ãÂ∫èÂèëËµ∑ÂºÇÊ≠• I/O ËØ∑Ê±ÇÂêéÂèØ‰ª•ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°ÔºåËÄåÊó†ÈúÄÈòªÂ°ûÁ≠âÂæÖ I/O Êìç‰ΩúÁöÑÂÆåÊàê„ÄÇÂΩì I/O Êìç‰ΩúÂÆûÈôÖÂÆåÊàêÊó∂ÔºåÊìç‰ΩúÁ≥ªÁªü‰ºöÈÄöÁü•Â∫îÁî®Á®ãÂ∫èÔºåÂπ∂Ëß¶ÂèëÈ¢ÑÂÆö‰πâÁöÑÂõûË∞ÉÂáΩÊï∞Êàñ‰∫ã‰ª∂Â§ÑÁêÜÁ®ãÂ∫èÊù•Â§ÑÁêÜ I/O Êìç‰ΩúÁöÑÁªìÊûú„ÄÇ</p>
<p><strong>Ê†∏ÂøÉÁªÑ‰ª∂</strong></p>
<p><strong>ÂºÇÊ≠•Êìç‰ΩúÂØπË±°Ôºö</strong> ËØ•ÂØπË±°‰ª£Ë°®‰∫ÜÂçï‰∏™ÁöÑÂºÇÊ≠• I/O Êìç‰ΩúÔºåÂ¶ÇÂºÇÊ≠•ËØªÂèñÊàñÂÜôÂÖ•„ÄÇÂÆÉ ‰ª¨ÈÄöÂ∏∏Â∞ÅË£Ö‰∫ÜÊìç‰ΩúÁöÑÁªÜËäÇÔºåÂ¶ÇÊìç‰ΩúÁ±ªÂûã„ÄÅÁõÆÊ†áËµÑÊ∫ê(Êñá‰ª∂ÊèèËø∞Á¨¶)„ÄÅÁºìÂÜ≤Âå∫Âú∞ÂùÄÁ≠â„ÄÇ</p>
<p><strong>ÂºÇÊ≠•Êìç‰ΩúÂØπË±°ÁöÑÂÆö‰πâ</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">enum</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">ADD_TYPE_ACCEPT</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">ADD_TYPE_READ</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">ADD_TYPE_WRITE</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">io_data</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">type</span><span class="p">;</span> <span class="c1">// ADD_TYPE_ACCEPT, ADD_TYPE_READ, ADD_TYPE_WRITE Á≠â
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">fd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">size_t</span> <span class="n">bytes_read</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Proactor ÂàùÂßãÂô®ÔºàProactor InitiatorÔºâ</strong> Ôºö<br>
Proactor ÂàùÂßãÂô®ÊòØË¥üË¥£ÂêØÂä®ÂíåÈÖçÁΩÆÂºÇÊ≠• I/O Êìç‰ΩúÊµÅÁ®ãÁöÑÁªÑ‰ª∂„ÄÇÂÆÉÈÄöÂ∏∏Áî±Áî®Êà∑Á©∫Èó¥ÁöÑ‰ª£Á†ÅÊâßË°åÔºåË¥üË¥£ÂáÜÂ§áÂíåÊèê‰∫§ÂºÇÊ≠• I/O ËØ∑Ê±ÇÂà∞ÂÜÖÊ†∏„ÄÇ</p>
<p>Âú® io_uring ‰∏≠ÔºåProactor ÂàùÂßãÂô® ÂØπÂ∫îÁöÑÊòØÁî®Êà∑Á©∫Èó¥‰ª£Á†ÅÔºåÁâπÂà´ÊòØË¥üË¥£ÂàùÂßãÂåñ io_uring ÂÆû‰æã„ÄÅ‰ª•ÂèäÊèê‰∫§ÂºÇÊ≠• I/O ËØ∑Ê±ÇÂà∞ÂÜÖÊ†∏ÁöÑÈÄªËæë„ÄÇ</p>
<p><strong>Êù•Áúã‰∏ãÂú® io_uring ‰∏≠Ôºå Proactor Initiator ÁöÑ‰ª£Á†ÅÁ§∫‰æãÔºö</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// ÂàùÂßãÂåñ io_uringÂÆû‰æã
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">io_uring_queue_init</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ring</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Êèê‰∫§‰∏Ä‰∏™ÂºÇÊ≠•ËØªÂèñËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="kt">void</span> <span class="nf">submit_async_read</span><span class="p">(</span><span class="k">struct</span> <span class="nc">io_uring</span> <span class="o">*</span><span class="n">ring</span><span class="p">,</span> <span class="kt">int</span> <span class="n">fd</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">io_data</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span>  <span class="nc">io_data</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">   <span class="k">struct</span> <span class="nc">io_uring_sqe</span> <span class="o">*</span><span class="n">sqe</span>  <span class="o">=</span> <span class="n">io_uring_get_sqe</span><span class="p">(</span><span class="n">ring</span><span class="p">);</span> 
</span></span><span class="line"><span class="cl">    <span class="n">data</span><span class="o">-&gt;</span><span class="n">fd</span> <span class="o">=</span> <span class="n">fd</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span><span class="o">-&gt;</span><span class="n">type</span> <span class="o">=</span> <span class="n">ADD_TYPE_READ</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">io_uring_prep_read</span><span class="p">(</span><span class="n">sqe</span><span class="p">,</span> <span class="n">fd</span><span class="p">,</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">buffer</span><span class="p">,</span> <span class="n">BUFFER_SIZE</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>      <span class="c1">// ÂáÜÂ§áËØªÂèñËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">io_uring_sqe_set_data</span><span class="p">(</span><span class="n">sqe</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span> <span class="c1">// ËÆæÁΩÆÁî®Êà∑Êï∞ÊçÆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">io_uring_submit</span><span class="p">(</span><span class="n">ring</span><span class="p">);</span>  <span class="c1">// Êèê‰∫§ËØ∑Ê±Ç
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÂºÇÊ≠•Êìç‰ΩúÂ§ÑÁêÜÂô®ÔºàAsynchronous Operation ProcessorÔºâ</strong>Ôºö<br>
ÂºÇÊ≠•Êìç‰ΩúÂ§ÑÁêÜÂô®ÊòØ Proactor Ê®°ÂºèÁöÑÊ†∏ÂøÉÔºåÂú®ÂÜÖÊ†∏‰∏≠ÊâßË°åÔºåË¥üË¥£ÂêØÂä®ÂºÇÊ≠• I/O Êìç‰ΩúÂπ∂Âú®Êìç‰ΩúÂÆåÊàêÊó∂ÈÄöÁü•Áî®Êà∑Á©∫Èó¥ÁöÑ Proactor ÂÆû‰æã„ÄÇ</p>
<p>Âú® io_uring ‰∏≠ÔºåÂºÇÊ≠•Êìç‰ΩúÂ§ÑÁêÜÂô® ÂÆûÈôÖ‰∏äÊòØ io_uring ÁöÑÂÜÖÊ†∏ÁªÑ‰ª∂„ÄÇËøôÂåÖÊã¨Êèê‰∫§ÈòüÂàóÔºàSQÔºâÂíåÂÆåÊàêÈòüÂàóÔºàCQÔºâÔºå‰ª•ÂèäÂÜÖÊ†∏‰∏≠Ë¥üË¥£Â§ÑÁêÜËøô‰∫õÈòüÂàóÁöÑÈÄªËæë„ÄÇ</p>
<p><strong>ÂÆåÊàêÂ§ÑÁêÜÂô®ÔºàCompletion HandlerÔºâ</strong></p>
<p>ÂÆåÊàêÂ§ÑÁêÜÂô®ÊòØÁî±Â∫îÁî®Á®ãÂ∫èÂÆö‰πâÁöÑÂõûË∞ÉÂáΩÊï∞ÔºåÂÆÉ‰ª¨Âú®ÂºÇÊ≠• I/O Êìç‰ΩúÂÆåÊàêÊó∂Ë¢´Ë∞ÉÁî®‰ª•Â§ÑÁêÜ I/O Êìç‰ΩúÁöÑÁªìÊûú„ÄÇ</p>
<p>Âú® io_uring ‰∏≠ÔºåÂÆåÊàêÂ§ÑÁêÜÂô® ÂØπÂ∫î‰∫éÈÇ£‰∫õË¢´Êèê‰∫§Âà∞ io_uring Âπ∂Âú® I/O Êìç‰ΩúÂÆåÊàêÂêéÊâßË°åÁöÑÂõûË∞ÉÂáΩÊï∞„ÄÇËøô‰∫õÂõûË∞ÉÂáΩÊï∞Â§ÑÁêÜ io_uring ‰ªéÂÆåÊàêÈòüÂàó‰∏≠Ëé∑ÂèñÁöÑ CQEs(Â§ö‰∏™ÂÆåÊàêÈòüÂàóÊù°ÁõÆ)„ÄÇ</p>
<p><strong>ÂºÇÊ≠•ËØªÂèñÂõûË∞ÉÂáΩÊï∞‰ª£Á†ÅÁ§∫‰æãÔºö</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">handle_read</span><span class="p">(</span><span class="k">struct</span> <span class="nc">io_uring</span> <span class="o">*</span><span class="n">ring</span><span class="p">,</span> <span class="k">struct</span> <span class="nc">io_uring_cqe</span> <span class="o">*</span><span class="n">cqe</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">io_data</span> <span class="o">*</span><span class="n">data</span> <span class="o">=</span> <span class="n">io_uring_cqe_get_data</span><span class="p">(</span><span class="n">cqe</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span><span class="p">;</span>  <span class="c1">// Êï∞ÊçÆ‰∏∫Á©∫ÂàôÁõ¥Êé•ËøîÂõû
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">cqe</span><span class="o">-&gt;</span><span class="n">res</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÂÆ¢Êà∑Á´ØÊñ≠ÂºÄËøûÊé•ÊàñËØªÂèñÈîôËØØ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">close</span><span class="p">(</span><span class="n">data</span><span class="o">-&gt;</span><span class="n">fd</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ËØªÂèñÊï∞ÊçÆÔºåÂáÜÂ§áÂõûÂÜô(data-&gt;bufferÁºìÂÜ≤Âå∫Â∑≤ÁªèÊúâÊï∞ÊçÆ‰∫Ü)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">data</span><span class="o">-&gt;</span><span class="n">bytes_read</span> <span class="o">=</span> <span class="n">cqe</span><span class="o">-&gt;</span><span class="n">res</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">printf</span><span class="p">(</span><span class="s">&#34;Received: %.*s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">data</span><span class="o">-&gt;</span><span class="n">bytes_read</span><span class="p">,</span> <span class="n">data</span><span class="o">-&gt;</span><span class="n">buffer</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†ÂÜôÂõûÈÄªËæë
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">free</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>  <span class="c1">// ÈáäÊîæÂÜÖÂ≠ò
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Proactor ÂÆû‰æã</strong>Ôºö<br>
Proactor ÂÆû‰æãÊòØË¥üË¥£ÁÆ°ÁêÜÊï¥‰∏™ÂºÇÊ≠• I/O ÊµÅÁ®ãÁöÑÁªÑ‰ª∂ÔºåÂÆÉÁÆ°ÁêÜÁùÄÂºÇÊ≠•Êìç‰ΩúÂ§ÑÁêÜÂô®ÂíåÂÆåÊàêÂ§ÑÁêÜÂô®ÔºåË∞ÉÂ∫¶ÂÆåÊàêÂ§ÑÁêÜÂô®ÔºåÂπ∂Â§ÑÁêÜÊâÄÊúâÁöÑÂºÇÊ≠•‰∫ã‰ª∂„ÄÇ</p>
<p>Âú® io_uring ‰∏≠ÔºåProactor ÂÆû‰æã ÂØπÂ∫îÁöÑÊòØÁî®Êà∑Á©∫Èó¥‰∏≠Áª¥Êä§ io_uring Êé•Âè£ÂíåÈÄªËæëÁöÑÈÉ®ÂàÜÔºå<strong>ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏Ä‰∏™‰∫ã‰ª∂Âæ™ÁéØ</strong>ÔºåÂÆÉË¥üË¥£ÁõëÊéßÂÆåÊàêÈòüÂàóÔºàCQÔºâÔºåÁ°ÆÂÆöÂì™‰∫õ I/O Êìç‰ΩúÂ∑≤ÁªèÂÆåÊàêÔºåÂπ∂Ëß¶ÂèëÁõ∏Â∫îÁöÑÂÆåÊàêÂ§ÑÁêÜÂô®„ÄÇ</p>
<p><strong>Proactor ÂÆû‰æã‰ª£Á†ÅÁ§∫‰æãÔºö</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// ËøêË°å‰∫ã‰ª∂Âæ™ÁéØ‰ª•Â§ÑÁêÜÂºÇÊ≠• I/O Êìç‰Ωú
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">run_io_uring_loop</span><span class="p">(</span><span class="k">struct</span> <span class="nc">io_uring</span> <span class="o">*</span><span class="n">ring</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">struct</span> <span class="nc">io_uring_cqe</span> <span class="o">*</span><span class="n">cqe</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">unsigned</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Êèê‰∫§ÊâÄÊúâÊåÇËµ∑ÁöÑËØ∑Ê±ÇÂπ∂Á≠âÂæÖËá≥Â∞ë‰∏Ä‰∏™ËØ∑Ê±ÇÂÆåÊàê
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">io_uring_submit_and_wait</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Â§ÑÁêÜÊâÄÊúâÂ∑≤ÂÆåÊàêÁöÑ‰∫ã‰ª∂
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">io_uring_for_each_cqe</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">head</span><span class="p">,</span> <span class="n">cqe</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">cqe</span><span class="o">-&gt;</span><span class="n">res</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&#34;IO operation failed: %s</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">cqe</span><span class="o">-&gt;</span><span class="n">res</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">handle_read</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">cqe</span><span class="p">);</span> <span class="c1">// Ë∞ÉÁî®ÂÆåÊàêÂ§ÑÁêÜÂô®
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="c1">// Ê†áËÆ∞ËØ•‰∫ã‰ª∂Â∑≤Â§ÑÁêÜ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="n">io_uring_cqe_seen</span><span class="p">(</span><span class="n">ring</span><span class="p">,</span> <span class="n">cqe</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Proactor ‰∫ã‰ª∂Â§ÑÁêÜÊµÅÁ®ã</strong></p>
<p><strong>ÂêØÂä®ÂºÇÊ≠•Êìç‰ΩúÔºàProactor ÂàùÂßãÂô®Ôºâ</strong>Ôºö</p>
<p>‰Ω†ÁöÑÁ®ãÂ∫èÔºàÈÄöËøá Proactor ÂàùÂßãÂô®ÔºâÂáÜÂ§á‰∏Ä‰∏™ÂºÇÊ≠• I/O Êìç‰ΩúÔºåÊØîÂ¶ÇËØ¥ËØªÂèñÊñá‰ª∂ÊàñÊé•Êî∂ÁΩëÁªúÊï∞ÊçÆ„ÄÇËøô‰∏™ÂáÜÂ§áËøáÁ®ãÊ∂âÂèäÊåáÂÆöË¶ÅËøõË°åÁöÑÊìç‰ΩúÁ±ªÂûãÔºà‰æãÂ¶ÇËØªÂèñÊàñÂÜôÂÖ•Ôºâ„ÄÅÂì™‰∏™Êñá‰ª∂ÊàñÁΩëÁªúËøûÊé•Ôºå‰ª•ÂèäÊï∞ÊçÆÂ≠òÊîæÁöÑ‰ΩçÁΩÆ„ÄÇ</p>
<p>‰∏ÄÊó¶ÂáÜÂ§áÂ•ΩÔºåËøô‰∏™ÂºÇÊ≠•Êìç‰ΩúË¢´Êèê‰∫§ÁªôÊìç‰ΩúÁ≥ªÁªü„ÄÇÂ¶ÇÊûú‰ΩøÁî® io_uringÔºåËøôÊÑèÂë≥ÁùÄÂ∞ÜÊìç‰ΩúËØ∑Ê±ÇÊîæÂÖ• io_uring ÁöÑÊèê‰∫§ÈòüÂàóÔºàSQÔºâ„ÄÇÊìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏Â§ÑÁêÜÂºÇÊ≠•Êìç‰ΩúÔºàÁî±ÂºÇÊ≠•Êìç‰ΩúÂ§ÑÁêÜÂô®ÊâßË°åÔºâ„ÄÇ</p>
<p>‰∏ÄÊó¶ÂºÇÊ≠•Êìç‰ΩúË¢´Êèê‰∫§ÔºåÊìç‰ΩúÁ≥ªÁªüÊé•ÁÆ°Ëøô‰∏™‰ªªÂä°„ÄÇÂú® io_uring ‰∏≠ÔºåÂÜÖÊ†∏‰ºöÂ§ÑÁêÜËøô‰∫õ I/O ËØ∑Ê±Ç„ÄÇ<strong>‰∏éÊ≠§ÂêåÊó∂Ôºå‰Ω†ÁöÑÁ®ãÂ∫èÂèØ‰ª•ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°Ôºå‰∏çÂøÖÁ≠âÂæÖ I/O Êìç‰ΩúÂÆåÊàê„ÄÇ</strong></p>
<p><strong>ÈÄöÁü• ProactorÂÆû‰æã</strong> Ôºö</p>
<p>ÂΩìÊìç‰ΩúÁ≥ªÁªüÂÆåÊàê‰∫Ü‰∏Ä‰∏™ÂºÇÊ≠• I/O Êìç‰ΩúÔºåÂÆÉ‰ºöÂ∞ÜÊ≠§Êìç‰ΩúÁöÑÁªìÊûúÊîæÂÖ•ÂÆåÊàêÈòüÂàóÔºàCQÔºâ„ÄÇ</p>
<p>‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠ÁöÑ Proactor ÂÆû‰æã‰ºöÂÆöÊúüÊ£ÄÊü•Ëøô‰∏™ÂÆåÊàêÈòüÂàóÔºåÁúãÁúãÊòØÂê¶Êúâ‰ªª‰ΩïÊìç‰ΩúÂ∑≤ÁªèÂÆåÊàê„ÄÇ</p>
<p><strong>Â§ÑÁêÜÂÆåÊàêÁöÑÊìç‰ΩúÔºàÂÆåÊàêÂ§ÑÁêÜÂô®ÔºâÔºö</strong></p>
<p>ÂØπ‰∫éÊØè‰∏Ä‰∏™Â∑≤ÁªèÂÆåÊàêÁöÑÊìç‰ΩúÔºåProactor ÂÆû‰æã‰ºöË∞ÉÁî®Áõ∏Â∫îÁöÑÂÆåÊàêÂ§ÑÁêÜÂô®„ÄÇÂÆåÊàêÂ§ÑÁêÜÂô®ÊòØ‰Ω†‰∫ãÂÖàÂÆö‰πâÂ•ΩÁöÑÔºå‰∏ìÈó®Áî®Êù•Â§ÑÁêÜÂºÇÊ≠•Êìç‰ΩúÂÆåÊàêÂêéÁöÑÊï∞ÊçÆÁöÑÂáΩÊï∞„ÄÇÊØîÂ¶ÇËØ¥ÔºåÂ¶ÇÊûúÊìç‰ΩúÂØπË±°ÊòØÁΩëÁªúÂ•óÊé•Â≠óÔºåÂ§ÑÁêÜÂô®ÂèØËÉΩ‰ºöÂ§ÑÁêÜËØªÂèñÂà∞ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p><strong>Ê∏ÖÁêÜÂíåÂáÜÂ§á‰∏ã‰∏ÄÊ≠•Êìç‰Ωú</strong>Ôºö</p>
<p>‰∏ÄÊó¶ÂÆåÊàêÂ§ÑÁêÜÂô®ËøêË°åÂÆåÊØïÔºåProactor ÂÆû‰æã‰ºöËøõË°åÂøÖË¶ÅÁöÑÊ∏ÖÁêÜÂ∑•‰ΩúÔºåÂπ∂ÂáÜÂ§áÊé•Êî∂ÂíåÂ§ÑÁêÜÊõ¥Â§öÁöÑÂÆåÊàê‰∫ã‰ª∂„ÄÇ</p>
<p><strong>ÊÄªÁªì‰∏Ä‰∏ã</strong>ÔºöProactor Ê®°ÂºèÂÖÅËÆ∏‰Ω†ÁöÑÁ®ãÂ∫èÂºÇÊ≠•Âú∞ÊâßË°å I/O Êìç‰ΩúÔºåÂêåÊó∂ÁªßÁª≠ËøõË°åÂÖ∂‰ªñ‰ªªÂä°„ÄÇÊìç‰ΩúÁ≥ªÁªüÂú®ÂêéÂè∞Â§ÑÁêÜËøô‰∫õ I/O ËØ∑Ê±ÇÔºåÂΩìÂÆÉ‰ª¨ÂÆåÊàêÊó∂Ôºå‰Ω†ÁöÑÁ®ãÂ∫è‰ºöÂæóÂà∞ÈÄöÁü•ÔºåÂπ∂Ë∞ÉÁî®Áõ∏Â∫îÁöÑÂõûË∞ÉÂáΩÊï∞Êù•Â§ÑÁêÜÁªìÊûú„ÄÇËøô‰∏™ËøáÁ®ã‰ºòÂåñ‰∫ÜËµÑÊ∫êÁöÑ‰ΩøÁî®ÔºåÊèêÈ´ò‰∫ÜÂ∫îÁî®Á®ãÂ∫èÁöÑÂìçÂ∫îÊÄßÂíåÊïàÁéá„ÄÇ</p>
<h3 id="proactor-Ê®°ÂºèÁöÑ‰ºòÂäø">Proactor Ê®°ÂºèÁöÑ‰ºòÂäø
</h3><p><strong>ÂÆåÂÖ®ÁöÑÂºÇÊ≠•Â§ÑÁêÜÔºö</strong></p>
<p>Proactor Ê®°ÂºèÂÆûÁé∞‰∫ÜÁúüÊ≠£ÁöÑÂºÇÊ≠• I/O„ÄÇÂú® Proactor Ê®°Âºè‰∏≠ÔºåÊâÄÊúâÁöÑ I/O Êìç‰ΩúÔºàÂåÖÊã¨ËØªÂÜôÔºâÈÉΩÊòØÂºÇÊ≠•ÂÆåÊàêÁöÑ„ÄÇËøôÊÑèÂë≥ÁùÄÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•Âú® I/O Êìç‰ΩúËøõË°åÊó∂ÁªßÁª≠ÊâßË°åÂÖ∂‰ªñ‰ªªÂä°ÔºåËÄåÊó†ÈúÄÁ≠âÂæÖ I/O Êìç‰ΩúÁöÑÂÆåÊàê„ÄÇ<br>
Áõ∏ÊØî‰πã‰∏ãÔºåReactor Ê®°ÂºèÈÄöÂ∏∏Âè™ËÉΩÂºÇÊ≠•Âú∞Â§ÑÁêÜ I/O ËØ∑Ê±ÇÁöÑÂáÜÂ§áÈò∂ÊÆµÔºà‰æãÂ¶ÇÁ≠âÂæÖÊï∞ÊçÆÂà∞ËææÊàñÂèØÂèëÈÄÅÁä∂ÊÄÅÔºâÔºåËÄåÂÆûÈôÖÁöÑËØªÂÜôÊìç‰Ωú‰ªçÁÑ∂ÊòØÂêåÊ≠•ËøõË°åÁöÑ„ÄÇ</p>
<p><strong>ÂáèÂ∞ëÁ∫øÁ®ãÈòªÂ°ûÔºö</strong></p>
<p>Âú® Proactor Ê®°Âºè‰∏≠ÔºåÁî±‰∫é I/O Êìç‰ΩúÂÆåÂÖ®ÂºÇÊ≠•ÔºåÂ∫îÁî®Á®ãÂ∫èÁ∫øÁ®ã‰∏ç‰ºöÂõ†Á≠âÂæÖ I/O Êìç‰ΩúËÄåÈòªÂ°ûÔºåËøôÂØπ‰∫é‰øùÊåÅÈ´òÊÄßËÉΩÂíåÂìçÂ∫îÊÄßÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ„ÄÇ<br>
Reactor Ê®°ÂºèËôΩÁÑ∂ÂáèÂ∞ë‰∫ÜÁõ¥Êé•ÁöÑ I/O Á≠âÂæÖÔºà‰æãÂ¶ÇÁ≠âÂæÖÊï∞ÊçÆÂà∞ËææÔºâÔºå‰ΩÜÂú®Â§ÑÁêÜÊï∞ÊçÆÊó∂‰ªçÁÑ∂ÂèØËÉΩÂá∫Áé∞ÈòªÂ°ûÔºàÂ¶ÇÔºöÊï∞ÊçÆÂ§ÑÁêÜÊìç‰ΩúËÄóÊó∂ËæÉÈïøÔºâ„ÄÇ</p>
<p><strong>ÁÆÄÂåñÁºñÁ®ãÊ®°ÂûãÔºö</strong></p>
<p>Proactor Ê®°ÂºèÈÄöËøáÈ¢ÑÂÆö‰πâÁöÑÂõûË∞ÉÊàñ‰∫ã‰ª∂Â§ÑÁêÜÂô®ÁÆÄÂåñ‰∫ÜÂºÇÊ≠• I/O ÁöÑÁºñÁ®ãÊ®°ÂûãÔºå‰ΩøÂæó‰ª£Á†ÅÊõ¥Âä†Ê∏ÖÊô∞ÂíåÊòì‰∫éÁª¥Êä§„ÄÇ<br>
Âú® Reactor Ê®°Âºè‰∏≠ÔºåÁºñÁ®ãËÄÖÈúÄË¶ÅÊòæÂºèÂ§ÑÁêÜ I/O ‰∫ã‰ª∂ÁöÑÂàÜÂèëÂíåÂìçÂ∫îÔºåÂèØËÉΩÂØºËá¥Êõ¥Â§çÊùÇÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÈÄªËæë„ÄÇ</p>
<h3 id="proactor-Ê®°ÂºèÁöÑÂ∫îÁî®Âú∫ÊôØ">Proactor Ê®°ÂºèÁöÑÂ∫îÁî®Âú∫ÊôØ
</h3><p><strong>È´òÊÄßËÉΩÁΩëÁªúÊúçÂä°Âô®</strong>Ôºö</p>
<p>Â¶Ç Web ÊúçÂä°Âô®„ÄÅÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®Á≠âÔºåÁâπÂà´ÊòØÂú®ÈúÄË¶ÅÂ§ÑÁêÜÂ§ßÈáèÂπ∂ÂèëÁΩëÁªúËØ∑Ê±ÇÁöÑÂú∫ÊôØ„ÄÇ</p>
<p><strong>Êñá‰ª∂ I/O ÂØÜÈõÜÂûãÂ∫îÁî®</strong>Ôºö</p>
<p>‰æãÂ¶ÇÊó•ÂøóÂ§ÑÁêÜ„ÄÅÂ§ßÊï∞ÊçÆÂàÜÊûêÔºå‰ª•Âèä‰ªª‰ΩïÈúÄË¶ÅÈ¢ëÁπÅËØªÂÜôÂ§ßÂûãÊñá‰ª∂ÁöÑÂ∫îÁî®„ÄÇ</p>
<h3 id="ÊÄªÁªì">ÊÄªÁªì
</h3><p>Âú®Êú¨Á≥ªÂàóÊñáÁ´†‰∏≠ÔºåÊàë‰ª¨Ê∑±ÂÖ•Êé¢ËÆ®‰∫ÜLinux‰∏ãÁöÑÂ•óÊé•Â≠óÁºñÁ®ãÔºå‰∏Ä‰∏™Âú®ÁΩëÁªúÈÄö‰ø°‰∏≠‰∏çÂèØÊàñÁº∫ÁöÑÊ†∏ÂøÉÊäÄÊúØ-<strong>Â•óÊé•Â≠ó</strong>„ÄÇÂ•óÊé•Â≠ó‰Ωú‰∏∫ÁΩëÁªúÈÄö‰ø°ÁöÑÂü∫Áü≥Ôºå‰ΩøÂæó‰∏çÂêå‰∏ªÊú∫Èó¥ÁöÑÊï∞ÊçÆ‰∫§Êç¢ÂèòÂæóÂèØËÉΩ„ÄÇ</p>
<p><strong>Â•óÊé•Â≠óÁöÑÊú¨Ë¥®</strong></p>
<p>Êàë‰ª¨È¶ñÂÖàËß£Êûê‰∫ÜÂ•óÊé•Â≠óÁöÑÊ¶ÇÂøµÔºåÂÆÉÊòØÊîØÊåÅTCP/IPÁΩëÁªúÈÄö‰ø°ÁöÑÂü∫Á°ÄAPIÔºå‰∏∫Â∫îÁî®Â±Ç‰∏éÁΩëÁªúÂ±Ç‰πãÈó¥Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÊäΩË±°Â±Ç„ÄÇÈÄöËøáÂ•óÊé•Â≠óÔºåÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•‰∏çÁî®ÂÖ≥ÂøÉÂ∫ïÂ±ÇÁöÑÁΩëÁªúÁªÜËäÇÔºåÂ∞±ËÉΩËøõË°åÁΩëÁªúÈÄö‰ø°„ÄÇ</p>
<p><strong>Â•óÊé•Â≠óÁ±ªÂûã</strong></p>
<p>Êé•ÁùÄÔºåÊàë‰ª¨Êé¢ËÆ®‰∫Ü<strong>Â•óÊé•Â≠óÁöÑ‰∏âÁßçÂü∫Êú¨Á±ªÂûã</strong>Ôºö</p>
<ul>
<li><strong>ÊµÅÂºèÂ•óÊé•Â≠óÔºàSOCK_STREAM</strong>ÔºâÔºöÊèê‰æõÂ∫èÂàóÂåñÁöÑ„ÄÅÂèØÈù†ÁöÑ„ÄÅÂèåÂêëÁöÑËøûÊé•ÈÄö‰ø°„ÄÇ</li>
<li><strong>Êï∞ÊçÆÊä•Â•óÊé•Â≠óÔºàSOCK_DGRAMÔºâ</strong>ÔºöÊèê‰æõÈùûËøûÊé•ÁöÑ„ÄÅ‰∏çÂèØÈù†ÁöÑÈÄö‰ø°„ÄÇ</li>
<li><strong>ÂéüÂßãÂ•óÊé•Â≠óÔºàSOCK_RAWÔºâ</strong>ÔºöÂÖÅËÆ∏Áõ¥Êé•ËÆøÈóÆÂ∫ïÂ±ÇÂçèËÆÆÔºåÁî®‰∫éÈúÄË¶ÅÁªÜÁ≤íÂ∫¶ÊéßÂà∂ÁöÑÂú∫ÊôØ„ÄÇ</li>
</ul>
<p><strong>ÂÖ≥ÈîÆAPI‰∏éÁªìÊûÑ</strong></p>
<p>Êàë‰ª¨ËØ¶ÁªÜ‰ªãÁªç‰∫ÜÂ•óÊé•Â≠óÁºñÁ®ã‰∏≠ÁöÑÂÖ≥ÈîÆAPIÔºåÂ¶Ç <strong>socket„ÄÅbind„ÄÅlisten„ÄÅaccept„ÄÅconnect‰ª•ÂèäsendÂíårecvÂáΩÊï∞</strong>Ôºå‰ª•ÂèäÂ•óÊé•Â≠óÂú∞ÂùÄÁªìÊûÑÔºàÂ¶ÇsockaddrÔºâÂíåÂú∞ÂùÄËΩ¨Êç¢APIÔºåËøô‰∫õÊòØËøõË°åÂ•óÊé•Â≠óÁºñÁ®ãÁöÑÂü∫Á°Ä„ÄÇ</p>
<p><strong>Êï∞ÊçÆÂ§ÑÁêÜ</strong></p>
<p>Â≠óËäÇÂ∫èËΩ¨Êç¢APIÁöÑËÆ®ËÆ∫ÔºåÂ∏ÆÂä©Êàë‰ª¨Â§ÑÁêÜË∑®Âπ≥Âè∞ÁöÑÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇ</p>
<p><strong>LinuxÁöÑIOÊ®°Âûã</strong></p>
<p>Êú¨Á≥ªÂàóÊñáÁ´†ËøòË¶ÜÁõñ‰∫ÜLinuxÁ≥ªÁªü‰∏≠ÁöÑÂ§öÁßçIOÊ®°ÂûãÔºåÂåÖÊã¨ÈòªÂ°ûIO„ÄÅÈùûÈòªÂ°ûIO„ÄÅI/OÂ§öË∑ØÂ§çÁî®„ÄÅ‰ø°Âè∑È©±Âä®IOÂíåÂºÇÊ≠•IOÔºåÂÆÉ‰ª¨ÂêÑÊúâ‰ºòÂäøÔºåÈÄÇÁî®‰∫é‰∏çÂêåÁöÑÂú∫ÊôØ„ÄÇ</p>
<p><strong>ÁΩëÁªúI/OÊÄßËÉΩ‰ºòÂåñ</strong></p>
<p>Âú®ÁΩëÁªúI/OÊÄßËÉΩ‰ºòÂåñÈÉ®ÂàÜÔºåÊàë‰ª¨ËÆ®ËÆ∫‰∫Ü<strong>Á°¨‰ª∂‰ºòÂåñÂíåËΩØ‰ª∂‰ºòÂåñ</strong>Á≠ñÁï•ÔºåÂº∫Ë∞É‰∫ÜÂ∫îÁî®Á®ãÂ∫èËÆæËÆ°ÁöÑÈáçË¶ÅÊÄßÂíåÂÜÖÊ†∏ÂèÇÊï∞Ë∞ÉÊï¥ÁöÑ‰ΩúÁî®„ÄÇ</p>
<p><strong>ÊúçÂä°Âô®Ê®°Âûã</strong></p>
<p>ÊúÄÂêéÔºåÊàë‰ª¨Êé¢ËÆ®‰∫Ü Linux ÁéØÂ¢É‰∏ãÂ∏∏ËßÅÁöÑÊúçÂä°Âô®Ê®°ÂûãÔºåÂåÖÊã¨ÂçïËøõÁ®ã„ÄÅÂ§öËøõÁ®ã„ÄÅÂ§öÁ∫øÁ®ã„ÄÅÁ∫øÁ®ãÊ±†ÂíåI/OÂ§öË∑ØÂ§çÁî®Ê®°Âûã‰ª•ÂèäÂºÇÊ≠•I/OÊúçÂä°Âô®Ê®°ÂûãÔºåÊØèÁßçÊ®°ÂûãÈÉΩÊúâÂÖ∂Â∫îÁî®Âú∫ÊôØÂíå‰ºòÁº∫ÁÇπ„ÄÇ</p>
<p><strong>Êû∂ÊûÑÊ®°Âºè</strong></p>
<p>ÊúçÂä°Âô®Êû∂ÊûÑÊ®°ÂºèÔºåÂ¶Ç <strong>Reactor</strong> Âíå <strong>Proactor</strong>ÔºåÊèê‰æõ‰∫ÜÈ´òÊïàÂ§ÑÁêÜÂπ∂ÂèëÁΩëÁªú‰∫ã‰ª∂ÁöÑÊñπÊ≥ïÔºåÊòØÊûÑÂª∫È´òÊÄßËÉΩÁΩëÁªúÂ∫îÁî®ÁöÑÂÖ≥ÈîÆ„ÄÇ</p>
<p><strong>ÊÄªÁªìÔºö</strong></p>

<div class="notice notice-note" >
    <div class="notice-title"></div><p><strong>Ê∞¥Âπ≥Ëß¶Âèë</strong>ÔºöÊõ¥Êòì‰∫é‰ΩøÁî®ÂíåÁêÜËß£Ôºå‰ΩÜÂèØËÉΩ‰ºöÂØºËá¥Êõ¥Â§öÁöÑ epoll_wait Ë∞ÉÁî®ÔºåÂ∞§ÂÖ∂ÊòØÂú®È´òË¥üËΩΩ‰∏ã„ÄÇ</p>
<p><strong>ËæπÁºòËß¶Âèë</strong>ÔºöÊõ¥È´òÁöÑÊÄßËÉΩÊΩúÂäõÔºåÂáèÂ∞ë‰∫Ü epoll_wait Ë∞ÉÁî®ÁöÑÊ¨°Êï∞Ôºå‰ΩÜÈúÄË¶ÅÊõ¥Ë∞®ÊÖéÁöÑÁºìÂÜ≤Âå∫ÁÆ°ÁêÜÂíåÈîôËØØÂ§ÑÁêÜ„ÄÇ</p></div>


</section>


    <footer class="article-footer">
    



    
</footer>

</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Áõ∏ÂÖ≥ÊñáÁ´†</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/post/linux-socket/">
        
        
            <div class="article-image">
                <img src="/post/linux-socket/cover.da226711957d5f215386b0d27e1212d2.png" 
                        width="6000" 
                        height="4000" 
                        loading="lazy"
                        alt="Featured image of post „ÄêLinux„Äësocket Â•óÊé•Â≠ó"
                        data-key="linux-socket" 
                        data-hash="md5-2iJnEZV9XyFThrDSfhIS0g==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">„ÄêLinux„Äësocket Â•óÊé•Â≠ó</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/linux-epoll/">
        
        
            <div class="article-image">
                <img src="/post/linux-epoll/cover.e6fa79041434c31cf9910eabaaa9c099.png" 
                        width="1024" 
                        height="576" 
                        loading="lazy"
                        alt="Featured image of post „ÄêLinux„ÄëIOÂ§öË∑ØÂ§çÁî® epoll"
                        data-key="linux-epoll" 
                        data-hash="md5-5vp5BBQ0wxz5kQ6rqqnAmQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">„ÄêLinux„ÄëIOÂ§öË∑ØÂ§çÁî® epoll</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="serenNan/serenNan.github.io"
    data-repo-id="R_kgDONieGHg"
    data-category="Announcements"
    data-category-id="DIC_kwDONieGHs4ClphA"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="light"
    data-lang="zh-CN"
    data-loading=""
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 serenNan
    </section>
    
    <section class="powerby">
        ‰ΩøÁî® <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> ÊûÑÂª∫ <br />
        ‰∏ªÈ¢ò <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> Áî± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> ËÆæËÆ°
    </section>
</footer>

<script>
    (function(u, c) {
      var d = document, t = 'script', o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function(e) { c(e); }); }
      s.parentNode.insertBefore(o, s);
    })('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js', function() {
      pangu.spacingPage();
    });
</script>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<style>
  @font-face {
    font-family: 'MapleMono2';
    src: url('/font/MapleMono2.ttf') format('truetype');
  }

  :root {
    --base-font-family: 'MapleMono2';
    --code-font-family: 'MapleMono2';
  }
</style>

<script src="https://npm.elemecdn.com/nprogress@0.2.0/nprogress.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://npm.elemecdn.com/nprogress@0.2.0/nprogress.css" crossorigin="anonymous" />
<script>
    NProgress.start();
    document.addEventListener("readystatechange", () => {
        if (document.readyState === "interactive") NProgress.inc(0.8);
        if (document.readyState === "complete") NProgress.done();
    });
</script>



<div id="particles-js"></div>
<script src="/background/particles.min.js"></script>
<script>
particlesJS.load('particles-js', '\/background\/particlesjs-config.json', function() {
console.log('particles.js loaded - callback');
});
</script>


<style>
  #particles-js {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }
</style>


<style>
    #backTopBtn {
        display: none;
        position: fixed;
        bottom: 5%;
        right: 24%;  
        z-index: 99;
        cursor: pointer;
        width: 30px;
        height: 30px;
        background-image: url('/icons/backTop.svg');  
        background-size: cover;  
    }
</style>

<script>
    

    function initScrollTop() {
        let rightSideBar = document.querySelector(".right-sidebar");
        if (!rightSideBar) {
            return;
        }
        
        let btn = document.createElement("div");
        btn.id = "backTopBtn";
        btn.onclick = backToTop;
        rightSideBar.appendChild(btn);
        
        window.onscroll = function() {
            
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                btn.style.display = "block";
            } else {
                btn.style.display = "none";
            }
        };
    }

    

    function backToTop(){
        window.scrollTo({ top: 0, behavior: "smooth" });
    }

    initScrollTop();
</script>


<script defer src="https://cn.vercount.one/js"></script>

<script>
    function showHideView() {
        
        let viewCounts = document.querySelectorAll("#viewCount");
        if (viewCounts) {
            
            let article =  document.querySelector(".article-page");
            if (!article) {
                viewCounts.forEach(ele => {
                    ele.style.display = 'none';
                });
            }
        }
    }
    
    showHideView();
</script>

          
        <div id="toggle-buttons">
  <button id="toggle-left-sidebar" aria-label="Toggle Left Sidebar"> &lt;- </button>
  <button id="toggle-right-sidebar" aria-label="Toggle Right Sidebar"> -> </button>
</div>
<script>
  
  document.getElementById('toggle-left-sidebar').addEventListener('click', function() {
    document.body.classList.toggle('left-sidebar-hidden');
    this.textContent = document.body.classList.contains('left-sidebar-hidden') ? '->' : '<-';
  });

  
  document.getElementById('toggle-right-sidebar').addEventListener('click', function() {
    document.body.classList.toggle('right-sidebar-hidden');
    this.textContent = document.body.classList.contains('right-sidebar-hidden') ? '<-' : '->';
  });
</script>


<script>

let lastClientX = 0;
document.addEventListener('mousemove', e => {
  const edgeThreshold = 50;
  const btnLeft = document.getElementById('toggle-left-sidebar');
  const btnRight = document.getElementById('toggle-right-sidebar');
  
  
  lastClientX = e.clientX;

  
  if (e.clientX < edgeThreshold) {
    btnLeft.style.opacity = '1';
    btnLeft.style.pointerEvents = 'auto';
  } else {
    btnLeft.style.opacity = '0';
    btnLeft.style.pointerEvents = 'none';
  }

  
  if (window.innerWidth - e.clientX < edgeThreshold) {
    btnRight.style.opacity = '1';
    btnRight.style.pointerEvents = 'auto';
  } else {
    btnRight.style.opacity = '0';
    btnRight.style.pointerEvents = 'none';
  }
});
</script>
       
    </body>
</html>
