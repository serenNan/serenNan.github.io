<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content="C++ 11ç‰¹æ€§å­¦ä¹ ">
<title>ã€C&#43;&#43;11ã€‘å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„ chrono åº“</title>

<link rel='canonical' href='https://serennan.github.io/post/cpp_chrono/'>

<link rel="stylesheet" href="/scss/style.min.a21e163e497b39cf2586bb0eca6f65b4f23566d6c48764f3b5d1174dfe44d0a7.css"><meta property='og:title' content="ã€C++11ã€‘å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„ chrono åº“">
<meta property='og:description' content="C++ 11ç‰¹æ€§å­¦ä¹ ">
<meta property='og:url' content='https://serennan.github.io/post/cpp_chrono/'>
<meta property='og:site_name' content='serenNan'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2025-03-26T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2025-03-31T10:36:17&#43;08:00'/><meta property='og:image' content='https://serennan.github.io/post/cpp_chrono/cover.png' />
<meta name="twitter:title" content="ã€C++11ã€‘å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„ chrono åº“">
<meta name="twitter:description" content="C++ 11ç‰¹æ€§å­¦ä¹ "><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://serennan.github.io/post/cpp_chrono/cover.png' />
    <link rel="shortcut icon" href="/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu_47dcc2efc37d0778.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸˆâ€â¬›</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">serenNan</a></h1>
            <h2 class="site-description">ä¸ªäººåšå®¢</h2>
        </div>
    </header><ol class="menu-social">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/450940909'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.0.0-beta2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) --><path d="M488.6 104.1C505.3 122.2 513 143.8 511.9 169.8V372.2C511.5 398.6 502.7 420.3 485.4 437.3C468.2 454.3 446.3 463.2 419.9 464H92.02C65.57 463.2 43.81 454.2 26.74 436.8C9.682 419.4 .7667 396.5 0 368.2V169.8C.7667 143.8 9.682 122.2 26.74 104.1C43.81 87.75 65.57 78.77 92.02 78H121.4L96.05 52.19C90.3 46.46 87.42 39.19 87.42 30.4C87.42 21.6 90.3 14.34 96.05 8.603C101.8 2.868 109.1 0 117.9 0C126.7 0 134 2.868 139.8 8.603L213.1 78H301.1L375.6 8.603C381.7 2.868 389.2 0 398 0C406.8 0 414.1 2.868 419.9 8.603C425.6 14.34 428.5 21.6 428.5 30.4C428.5 39.19 425.6 46.46 419.9 52.19L394.6 78L423.9 78C450.3 78.77 471.9 87.75 488.6 104.1H488.6zM449.8 173.8C449.4 164.2 446.1 156.4 439.1 150.3C433.9 144.2 425.1 140.9 416.4 140.5H96.05C86.46 140.9 78.6 144.2 72.47 150.3C66.33 156.4 63.07 164.2 62.69 173.8V368.2C62.69 377.4 65.95 385.2 72.47 391.7C78.99 398.2 86.85 401.5 96.05 401.5H416.4C425.6 401.5 433.4 398.2 439.7 391.7C446 385.2 449.4 377.4 449.8 368.2L449.8 173.8zM185.5 216.5C191.8 222.8 195.2 230.6 195.6 239.7V273C195.2 282.2 191.9 289.9 185.8 296.2C179.6 302.5 171.8 305.7 162.2 305.7C152.6 305.7 144.7 302.5 138.6 296.2C132.5 289.9 129.2 282.2 128.8 273V239.7C129.2 230.6 132.6 222.8 138.9 216.5C145.2 210.2 152.1 206.9 162.2 206.5C171.4 206.9 179.2 210.2 185.5 216.5H185.5zM377 216.5C383.3 222.8 386.7 230.6 387.1 239.7V273C386.7 282.2 383.4 289.9 377.3 296.2C371.2 302.5 363.3 305.7 353.7 305.7C344.1 305.7 336.3 302.5 330.1 296.2C323.1 289.9 320.7 282.2 320.4 273V239.7C320.7 230.6 324.1 222.8 330.4 216.5C336.7 210.2 344.5 206.9 353.7 206.5C362.9 206.9 370.7 210.2 377 216.5H377z"/></svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/serenNan'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="438.549px" height="438.549px" viewBox="0 0 438.549 438.549" style="enable-background:new 0 0 438.549 438.549;"
	 xml:space="preserve">
<g>
	<path d="M409.132,114.573c-19.608-33.596-46.205-60.194-79.798-79.8C295.736,15.166,259.057,5.365,219.271,5.365
		c-39.781,0-76.472,9.804-110.063,29.408c-33.596,19.605-60.192,46.204-79.8,79.8C9.803,148.168,0,184.854,0,224.63
		c0,47.78,13.94,90.745,41.827,128.906c27.884,38.164,63.906,64.572,108.063,79.227c5.14,0.954,8.945,0.283,11.419-1.996
		c2.475-2.282,3.711-5.14,3.711-8.562c0-0.571-0.049-5.708-0.144-15.417c-0.098-9.709-0.144-18.179-0.144-25.406l-6.567,1.136
		c-4.187,0.767-9.469,1.092-15.846,1c-6.374-0.089-12.991-0.757-19.842-1.999c-6.854-1.231-13.229-4.086-19.13-8.559
		c-5.898-4.473-10.085-10.328-12.56-17.556l-2.855-6.57c-1.903-4.374-4.899-9.233-8.992-14.559
		c-4.093-5.331-8.232-8.945-12.419-10.848l-1.999-1.431c-1.332-0.951-2.568-2.098-3.711-3.429c-1.142-1.331-1.997-2.663-2.568-3.997
		c-0.572-1.335-0.098-2.43,1.427-3.289c1.525-0.859,4.281-1.276,8.28-1.276l5.708,0.853c3.807,0.763,8.516,3.042,14.133,6.851
		c5.614,3.806,10.229,8.754,13.846,14.842c4.38,7.806,9.657,13.754,15.846,17.847c6.184,4.093,12.419,6.136,18.699,6.136
		c6.28,0,11.704-0.476,16.274-1.423c4.565-0.952,8.848-2.383,12.847-4.285c1.713-12.758,6.377-22.559,13.988-29.41
		c-10.848-1.14-20.601-2.857-29.264-5.14c-8.658-2.286-17.605-5.996-26.835-11.14c-9.235-5.137-16.896-11.516-22.985-19.126
		c-6.09-7.614-11.088-17.61-14.987-29.979c-3.901-12.374-5.852-26.648-5.852-42.826c0-23.035,7.52-42.637,22.557-58.817
		c-7.044-17.318-6.379-36.732,1.997-58.24c5.52-1.715,13.706-0.428,24.554,3.853c10.85,4.283,18.794,7.952,23.84,10.994
		c5.046,3.041,9.089,5.618,12.135,7.708c17.705-4.947,35.976-7.421,54.818-7.421s37.117,2.474,54.823,7.421l10.849-6.849
		c7.419-4.57,16.18-8.758,26.262-12.565c10.088-3.805,17.802-4.853,23.134-3.138c8.562,21.509,9.325,40.922,2.279,58.24
		c15.036,16.18,22.559,35.787,22.559,58.817c0,16.178-1.958,30.497-5.853,42.966c-3.9,12.471-8.941,22.457-15.125,29.979
		c-6.191,7.521-13.901,13.85-23.131,18.986c-9.232,5.14-18.182,8.85-26.84,11.136c-8.662,2.286-18.415,4.004-29.263,5.146
		c9.894,8.562,14.842,22.077,14.842,40.539v60.237c0,3.422,1.19,6.279,3.572,8.562c2.379,2.279,6.136,2.95,11.276,1.995
		c44.163-14.653,80.185-41.062,108.068-79.226c27.88-38.161,41.825-81.126,41.825-128.906
		C438.536,184.851,428.728,148.168,409.132,114.573z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>

                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='/category/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="2"> <path d="M9 4h3l2 2h5a2 2 0 0 1 2 2v7a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2"></path> <path d="M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h2"></path> </svg> 
                
                <span>åˆ†ç±»</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>é“¾æ¥</span>
            </a>
        </li>
        
        
        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        <li class="menu-bottom-section">
            <ol class="menu">

                
                    <li id="dark-mode-toggle">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                        <span>æš—è‰²æ¨¡å¼</span>
                    </li>
                
            </ol>
        </li>
    </ol>
</aside>


    <aside class="sidebar right-sidebar sticky">
        
            
                
<section class="widget archives">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



    </div>
    <h2 class="widget-title section-title">ç›®å½•</h2>
    <div class="widget--toc">
        <nav id="TableOfContents">
  <ol>
    <li><a href="#1-æ—¶é—´é—´éš”-duration">1. æ—¶é—´é—´éš” duration</a>
      <ol>
        <li><a href="#11-å¸¸ç”¨ç±»æˆå‘˜">1.1 å¸¸ç”¨ç±»æˆå‘˜</a></li>
        <li><a href="#12-ç±»çš„ä½¿ç”¨">1.2 ç±»çš„ä½¿ç”¨</a></li>
      </ol>
    </li>
    <li><a href="#2-æ—¶é—´ç‚¹-time-point">2. æ—¶é—´ç‚¹ time point</a></li>
    <li><a href="#3-æ—¶é’Ÿclocks">3. æ—¶é’Ÿclocks</a>
      <ol>
        <li><a href="#31-system_clock">3.1 <code>system_clock</code></a></li>
        <li><a href="#32-steady_clock">3.2 steady_clock</a></li>
        <li><a href="#33-high_resolution_clock">3.3 high_resolution_clock</a></li>
      </ol>
    </li>
    <li><a href="#4-è½¬æ¢å‡½æ•°">4. è½¬æ¢å‡½æ•°</a>
      <ol>
        <li><a href="#41-duration_cast">4.1 duration_cast</a></li>
        <li><a href="#42-time_point_cast">4.2 time_point_cast</a></li>
      </ol>
    </li>
  </ol>
</nav>
    </div>
</section>


            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article ">
    
        <header class="article-header">
        <div class="article-image">
            <a href="/post/cpp_chrono/">
                <img src="/post/cpp_chrono/cover.png"
                        
                        width="1024" 
                        height="576" 
                        loading="lazy"
                        alt="Featured image of post ã€C&#43;&#43;11ã€‘å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„ chrono åº“" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/c&#43;&#43;/" style="background-color: #2a9d8f; color: #fff;">
                C&#43;&#43;
            </a>
        
            <a href="/categories/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="background-color: #B72727; color: #fff;">
                å¤šçº¿ç¨‹
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/cpp_chrono/">ã€C&#43;&#43;11ã€‘å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„ chrono åº“</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            C&#43;&#43; 11ç‰¹æ€§å­¦ä¹ 
        </h3>
        
    </div>

    
    
    
    

    
    <footer class="article-time">
        
        
        
        
            
            
        

        
        
            
            
        

        
        
            
            
        

        
        
            
            
                <div class="time-element">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                    <time>2025-03-26</time>
                </div>
            
        
            <span class="divider">|</span>
            
                <div class="time-element">
                    <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-word"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2" /><path d="M9 12l1.333 5l1.667 -4l1.667 4l1.333 -5" /></svg>
                    <span>5730 å­—</span>
                </div>
            
        
            <span class="divider">|</span>
            
                <div class="time-element">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" stroke-width="2"> <path d="M8 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h5.697"></path> <path d="M18 14v4h4"></path> <path d="M18 11v-4a2 2 0 0 0 -2 -2h-2"></path> <path d="M8 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path> <path d="M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"></path> <path d="M8 11h4"></path> <path d="M8 15h3"></path> </svg> 
                    <time>2025-03-31 10:36</time>
                </div>
            
        
        
        <div id="viewCount">
            <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-eye"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" /><path d="M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6" /></svg>
            <time class="article-time--reading">
                
                <span id="vercount_value_page_pv"> </span>æ¬¡
            </time>
        </div>
    </footer>
    

    
</div>
</header>
    
    <section class="article-content">
    
    
    <h1 id="c-çº¿ç¨‹">C++ çº¿ç¨‹
</h1><p>ä¸ªäººå­¦ä¹ ç¬”è®°ï¼Œå‚ç…§å¤§ä¸™è€å¸ˆçš„åšå®¢ï¼š<a class="link" href="https://subingwen.cn/"  target="_blank" rel="noopener"
    >çˆ±ç¼–ç¨‹çš„å¤§ä¸™</a></p>
<p>C++11ä¸­æä¾›äº†æ—¥æœŸå’Œæ—¶é—´ç›¸å…³çš„åº“chronoï¼Œé€šè¿‡chronoåº“å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¤„ç†æ—¥æœŸå’Œæ—¶é—´ï¼Œä¸ºç¨‹åºçš„å¼€å‘æä¾›äº†ä¾¿åˆ©ã€‚chronoåº“ä¸»è¦åŒ…å«ä¸‰ç§ç±»å‹çš„ç±»ï¼šæ—¶é—´é—´éš”durationã€æ—¶é’Ÿclocksã€æ—¶é—´ç‚¹time pointã€‚</p>
<hr>
<h2 id="1-æ—¶é—´é—´éš”-duration">1. æ—¶é—´é—´éš” duration
</h2><h3 id="11-å¸¸ç”¨ç±»æˆå‘˜">1.1 å¸¸ç”¨ç±»æˆå‘˜
</h3><p><code>duration</code>è¡¨ç¤ºä¸€æ®µæ—¶é—´é—´éš”ï¼Œç”¨æ¥è®°å½•æ—¶é—´é•¿åº¦ï¼Œå¯ä»¥è¡¨ç¤ºå‡ ç§’ã€å‡ åˆ†é’Ÿã€å‡ ä¸ªå°æ—¶çš„æ—¶é—´é—´éš”ã€‚durationçš„åŸå‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// å®šä¹‰äºå¤´æ–‡ä»¶ &lt;chrono&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Rep</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Period</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">ratio</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">duration</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>Rep</code>ï¼šè¿™æ˜¯ä¸€ä¸ªæ•°å€¼ç±»å‹ï¼Œè¡¨ç¤ºæ—¶é’Ÿæ•°ï¼ˆå‘¨æœŸï¼‰çš„ç±»å‹ï¼ˆé»˜è®¤ä¸ºæ•´å½¢ï¼‰ã€‚è‹¥ <code>Rep</code> æ˜¯æµ®ç‚¹æ•°ï¼Œåˆ™ duration èƒ½ä½¿ç”¨å°æ•°æè¿°æ—¶é’Ÿå‘¨æœŸçš„æ•°ç›®ã€‚</p>
</li>
<li>
<p><code>Period</code>ï¼šè¡¨ç¤ºæ—¶é’Ÿçš„å‘¨æœŸï¼Œå®ƒçš„åŸå‹å¦‚ä¸‹ï¼š</p>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// å®šä¹‰äºå¤´æ–‡ä»¶ &lt;ratio&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">intmax_t</span> <span class="n">Num</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">intmax_t</span> <span class="n">Denom</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">ratio</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>ratio</code> ç±»è¡¨ç¤º<strong>æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸçš„ç§’æ•°</strong>ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªæ¨¡æ¿å‚æ•° <code>Num</code> ä»£è¡¨åˆ†å­ï¼Œ <code>Denom</code> ä»£è¡¨åˆ†æ¯ï¼Œè¯¥åˆ†æ¯å€¼é»˜è®¤ä¸º 1 ï¼Œå› æ­¤ï¼Œ<strong>ratioä»£è¡¨çš„æ˜¯ä¸€ä¸ªåˆ†å­é™¤ä»¥åˆ†æ¯çš„æ•°å€¼</strong>ï¼Œæ¯”å¦‚ï¼šratio&lt;2&gt;ä»£è¡¨ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸæ˜¯2ç§’ï¼Œratio&lt;60&gt;ä»£è¡¨ä¸€åˆ†é’Ÿï¼Œratio&lt;60x60&gt;ä»£è¡¨ä¸€ä¸ªå°æ—¶ï¼Œratio&lt;60x60x24&gt;ä»£è¡¨ä¸€å¤©ã€‚è€Œratio&lt;1,1000&gt;ä»£è¡¨çš„æ˜¯1/1000ç§’ï¼Œä¹Ÿå°±æ˜¯1æ¯«ç§’ï¼Œratio&lt;1,1000000&gt;ä»£è¡¨ä¸€å¾®ç§’ï¼Œratio&lt;1,1000000000&gt;ä»£è¡¨ä¸€çº³ç§’ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œåœ¨æ ‡å‡†åº“ä¸­å®šä¹‰äº†ä¸€äº›å¸¸ç”¨çš„æ—¶é—´é—´éš”ï¼Œæ¯”å¦‚ï¼šæ—¶ã€åˆ†ã€ç§’ã€æ¯«ç§’ã€å¾®ç§’ã€çº³ç§’ï¼Œå®ƒä»¬éƒ½ä½äºchronoå‘½åç©ºé—´ä¸‹ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<p>çº³ç§’ï¼šstd::chrono::nanoseconds<br>
å¾®ç§’ï¼šstd::chrono::microseconds<br>
æ¯«ç§’ï¼šstd::chrono::milliseconds<br>
ç§’ï¼š std::chrono::seconds<br>
åˆ†é’Ÿï¼šstd::chrono::minutes<br>
å°æ—¶ï¼šstd::chrono::hours<br></p>
<p>durationç±»çš„æ„é€ å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// 1. æ‹·è´æ„é€ å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">duration</span><span class="p">(</span> <span class="k">const</span> <span class="n">duration</span><span class="o">&amp;</span> <span class="p">)</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 2. é€šè¿‡æŒ‡å®šæ—¶é’Ÿå‘¨æœŸçš„ç±»å‹æ¥æ„é€ å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">Rep2</span> <span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="k">explicit</span> <span class="n">duration</span><span class="p">(</span> <span class="k">const</span> <span class="n">Rep2</span><span class="o">&amp;</span> <span class="n">r</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 3. é€šè¿‡æŒ‡å®šæ—¶é’Ÿå‘¨æœŸç±»å‹ï¼Œå’Œæ—¶é’Ÿå‘¨æœŸé•¿åº¦æ¥æ„é€ å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">Rep2</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Period2</span> <span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">duration</span><span class="p">(</span> <span class="k">const</span> <span class="n">duration</span><span class="o">&lt;</span><span class="n">Rep2</span><span class="p">,</span><span class="n">Period2</span><span class="o">&gt;&amp;</span> <span class="n">d</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„è¿›è¡Œdurationå¯¹è±¡ä¹‹é—´çš„æ“ä½œï¼Œç±»å†…éƒ¨è¿›è¡Œäº†æ“ä½œç¬¦é‡è½½ã€‚</p>
<p>durationç±»è¿˜æä¾›äº†è·å–æ—¶é—´é—´éš”çš„æ—¶é’Ÿå‘¨æœŸæ•°çš„æ–¹æ³• <code>count()</code> ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">rep</span> <span class="nf">count</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="12-ç±»çš„ä½¿ç”¨">1.2 ç±»çš„ä½¿ç”¨
</h3><p>é€šè¿‡æ„é€ å‡½æ•°æ„é€ äº‹ä»¶é—´éš”å¯¹è±¡ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">chrono</span><span class="o">::</span><span class="n">hours</span> <span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>                          <span class="c1">// ä¸€å°æ—¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span> <span class="n">ms</span><span class="p">{</span> <span class="mi">3</span> <span class="p">};</span>                <span class="c1">// 3 æ¯«ç§’
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">ratio</span><span class="o">&lt;</span><span class="mi">1000</span><span class="o">&gt;&gt;</span> <span class="n">ks</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>    <span class="c1">// 3000 ç§’
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// chrono::duration&lt;int, ratio&lt;1000&gt;&gt; d3(3.5);  // error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span> <span class="n">dd</span><span class="p">(</span><span class="mf">6.6</span><span class="p">);</span>               <span class="c1">// 6.6 ç§’
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ä½¿ç”¨å°æ•°è¡¨ç¤ºæ—¶é’Ÿå‘¨æœŸçš„æ¬¡æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ratio</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="o">&gt;&gt;</span> <span class="n">hz</span><span class="p">(</span><span class="mf">3.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>h(1)</code>æ—¶é’Ÿå‘¨æœŸä¸º1å°æ—¶ï¼Œå…±æœ‰1ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæ‰€ä»¥hè¡¨ç¤ºçš„æ—¶é—´é—´éš”ä¸º1å°æ—¶</li>
<li><code>ms(3)</code>æ—¶é’Ÿå‘¨æœŸä¸º1æ¯«ç§’ï¼Œå…±æœ‰3ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæ‰€ä»¥msè¡¨ç¤ºçš„æ—¶é—´é—´éš”ä¸º3æ¯«ç§’</li>
<li><code>ks(3)</code>æ—¶é’Ÿå‘¨æœŸä¸º1000ç§’ï¼Œä¸€å…±æœ‰ä¸‰ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæ‰€ä»¥ksè¡¨ç¤ºçš„æ—¶é—´é—´éš”ä¸º3000ç§’</li>
<li><code>d3(3.5)</code>æ—¶é’Ÿå‘¨æœŸä¸º1000ç§’ï¼Œæ—¶é’Ÿå‘¨æœŸæ•°é‡åªèƒ½ç”¨æ•´å½¢æ¥è¡¨ç¤ºï¼Œä½†æ˜¯æ­¤å¤„æŒ‡å®šçš„æ˜¯æµ®ç‚¹æ•°ï¼Œå› æ­¤è¯­æ³•é”™è¯¯</li>
<li><code>dd(6.6)</code>æ—¶é’Ÿå‘¨æœŸä¸ºé»˜è®¤çš„1ç§’ï¼Œå…±æœ‰6.6ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæ‰€ä»¥ddè¡¨ç¤ºçš„æ—¶é—´é—´éš”ä¸º6.6ç§’</li>
<li><code>hz(3.5)</code>æ—¶é’Ÿå‘¨æœŸä¸º1/30ç§’ï¼Œå…±æœ‰3.5ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæ‰€ä»¥hzè¡¨ç¤ºçš„æ—¶é—´é—´éš”ä¸º1/30*3.5ç§’</li>
</ul>
<p>chronoåº“ä¸­æ ¹æ®durationç±»å°è£…äº†ä¸åŒé•¿åº¦çš„æ—¶é’Ÿå‘¨æœŸï¼ˆä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼‰ï¼ŒåŸºäºè¿™ä¸ªæ—¶é’Ÿå‘¨æœŸå†è¿›è¡Œå‘¨æœŸæ¬¡æ•°çš„è®¾ç½®å°±å¯ä»¥å¾—åˆ°æ€»çš„æ—¶é—´é—´éš”äº†ï¼ˆæ—¶é’Ÿå‘¨æœŸ * å‘¨æœŸæ¬¡æ•° = æ€»çš„æ—¶é—´é—´éš”ï¼‰ã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span> <span class="n">ms</span><span class="p">{</span><span class="mi">3</span><span class="p">};</span>         <span class="c1">// 3 æ¯«ç§’
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">microseconds</span> <span class="n">us</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">ms</span><span class="p">;</span>     <span class="c1">// 6000 å¾®ç§’
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// æ—¶é—´é—´éš”å‘¨æœŸä¸º 1/30 ç§’
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">ratio</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="o">&gt;&gt;</span> <span class="n">hz</span><span class="p">(</span><span class="mf">3.5</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span>  <span class="s">&#34;3 ms duration has &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">ms</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; ticks</span><span class="se">\n</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="o">&lt;&lt;</span>  <span class="s">&#34;6000 us duration has &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">us</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; ticks</span><span class="se">\n</span><span class="s">&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="o">&lt;&lt;</span>  <span class="s">&#34;3.5 hz duration has &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">hz</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; ticks</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>       
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="mi">3</span> <span class="n">ms</span> <span class="n">duration</span> <span class="n">has</span> <span class="mi">3</span> <span class="n">ticks</span>
</span></span><span class="line"><span class="cl"><span class="mi">6000</span> <span class="n">us</span> <span class="n">duration</span> <span class="n">has</span> <span class="mi">6000</span> <span class="n">ticks</span>
</span></span><span class="line"><span class="cl"><span class="mf">3.5</span> <span class="n">hz</span> <span class="n">duration</span> <span class="n">has</span> <span class="mf">3.5</span> <span class="n">ticks</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>ms</code>æ—¶é—´å•ä½ä¸ºæ¯«ç§’ï¼Œåˆå§‹åŒ–æ“ä½œ<code>ms{3}</code>è¡¨ç¤ºæ—¶é—´é—´éš”ä¸º<code>3</code>æ¯«ç§’ï¼Œä¸€å…±æœ‰3ä¸ªæ—¶é—´å‘¨æœŸï¼Œæ¯ä¸ªå‘¨æœŸä¸º1æ¯«ç§’</li>
<li><code>us</code>æ—¶é—´å•ä½ä¸ºå¾®ç§’ï¼Œåˆå§‹åŒ–æ“ä½œ<code>2*ms</code>è¡¨ç¤ºæ—¶é—´é—´éš”ä¸º<code>6000</code>å¾®ç§’ï¼Œä¸€å…±æœ‰6000ä¸ªæ—¶é—´å‘¨æœŸï¼Œæ¯ä¸ªå‘¨æœŸä¸º1å¾®ç§’</li>
<li><code>hz</code>æ—¶é—´å•ä½ä¸ºç§’ï¼Œåˆå§‹åŒ–æ“ä½œ<code>hz(3.5)</code>è¡¨ç¤ºæ—¶é—´é—´éš”ä¸º<code>1/30*3.5</code>ç§’ï¼Œä¸€å…±æœ‰3.5ä¸ªæ—¶é—´å‘¨æœŸï¼Œæ¯ä¸ªå‘¨æœŸä¸º1/30ç§’</li>
</ul>
<p>ç”±äºåœ¨durationç±»å†…éƒ¨åšäº†æ“ä½œç¬¦é‡è½½ï¼Œå› æ­¤æ—¶é—´é—´éš”ä¹‹é—´å¯ä»¥ç›´æ¥è¿›è¡Œç®—æœ¯è¿ç®—ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦è®¡ç®—ä¸¤ä¸ªæ—¶é—´é—´éš”çš„å·®å€¼ï¼Œå°±å¯ä»¥åœ¨ä»£ç ä¸­åšå¦‚ä¸‹å¤„ç†ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">chrono</span><span class="o">::</span><span class="n">minutes</span> <span class="n">t1</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span> <span class="n">t2</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">chrono</span><span class="o">::</span><span class="n">seconds</span> <span class="n">t3</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">-</span> <span class="n">t2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">t3</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; second&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¨‹åºè¾“å‡ºçš„ç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="mi">540</span> <span class="n">second</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ä¸Šé¢çš„æµ‹è¯•ç¨‹åºä¸­ï¼Œt1ä»£è¡¨10åˆ†é’Ÿï¼Œt2ä»£è¡¨60ç§’ï¼Œt3æ˜¯t1å‡å»t2ï¼Œä¹Ÿå°±æ˜¯60*10-60=540ï¼Œè¿™ä¸ª540è¡¨ç¤ºçš„æ—¶é’Ÿå‘¨æœŸï¼Œæ¯ä¸ªæ—¶é’Ÿå‘¨æœŸæ˜¯1ç§’ï¼Œå› æ­¤ä¸¤ä¸ªæ—¶é—´é—´éš”ä¹‹é—´çš„å·®å€¼ä¸º540ç§’ã€‚</p>

<div class="notice notice-info" >
    <div class="notice-title"></div><p>æ³¨æ„äº‹é¡¹ï¼šdurationçš„åŠ å‡è¿ç®—æœ‰ä¸€å®šçš„è§„åˆ™ï¼Œå½“ä¸¤ä¸ªdurationæ—¶é’Ÿå‘¨æœŸä¸ç›¸åŒçš„æ—¶å€™ï¼Œä¼šå…ˆç»Ÿä¸€æˆä¸€ç§æ—¶é’Ÿï¼Œç„¶åå†è¿›è¡Œç®—æœ¯è¿ç®—ï¼Œç»Ÿä¸€çš„è§„åˆ™å¦‚ä¸‹ï¼šå‡è®¾æœ‰ratio&lt;x1,y1&gt; å’Œ ratio&lt;x2,y2&gt;ä¸¤ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œé¦–å…ˆéœ€è¦æ±‚å‡ºx1ï¼Œx2çš„æœ€å¤§å…¬çº¦æ•°Xï¼Œç„¶åæ±‚å‡ºy1ï¼Œy2çš„æœ€å°å…¬å€æ•°Yï¼Œç»Ÿä¸€ä¹‹åçš„æ—¶é’Ÿå‘¨æœŸratioä¸ºratio&lt;X,Y&gt;ã€‚</p></div>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="n">ratio</span><span class="o">&lt;</span><span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="o">&gt;&gt;</span> <span class="n">d1</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="n">ratio</span><span class="o">&lt;</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="o">&gt;&gt;</span> <span class="n">d2</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// d1 å’Œ d2 ç»Ÿä¸€ä¹‹åçš„æ—¶é’Ÿå‘¨æœŸ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="n">ratio</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">,</span> <span class="mi">35</span><span class="o">&gt;&gt;</span> <span class="n">d3</span> <span class="o">=</span> <span class="n">d1</span> <span class="o">-</span> <span class="n">d2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹äºåˆ†å­6,ã€9æœ€å¤§å…¬çº¦æ•°ä¸º3ï¼Œå¯¹äºåˆ†æ¯7ã€5æœ€å°å…¬å€æ•°ä¸º35ï¼Œå› æ­¤æ¨å¯¼å‡ºçš„æ—¶é’Ÿå‘¨æœŸä¸º<code>ratio&lt;3,35&gt;</code></p>
<hr>
<h2 id="2-æ—¶é—´ç‚¹-time-point">2. æ—¶é—´ç‚¹ time point
</h2><p>chronoåº“ä¸­æä¾›äº†ä¸€ä¸ªè¡¨ç¤ºæ—¶é—´ç‚¹çš„ç±»time_pointï¼Œè¯¥ç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// å®šä¹‰äºå¤´æ–‡ä»¶ &lt;chrono&gt;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Clock</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Duration</span> <span class="o">=</span> <span class="k">typename</span> <span class="n">Clock</span><span class="o">::</span><span class="n">duration</span>
</span></span><span class="line"><span class="cl"><span class="o">&gt;</span> <span class="k">class</span> <span class="nc">time_point</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒè¢«å®ç°æˆå¦‚åŒå­˜å‚¨ä¸€ä¸ª Duration ç±»å‹çš„è‡ª Clock çš„çºªå…ƒèµ·å§‹å¼€å§‹çš„æ—¶é—´é—´éš”çš„å€¼ï¼Œé€šè¿‡è¿™ä¸ªç±»æœ€ç»ˆå¯ä»¥å¾—åˆ°æ—¶é—´ä¸­çš„æŸä¸€ä¸ªæ—¶é—´ç‚¹ã€‚</p>
<ul>
<li>Clockï¼šæ­¤æ—¶é—´ç‚¹åœ¨æ­¤æ—¶é’Ÿä¸Šè®¡é‡</li>
<li>Durationï¼šç”¨äºè®¡é‡ä»çºªå…ƒèµ·æ—¶é—´çš„ std::chrono::duration ç±»å‹</li>
</ul>
<p><code>time_point</code>ç±»çš„æ„é€ å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// 1. æ„é€ ä¸€ä¸ªä»¥æ–°çºªå…ƒ(epochï¼Œå³ï¼š1970.1.1)ä½œä¸ºå€¼çš„å¯¹è±¡ï¼Œéœ€è¦å’Œæ—¶é’Ÿç±»ä¸€èµ·ä½¿ç”¨ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨è¯¥æ— å‚æ„é€ å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">time_point</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 2. æ„é€ ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºä¸€ä¸ªæ—¶é—´ç‚¹ï¼Œå…¶ä¸­dçš„æŒç»­æ—¶é—´ä»epochå¼€å§‹ï¼Œéœ€è¦å’Œæ—¶é’Ÿç±»ä¸€èµ·ä½¿ç”¨ï¼Œä¸èƒ½å•ç‹¬ä½¿ç”¨è¯¥æ„é€ å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">explicit</span> <span class="nf">time_point</span><span class="p">(</span> <span class="k">const</span> <span class="n">duration</span><span class="o">&amp;</span> <span class="n">d</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// 3. æ‹·è´æ„é€ å‡½æ•°ï¼Œæ„é€ ä¸tç›¸åŒæ—¶é—´ç‚¹çš„å¯¹è±¡ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦æŒ‡å®šæ¨¡æ¿å‚æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">template</span><span class="o">&lt;</span> <span class="k">class</span> <span class="nc">Duration2</span> <span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">time_point</span><span class="p">(</span> <span class="k">const</span> <span class="n">time_point</span><span class="o">&lt;</span><span class="n">Clock</span><span class="p">,</span><span class="n">Duration2</span><span class="o">&gt;&amp;</span> <span class="n">t</span> <span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨è¿™ä¸ªç±»ä¸­é™¤äº†æ„é€ å‡½æ•°è¿˜æä¾›äº†å¦å¤–ä¸€ä¸ª<code>time_since_epoch()</code>å‡½æ•°ï¼Œç”¨æ¥è·å¾—1970å¹´1æœˆ1æ—¥åˆ°time_pointå¯¹è±¡ä¸­è®°å½•çš„æ—¶é—´ç»è¿‡çš„æ—¶é—´é—´éš”ï¼ˆdurationï¼‰ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">duration</span> <span class="nf">time_since_epoch</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é™¤æ­¤ä¹‹å¤–ï¼Œæ—¶é—´ç‚¹<code>time_point</code>å¯¹è±¡å’Œæ—¶é—´æ®µå¯¹è±¡<code>duration</code>ä¹‹é—´è¿˜æ”¯æŒç›´æ¥è¿›è¡Œç®—æœ¯è¿ç®—ï¼ˆå³åŠ å‡è¿ç®—ï¼‰ã€‚</p>
<p>ç”±äºè¯¥æ—¶é—´ç‚¹ç±»ç»å¸¸å’Œä¸‹é¢è¦ä»‹ç»çš„æ—¶é’Ÿç±»ä¸€èµ·ä½¿ç”¨ï¼Œæ‰€ä»¥åœ¨æ­¤å…ˆä¸ä¸¾ä¾‹ï¼Œåœ¨æ—¶é’Ÿç±»çš„ç¤ºä¾‹ä»£ç ä¸­ä¼šæ¶‰åŠåˆ°æ—¶é—´ç‚¹ç±»çš„ä½¿ç”¨ï¼Œåˆ°æ­¤ä¸ºæ­¢åªéœ€è¦ææ˜ç™½æ—¶é—´ç‚¹ç±»çš„æä¾›çš„è¿™å‡ ä¸ªå‡½æ•°çš„ä½œç”¨å°±å¯ä»¥äº†ã€‚</p>
<hr>
<h2 id="3-æ—¶é’Ÿclocks">3. æ—¶é’Ÿclocks
</h2><p><code>chrono</code>åº“ä¸­æä¾›äº†è·å–å½“å‰çš„ç³»ç»Ÿæ—¶é—´çš„æ—¶é’Ÿç±»ï¼ŒåŒ…å«çš„æ—¶é’Ÿä¸€å…±æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li><code>system_clock</code>ï¼šç³»ç»Ÿçš„æ—¶é’Ÿï¼Œç³»ç»Ÿçš„æ—¶é’Ÿå¯ä»¥ä¿®æ”¹ï¼Œç”šè‡³å¯ä»¥ç½‘ç»œå¯¹æ—¶ï¼Œå› æ­¤ä½¿ç”¨ç³»ç»Ÿæ—¶é—´è®¡ç®—æ—¶é—´å·®å¯èƒ½ä¸å‡†ã€‚</li>
<li><code>steady_clock</code>ï¼šæ˜¯å›ºå®šçš„æ—¶é’Ÿï¼Œç›¸å½“äºç§’è¡¨ã€‚å¼€å§‹è®¡æ—¶åï¼Œæ—¶é—´åªä¼šå¢é•¿å¹¶ä¸”ä¸èƒ½ä¿®æ”¹ï¼Œ<strong>é€‚åˆç”¨äºè®°å½•ç¨‹åºè€—æ—¶</strong></li>
<li><code>high_resolution_clock</code>ï¼šå’Œæ—¶é’Ÿç±»<code> steady_clock</code> æ˜¯ç­‰ä»·çš„ï¼ˆæ˜¯å®ƒçš„åˆ«åï¼‰</li>
</ul>
<p>åœ¨è¿™äº›æ—¶é’Ÿç±»çš„å†…éƒ¨æœ‰<code>time_point</code>ã€<code>duration</code>ã€<code>Rep</code>ã€<code>Period</code>ç­‰ä¿¡æ¯ï¼ŒåŸºäºè¿™äº›ä¿¡æ¯æ¥è·å–å½“å‰æ—¶é—´ï¼Œä»¥åŠå®ç°<code>time_t</code>å’Œ<code>time_point</code>ä¹‹é—´çš„ç›¸äº’è½¬æ¢ã€‚</p>
<div class="table-wrapper"><table>
  <thead>
      <tr>
          <th>æ—¶é’Ÿç±»æˆå‘˜ç±»å‹</th>
          <th>æè¿°</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>rep</code></td>
          <td>è¡¨ç¤ºæ—¶é’Ÿå‘¨æœŸæ¬¡æ•°çš„æœ‰ç¬¦å·ç®—æœ¯ç±»å‹</td>
      </tr>
      <tr>
          <td><code>period</code></td>
          <td>è¡¨ç¤ºæ—¶é’Ÿè®¡æ¬¡å‘¨æœŸçš„ <code>std::ratio</code> ç±»å‹</td>
      </tr>
      <tr>
          <td><code>duration</code></td>
          <td>æ—¶é—´é—´éš”ï¼Œå¯ä»¥è¡¨ç¤ºè´Ÿæ—¶é•¿</td>
      </tr>
      <tr>
          <td><code>time_point</code></td>
          <td>è¡¨ç¤ºåœ¨å½“å‰æ—¶é’Ÿé‡Œè¾¹è®°å½•çš„æ—¶é—´ç‚¹</td>
      </tr>
  </tbody>
</table></div>
<p>åœ¨ä½¿ç”¨chronoæä¾›çš„æ—¶é’Ÿç±»çš„æ—¶å€™ï¼Œä¸éœ€è¦åˆ›å»ºç±»å¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨ç±»çš„é™æ€æ–¹æ³•å°±å¯ä»¥å¾—åˆ°æƒ³è¦çš„æ—¶é—´äº†ã€‚</p>
<h3 id="31-system_clock">3.1 <code>system_clock</code>
</h3><ul>
<li><code>system_clock</code> æ˜¯ä¸€ä¸ªç³»ç»ŸèŒƒå›´çš„å®æ—¶æ—¶é’Ÿã€‚å®ƒæä¾›äº†å¯¹å½“å‰æ—¶é—´ç‚¹ <code>time_point</code> çš„è®¿é—®ï¼Œå°†å¾—åˆ°çš„æ—¶é—´ç‚¹è½¬æ¢ä¸º <code>time_t</code> ç±»å‹çš„æ—¶é—´å¯¹è±¡ï¼Œå°±å¯ä»¥åŸºäºè¿™ä¸ªæ—¶é—´å¯¹è±¡è·å–å½“å‰çš„æ—¶é—´ä¿¡æ¯ã€‚</li>
</ul>
<p><code>system_clock</code> çš„åº•å±‚æºç å®šä¹‰ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">system_clock</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span> <span class="c1">// wraps GetSystemTimePreciseAsFileTime/GetSystemTimeAsFileTime
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">using</span> <span class="n">rep</span> <span class="o">=</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">period</span> <span class="o">=</span> <span class="n">ratio</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10&#39;000&#39;000</span><span class="o">&gt;</span><span class="p">;</span> <span class="c1">// 100 nanoseconds
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">using</span> <span class="n">duration</span> <span class="o">=</span> <span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="n">rep</span><span class="p">,</span> <span class="n">period</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">time_point</span> <span class="o">=</span> <span class="n">chrono</span><span class="o">::</span><span class="n">time_point</span><span class="o">&lt;</span><span class="n">system_clock</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">bool</span> <span class="n">is_steady</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">_NODISCARD</span> <span class="k">static</span> <span class="n">time_point</span> <span class="nf">now</span><span class="p">()</span> <span class="k">noexcept</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="c1">// get current time
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">time_point</span><span class="p">(</span><span class="n">duration</span><span class="p">(</span><span class="n">_Xtime_get_ticks</span><span class="p">()));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">_NODISCARD</span> <span class="k">static</span> <span class="n">__time64_t</span> <span class="nf">to_time_t</span><span class="p">(</span><span class="k">const</span> <span class="n">time_point</span> <span class="o">&amp;</span><span class="n">_Time</span><span class="p">)</span> <span class="k">noexcept</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="c1">// convert to __time64_t
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">seconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_Time</span><span class="p">.</span><span class="n">time_since_epoch</span><span class="p">()).</span><span class="n">count</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">_NODISCARD</span> <span class="k">static</span> <span class="n">time_point</span> <span class="nf">from_time_t</span><span class="p">(</span><span class="n">__time64_t</span> <span class="n">_Tm</span><span class="p">)</span> <span class="k">noexcept</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="c1">// convert from __time64_t
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="n">time_point</span><span class="p">{</span><span class="n">seconds</span><span class="p">{</span><span class="n">_Tm</span><span class="p">}};</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä»¥ä¸Šæºç å¯ä»¥äº†è§£åˆ°åœ¨<code>system_clock</code>ç±»ä¸­çš„ä¸€äº›ç»†èŠ‚ä¿¡æ¯ï¼š</p>
<ul>
<li><code>rep</code>ï¼šæ—¶é’Ÿå‘¨æœŸæ¬¡æ•°æ˜¯é€šè¿‡æ•´å½¢æ¥è®°å½•çš„<code>long long</code></li>
<li><code>period</code>ï¼šä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸæ˜¯100çº³ç§’<code>ratio&lt;1, 10'000'000&gt;</code></li>
<li><code>duration</code>ï¼šæ—¶é—´é—´éš”ä¸º<code>rep * period</code>çº³ç§’<code>chrono::duration&lt;rep, period&gt;</code></li>
<li><code>time_point</code>ï¼šæ—¶é—´ç‚¹é€šè¿‡ç³»ç»Ÿæ—¶é’Ÿåšäº†åˆå§‹åŒ–<code>chrono::time_point&lt;system_clock&gt;</code>ï¼Œé‡Œé¢è®°å½•äº†æ–°çºªå…ƒæ—¶é—´ç‚¹</li>
</ul>
<p>å¦å¤–è¿˜å¯ä»¥çœ‹åˆ°<code>system_clock</code>ç±»ä¸€å…±æä¾›äº†ä¸‰ä¸ªé™æ€æˆå‘˜å‡½æ•°ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">// è¿”å›è¡¨ç¤ºå½“å‰æ—¶é—´çš„æ—¶é—´ç‚¹ã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">time_point</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="k">noexcept</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å°† time_point æ—¶é—´ç‚¹ç±»å‹è½¬æ¢ä¸º std::time_t ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">time_t</span> <span class="n">to_time_t</span><span class="p">(</span> <span class="k">const</span> <span class="n">time_point</span><span class="o">&amp;</span> <span class="n">t</span> <span class="p">)</span> <span class="k">noexcept</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å°† std::time_t ç±»å‹è½¬æ¢ä¸º time_point æ—¶é—´ç‚¹ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">from_time_t</span><span class="p">(</span> <span class="n">std</span><span class="o">::</span><span class="n">time_t</span> <span class="n">t</span> <span class="p">)</span> <span class="k">noexcept</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¾‹å¦‚ï¼Œè¦è·å–å½“å‰çš„ç³»ç»Ÿæ—¶é—´ï¼Œå¹¶ä¸”éœ€è¦å°†å…¶ä»¥èƒ½å¤Ÿè¯†åˆ«çš„æ–¹å¼æ‰“å°å‡ºæ¥ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ–°çºªå…ƒ1970.1.1æ—¶é—´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">system_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">epoch</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">duration</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">ratio</span><span class="o">&lt;</span><span class="mi">60</span><span class="o">*</span><span class="mi">60</span><span class="o">*</span><span class="mi">24</span><span class="o">&gt;&gt;</span> <span class="n">day</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ–°çºªå…ƒ1970.1.1æ—¶é—´ + 1å¤©
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">system_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">ppt</span><span class="p">(</span><span class="n">day</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">dday</span> <span class="o">=</span> <span class="n">duration</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">ratio</span><span class="o">&lt;</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="o">&gt;&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// æ–°çºªå…ƒ1970.1.1æ—¶é—´ + 10å¤©
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">time_point</span><span class="o">&lt;</span><span class="n">system_clock</span><span class="p">,</span> <span class="n">dday</span><span class="o">&gt;</span> <span class="n">t</span><span class="p">(</span><span class="n">dday</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ç³»ç»Ÿå½“å‰æ—¶é—´
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">system_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">today</span> <span class="o">=</span> <span class="n">system_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="c1">// è½¬æ¢ä¸ºtime_tæ—¶é—´ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">time_t</span> <span class="n">tm</span> <span class="o">=</span> <span class="n">system_clock</span><span class="o">::</span><span class="n">to_time_t</span><span class="p">(</span><span class="n">today</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;ä»Šå¤©çš„æ—¥æœŸæ˜¯:    &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">ctime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tm</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">time_t</span> <span class="n">tm1</span> <span class="o">=</span> <span class="n">system_clock</span><span class="o">::</span><span class="n">to_time_t</span><span class="p">(</span><span class="n">today</span><span class="o">+</span><span class="n">day</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;æ˜å¤©çš„æ—¥æœŸæ˜¯:    &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">ctime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tm1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">time_t</span> <span class="n">tm2</span> <span class="o">=</span> <span class="n">system_clock</span><span class="o">::</span><span class="n">to_time_t</span><span class="p">(</span><span class="n">epoch</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;æ–°çºªå…ƒæ—¶é—´:      &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">ctime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tm2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">time_t</span> <span class="n">tm3</span> <span class="o">=</span> <span class="n">system_clock</span><span class="o">::</span><span class="n">to_time_t</span><span class="p">(</span><span class="n">ppt</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;æ–°çºªå…ƒæ—¶é—´+1å¤©:  &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">ctime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tm3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">time_t</span> <span class="n">tm4</span> <span class="o">=</span> <span class="n">system_clock</span><span class="o">::</span><span class="n">to_time_t</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;æ–°çºªå…ƒæ—¶é—´+10å¤©: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">ctime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tm4</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¤ºä¾‹ä»£ç æ‰“å°çš„ç»“æœä¸ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="err">ä»Šå¤©çš„æ—¥æœŸæ˜¯</span><span class="o">:</span>     <span class="n">Thu</span> <span class="n">Apr</span> <span class="mi">8</span> <span class="mi">11</span><span class="o">:</span><span class="mi">09</span><span class="o">:</span><span class="mi">49</span> <span class="mi">2021</span>
</span></span><span class="line"><span class="cl"><span class="err">æ˜å¤©çš„æ—¥æœŸæ˜¯</span><span class="o">:</span>     <span class="n">Fri</span> <span class="n">Apr</span> <span class="mi">9</span> <span class="mi">11</span><span class="o">:</span><span class="mi">09</span><span class="o">:</span><span class="mi">49</span> <span class="mi">2021</span>
</span></span><span class="line"><span class="cl"><span class="err">æ–°çºªå…ƒæ—¶é—´</span><span class="o">:</span>       <span class="n">Thu</span> <span class="n">Jan</span> <span class="mi">1</span> <span class="mi">08</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span> <span class="mi">1970</span>
</span></span><span class="line"><span class="cl"><span class="err">æ–°çºªå…ƒæ—¶é—´</span><span class="o">+</span><span class="mi">1</span><span class="err">å¤©</span><span class="o">:</span>   <span class="n">Fri</span> <span class="n">Jan</span> <span class="mi">2</span> <span class="mi">08</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span> <span class="mi">1970</span>
</span></span><span class="line"><span class="cl"><span class="err">æ–°çºªå…ƒæ—¶é—´</span><span class="o">+</span><span class="mi">10</span><span class="err">å¤©</span><span class="o">:</span>  <span class="n">Sun</span> <span class="n">Jan</span> <span class="mi">11</span> <span class="mi">08</span><span class="o">:</span><span class="mo">00</span><span class="o">:</span><span class="mo">00</span> <span class="mi">1970</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="32-steady_clock">3.2 steady_clock
</h3><p>å¦‚æœæˆ‘ä»¬é€šè¿‡æ—¶é’Ÿä¸æ˜¯ä¸ºäº†è·å–å½“å‰çš„ç³»ç»Ÿæ—¶é—´ï¼Œè€Œæ˜¯è¿›è¡Œç¨‹åºè€—æ—¶çš„æ—¶é•¿ï¼Œæ­¤æ—¶ä½¿ç”¨<code>system_clock</code>å°±ä¸åˆé€‚äº†ï¼Œå› ä¸ºè¿™ä¸ªæ—¶é—´å¯ä»¥è·Ÿéšç³»ç»Ÿçš„è®¾ç½®å‘ç”Ÿå˜åŒ–ã€‚åœ¨C++11ä¸­æä¾›çš„æ—¶é’Ÿç±»<code>steady_clock</code>ç›¸å½“äºç§’è¡¨ï¼Œåªè¦å¯åŠ¨å°±ä¼šè¿›è¡Œæ—¶é—´çš„ç´¯åŠ ï¼Œå¹¶ä¸”ä¸èƒ½è¢«ä¿®æ”¹ï¼Œéå¸¸é€‚åˆäºè¿›è¡Œè€—æ—¶çš„ç»Ÿè®¡ã€‚</p>
<p><code>steady_clock</code>æ—¶é’Ÿç±»åœ¨åº•å±‚æºç ä¸­çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">steady_clock</span> <span class="p">{</span> <span class="c1">// wraps QueryPerformanceCounter
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">using</span> <span class="n">rep</span>                       <span class="o">=</span> <span class="kt">long</span> <span class="kt">long</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">period</span>                    <span class="o">=</span> <span class="n">nano</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">duration</span>                  <span class="o">=</span> <span class="n">nanoseconds</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">using</span> <span class="n">time_point</span>                <span class="o">=</span> <span class="n">chrono</span><span class="o">::</span><span class="n">time_point</span><span class="o">&lt;</span><span class="n">steady_clock</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">constexpr</span> <span class="kt">bool</span> <span class="n">is_steady</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// get current time
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">_NODISCARD</span> <span class="k">static</span> <span class="n">time_point</span> <span class="nf">now</span><span class="p">()</span> <span class="k">noexcept</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="c1">// doesn&#39;t change after system boot
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">const</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">_Freq</span> <span class="o">=</span> <span class="n">_Query_perf_frequency</span><span class="p">();</span> 
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">_Ctr</span>  <span class="o">=</span> <span class="n">_Query_perf_counter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">static_assert</span><span class="p">(</span><span class="n">period</span><span class="o">::</span><span class="n">num</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#34;This assumes period::num == 1.&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">_Whole</span> <span class="o">=</span> <span class="p">(</span><span class="n">_Ctr</span> <span class="o">/</span> <span class="n">_Freq</span><span class="p">)</span> <span class="o">*</span> <span class="n">period</span><span class="o">::</span><span class="n">den</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">const</span> <span class="kt">long</span> <span class="kt">long</span> <span class="n">_Part</span>  <span class="o">=</span> <span class="p">(</span><span class="n">_Ctr</span> <span class="o">%</span> <span class="n">_Freq</span><span class="p">)</span> <span class="o">*</span> <span class="n">period</span><span class="o">::</span><span class="n">den</span> <span class="o">/</span> <span class="n">_Freq</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">time_point</span><span class="p">(</span><span class="n">duration</span><span class="p">(</span><span class="n">_Whole</span> <span class="o">+</span> <span class="n">_Part</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡ä»¥ä¸Šæºç å¯ä»¥äº†è§£åˆ°åœ¨<code>steady_clock</code>ç±»ä¸­çš„ä¸€äº›ç»†èŠ‚ä¿¡æ¯ï¼š</p>
<ul>
<li><code>rep</code>ï¼šæ—¶é’Ÿå‘¨æœŸæ¬¡æ•°æ˜¯é€šè¿‡æ•´å½¢æ¥è®°å½•çš„<code>long long</code></li>
<li><code>period</code>ï¼šä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸæ˜¯1çº³ç§’<code>nano</code></li>
<li><code>duration</code>ï¼šæ—¶é—´é—´éš”ä¸º1çº³ç§’<code>nanoseconds</code></li>
<li><code>time_point</code>ï¼šæ—¶é—´ç‚¹é€šè¿‡ç³»ç»Ÿæ—¶é’Ÿåšäº†åˆå§‹åŒ–<code>chrono::time_point&lt;steady_clock&gt;</code></li>
</ul>
<p>å¦å¤–ï¼Œåœ¨è¿™ä¸ªç±»ä¸­ä¹Ÿæä¾›äº†ä¸€ä¸ªé™æ€çš„<code>now()</code>æ–¹æ³•ï¼Œç”¨äºå¾—åˆ°å½“å‰çš„æ—¶é—´ç‚¹ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">static</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">time_point</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">steady_clock</span><span class="o">&gt;</span> <span class="n">now</span><span class="p">()</span> <span class="k">noexcept</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‡è®¾è¦æµ‹è¯•æŸä¸€æ®µç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œå¯ä»¥è®¡ç®—å®ƒæ‰§è¡ŒæœŸé—´æ¶ˆè€—çš„æ€»æ—¶é•¿ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">steady_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">start</span> <span class="o">=</span> <span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;print 1000 stars ....&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;*&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">steady_clock</span><span class="o">::</span><span class="n">time_point</span> <span class="n">last</span> <span class="o">=</span> <span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">dt</span> <span class="o">=</span> <span class="n">last</span> <span class="o">-</span> <span class="n">start</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;æ€»å…±è€—æ—¶: &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">dt</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;çº³ç§’&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="33-high_resolution_clock">3.3 high_resolution_clock
</h3><p><code>high_resolution_clock</code>æä¾›çš„æ—¶é’Ÿç²¾åº¦æ¯”<code>system_clock</code>è¦é«˜ï¼Œå®ƒä¹Ÿæ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ã€‚åœ¨åº•å±‚æºç ä¸­ï¼Œè¿™ä¸ªç±»å…¶å®æ˜¯<code>steady_clock</code>ç±»çš„åˆ«åï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">high_resolution_clock</span> <span class="o">=</span> <span class="n">steady_clock</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› æ­¤<code>high_resolution_clock</code>çš„ä½¿ç”¨æ–¹å¼å’Œ<code>steady_clock</code>æ˜¯ä¸€æ ·çš„ï¼Œåœ¨æ­¤å°±ä¸å†è¿‡å¤šè¿›è¡Œèµ˜è¿°äº†ã€‚</p>
<hr>
<h2 id="4-è½¬æ¢å‡½æ•°">4. è½¬æ¢å‡½æ•°
</h2><h3 id="41-duration_cast">4.1 duration_cast
</h3><p><code>duration_cast</code>æ˜¯<code>chrono</code>åº“æä¾›çš„ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸å±äº<code>duration</code>ç±»ã€‚é€šè¿‡è¿™ä¸ªå‡½æ•°å¯ä»¥å¯¹<code>duration</code>ç±»å¯¹è±¡å†…éƒ¨çš„æ—¶é’Ÿå‘¨æœŸ<code>Period</code>ï¼Œå’Œå‘¨æœŸæ¬¡æ•°çš„ç±»å‹<code>Rep</code>è¿›è¡Œä¿®æ”¹ï¼Œè¯¥å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">ToDuration</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Rep</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Period</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">constexpr</span> <span class="n">ToDuration</span> <span class="n">duration_cast</span><span class="p">(</span><span class="k">const</span> <span class="n">duration</span><span class="o">&lt;</span><span class="n">Rep</span><span class="p">,</span> <span class="n">Period</span><span class="o">&gt;&amp;</span> <span class="n">dtn</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>å¦‚æœæ˜¯å¯¹æ—¶é’Ÿå‘¨æœŸè¿›è¡Œè½¬æ¢ï¼šæºæ—¶é’Ÿå‘¨æœŸå¿…é¡»èƒ½å¤Ÿæ•´é™¤ç›®çš„æ—¶é’Ÿå‘¨æœŸï¼ˆæ¯”å¦‚ï¼šå°æ—¶åˆ°åˆ†é’Ÿï¼‰ã€‚</li>
<li>å¦‚æœæ˜¯å¯¹æ—¶é’Ÿå‘¨æœŸæ¬¡æ•°çš„ç±»å‹è¿›è¡Œè½¬æ¢ï¼šä½ç­‰ç±»å‹é»˜è®¤å¯ä»¥å‘é«˜ç­‰ç±»å‹è¿›è¡Œè½¬æ¢ï¼ˆæ¯”å¦‚ï¼šint è½¬ doubleï¼‰ã€‚</li>
<li>å¦‚æœæ—¶é’Ÿå‘¨æœŸå’Œæ—¶é’Ÿå‘¨æœŸæ¬¡æ•°ç±»å‹éƒ½å˜äº†ï¼Œæ ¹æ®ç¬¬äºŒç‚¹è¿›è¡Œæ¨å¯¼ï¼ˆä¹Ÿå°±æ˜¯çœ‹æ—¶é—´å‘¨æœŸæ¬¡æ•°ç±»å‹ï¼‰ã€‚</li>
<li>ä»¥ä¸Šæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ <code>duration_cast</code> è¿›è¡Œæ˜¾å¼è½¬æ¢ã€‚</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢æµ‹è¯•ç¨‹åºæ‰§è¡Œæ—¶é—´çš„ä»£ç ï¼Œåœ¨ä»£ç ä¸­ä¿®æ”¹<code>duration</code>å¯¹è±¡çš„å±æ€§ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;chrono&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;print 1000 stars ....&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;*&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">f</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">steady_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// æ•´æ•°æ—¶é•¿ï¼šæ—¶é’Ÿå‘¨æœŸçº³ç§’è½¬æ¯«ç§’ï¼Œè¦æ±‚ duration_cast
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">auto</span> <span class="n">int_ms</span> <span class="o">=</span> <span class="n">duration_cast</span><span class="o">&lt;</span><span class="n">milliseconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å°æ•°æ—¶é•¿ï¼šä¸è¦æ±‚ duration_cast
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">duration</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="n">ratio</span><span class="o">&lt;</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1000</span><span class="o">&gt;&gt;</span> <span class="n">fp_ms</span> <span class="o">=</span> <span class="n">t2</span> <span class="o">-</span> <span class="n">t1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;f() took &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">fp_ms</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; ms, &#34;</span>
</span></span><span class="line"><span class="cl">         <span class="o">&lt;&lt;</span> <span class="s">&#34;or &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">int_ms</span><span class="p">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; whole milliseconds</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¤ºä¾‹ä»£ç è¾“å‡ºçš„ç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">print</span> <span class="mi">1000</span> <span class="n">stars</span> <span class="p">....</span>
</span></span><span class="line"><span class="cl"><span class="o">******</span>
</span></span><span class="line"><span class="cl"><span class="n">f</span><span class="p">()</span> <span class="n">took</span> <span class="mf">40.2547</span> <span class="n">ms</span><span class="p">,</span> <span class="n">or</span> <span class="mi">40</span> <span class="n">whole</span> <span class="n">milliseconds</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="42-time_point_cast">4.2 time_point_cast
</h3><p><code>time_point_cast</code>ä¹Ÿæ˜¯<code>chrono</code>åº“æä¾›çš„ä¸€ä¸ªæ¨¡æ¿å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸å±äº<code>time_point</code>ç±»ã€‚å‡½æ•°çš„ä½œç”¨æ˜¯å¯¹æ—¶é—´ç‚¹è¿›è¡Œè½¬æ¢ï¼Œå› ä¸ºä¸åŒçš„æ—¶é—´ç‚¹å¯¹è±¡å†…éƒ¨çš„æ—¶é’Ÿå‘¨æœŸ<code>Period</code>ï¼Œå’Œå‘¨æœŸæ¬¡æ•°çš„ç±»å‹<code>Rep</code>å¯èƒ½ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œä¸€èˆ¬æƒ…å†µä¸‹å®ƒä»¬ä¹‹é—´å¯ä»¥è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¯¥å‡½æ•°æ˜¾å¼åœ°è¿›è¡Œè½¬æ¢ï¼Œå‡½æ•°åŸå‹å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">class</span> <span class="nc">ToDuration</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Clock</span><span class="p">,</span> <span class="k">class</span> <span class="nc">Duration</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="n">time_point</span><span class="o">&lt;</span><span class="n">Clock</span><span class="p">,</span> <span class="n">ToDuration</span><span class="o">&gt;</span> <span class="n">time_point_cast</span><span class="p">(</span><span class="k">const</span> <span class="n">time_point</span><span class="o">&lt;</span><span class="n">Clock</span><span class="p">,</span> <span class="n">Duration</span><span class="o">&gt;&amp;</span> <span class="n">t</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…³äºå‡½æ•°çš„ä½¿ç”¨ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">using</span> <span class="n">Clock</span> <span class="o">=</span> <span class="n">chrono</span><span class="o">::</span><span class="n">system_clock</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">Duration</span><span class="o">&gt;</span><span class="k">using</span> <span class="n">TimePoint</span> <span class="o">=</span> <span class="n">time_point</span><span class="o">&lt;</span><span class="n">Clock</span><span class="p">,</span> <span class="n">Duration</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">timePointCaseTest</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 1. åŸºäºç§’çš„æ—¶é—´ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">TimePoint</span><span class="o">&lt;</span><span class="n">seconds</span><span class="o">&gt;</span> <span class="n">mPoint</span><span class="p">(</span><span class="n">seconds</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// 2. åŸºäºæ¯«ç§’çš„æ—¶é—´ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">TimePoint</span><span class="o">&lt;</span><span class="n">milliseconds</span><span class="o">&gt;</span> <span class="n">milPoint</span><span class="p">(</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">1234</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// s -&gt; ms 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">TimePoint</span><span class="o">&lt;</span><span class="n">milliseconds</span><span class="o">&gt;</span> <span class="n">ms</span> <span class="o">=</span> <span class="n">mPoint</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ms -&gt; s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">TimePoint</span><span class="o">&lt;</span><span class="n">seconds</span><span class="o">&gt;</span> <span class="n">ss</span> <span class="o">=</span> <span class="n">time_point_cast</span><span class="o">&lt;</span><span class="n">seconds</span><span class="o">&gt;</span><span class="p">(</span><span class="n">milPoint</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><br>

<div class="notice notice-info" >
    <div class="notice-title"></div><p>æ³¨æ„äº‹é¡¹ï¼šå…³äºæ—¶é—´ç‚¹çš„è½¬æ¢å¦‚æœæ²¡æœ‰ç²¾åº¦çš„æŸå¤±å¯ä»¥ç›´æ¥è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ï¼Œå¦‚æœä¼šæŸå¤±ç²¾åº¦åªèƒ½é€šè¿‡æ˜¾å¼ç±»å‹è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨<code>time_point_cast</code>å‡½æ•°æ¥å®Œæˆè¯¥æ“ä½œã€‚</p></div>


</section>


    <footer class="article-footer">
    



    
</footer>

</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">ç›¸å…³æ–‡ç« </h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/post/cpp_static/">
        
        
            <div class="article-image">
                <img src="/post/cpp_static/cover.0d82fe059b6459e8d80ac404f2930a85.png" 
                        width="1024" 
                        height="576" 
                        loading="lazy"
                        alt="Featured image of post ã€C&#43;&#43; åŸºç¡€è¿›é˜¶ã€‘ Static"
                        data-key="cpp_static" 
                        data-hash="md5-DYL&#43;BZtkWejYCsQE8pMKhQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">ã€C&#43;&#43; åŸºç¡€è¿›é˜¶ã€‘ Static</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/cpp_const/">
        
        
            <div class="article-image">
                <img src="/post/cpp_const/cover.a7bf723bf6f0ad48bb93d6884f4b80e7.png" 
                        width="1024" 
                        height="576" 
                        loading="lazy"
                        alt="Featured image of post ã€C&#43;&#43; åŸºç¡€è¿›é˜¶ã€‘ Const"
                        data-key="cpp_const" 
                        data-hash="md5-p79yO/bwrUi7k9aIT0uA5w==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">ã€C&#43;&#43; åŸºç¡€è¿›é˜¶ã€‘ Const</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/leetcode-function/">
        
        
            <div class="article-image">
                <img src="/post/leetcode-function/function.3404a30cefa7a91972eacee2bd9e34f3.jpg" 
                        width="1024" 
                        height="576" 
                        loading="lazy"
                        alt="Featured image of post å¸¸ç”¨å‡½æ•°"
                        data-key="leetcode-function" 
                        data-hash="md5-NASjDO&#43;nqRly6s7ivZ408w==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">å¸¸ç”¨å‡½æ•°</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/post/cpp_study/">
        
        
            <div class="article-image">
                <img src="/post/cpp_study/cpp.53cb4c799985b42bde13573fa9533f2d.jpg" 
                        width="5184" 
                        height="3456" 
                        loading="lazy"
                        alt="Featured image of post C&#43;&#43;è¯­æ³•"
                        data-key="cpp_study" 
                        data-hash="md5-U8tMeZmFtCveE1c/qVM/LQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">C&#43;&#43;è¯­æ³•</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script
    src="https://giscus.app/client.js"
    data-repo="serenNan/serenNan.github.io"
    data-repo-id="R_kgDONieGHg"
    data-category="Announcements"
    data-category-id="DIC_kwDONieGHs4ClphA"
    data-mapping="pathname"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="light"
    data-lang="zh-CN"
    data-loading=""
    crossorigin="anonymous"
    async
></script>
<script>
    function setGiscusTheme(theme) {
        let giscus = document.querySelector("iframe.giscus-frame");
        if (giscus) {
            giscus.contentWindow.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme,
                        },
                    },
                },
                "https://giscus.app"
            );
        }
    }

    (function () {
        addEventListener("message", (e) => {
            if (event.origin !== "https://giscus.app") return;
            handler();
        });
        window.addEventListener("onColorSchemeChange", handler);

        function handler() {
            if (document.documentElement.dataset.scheme === "light") {
                setGiscusTheme('light');
            } else {
                setGiscusTheme('dark');
            }
        }
    })();
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2024 - 
        
        2025 serenNan
    </section>
    
    <section class="powerby">
        ä½¿ç”¨ <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> æ„å»º <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.29.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>

<script>
    (function(u, c) {
      var d = document, t = 'script', o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function(e) { c(e); }); }
      s.parentNode.insertBefore(o, s);
    })('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js', function() {
      pangu.spacingPage();
    });
</script>

    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<style>
  @font-face {
    font-family: 'MapleMono2';
    src: url('/font/MapleMono2.ttf') format('truetype');
  }

  :root {
    --base-font-family: 'MapleMono2';
    --code-font-family: 'MapleMono2';
  }
</style>

<script src="https://npm.elemecdn.com/nprogress@0.2.0/nprogress.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://npm.elemecdn.com/nprogress@0.2.0/nprogress.css" crossorigin="anonymous" />
<script>
    NProgress.start();
    document.addEventListener("readystatechange", () => {
        if (document.readyState === "interactive") NProgress.inc(0.8);
        if (document.readyState === "complete") NProgress.done();
    });
</script>



<div id="particles-js"></div>
<script src="/background/particles.min.js"></script>
<script>
particlesJS.load('particles-js', '\/background\/particlesjs-config.json', function() {
console.log('particles.js loaded - callback');
});
</script>


<style>
  #particles-js {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }
</style>





<style>
    #backTopBtn {
        display: none;
        position: fixed;
        bottom: 5%;
        right: 24%;  
        z-index: 99;
        cursor: pointer;
        width: 30px;
        height: 30px;
        background-image: url('/icons/backTop.svg');  
        background-size: cover;  
    }
</style>

<script>
    

    function initScrollTop() {
        let rightSideBar = document.querySelector(".right-sidebar");
        if (!rightSideBar) {
            return;
        }
        
        let btn = document.createElement("div");
        btn.id = "backTopBtn";
        btn.onclick = backToTop;
        rightSideBar.appendChild(btn);
        
        window.onscroll = function() {
            
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                btn.style.display = "block";
            } else {
                btn.style.display = "none";
            }
        };
    }

    

    function backToTop(){
        window.scrollTo({ top: 0, behavior: "smooth" });
    }

    initScrollTop();
</script>


<script defer src="https://cn.vercount.one/js"></script>

<script>
    function showHideView() {
        
        let viewCounts = document.querySelectorAll("#viewCount");
        if (viewCounts) {
            
            let article =  document.querySelector(".article-page");
            if (!article) {
                viewCounts.forEach(ele => {
                    ele.style.display = 'none';
                });
            }
        }
    }
    
    showHideView();
</script>

          
        <div id="toggle-buttons">
  <button id="toggle-left-sidebar" aria-label="Toggle Left Sidebar"> &lt;- </button>
  <button id="toggle-right-sidebar" aria-label="Toggle Right Sidebar"> -> </button>
</div>
<script>
  
  document.getElementById('toggle-left-sidebar').addEventListener('click', function() {
    document.body.classList.toggle('left-sidebar-hidden');
    this.textContent = document.body.classList.contains('left-sidebar-hidden') ? '->' : '<-';
  });

  
  document.getElementById('toggle-right-sidebar').addEventListener('click', function() {
    document.body.classList.toggle('right-sidebar-hidden');
    this.textContent = document.body.classList.contains('right-sidebar-hidden') ? '<-' : '->';
  });
</script>


<script>

let lastClientX = 0;
document.addEventListener('mousemove', e => {
  const edgeThreshold = 50;
  const btnLeft = document.getElementById('toggle-left-sidebar');
  const btnRight = document.getElementById('toggle-right-sidebar');
  
  
  lastClientX = e.clientX;

  
  if (e.clientX < edgeThreshold) {
    btnLeft.style.opacity = '1';
    btnLeft.style.pointerEvents = 'auto';
  } else {
    btnLeft.style.opacity = '0';
    btnLeft.style.pointerEvents = 'none';
  }

  
  if (window.innerWidth - e.clientX < edgeThreshold) {
    btnRight.style.opacity = '1';
    btnRight.style.pointerEvents = 'auto';
  } else {
    btnRight.style.opacity = '0';
    btnRight.style.pointerEvents = 'none';
  }
});
</script>
       
    </body>
</html>
